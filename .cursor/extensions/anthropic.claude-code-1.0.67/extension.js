var GY=Object.create;var{getPrototypeOf:zY,defineProperty:vf,getOwnPropertyNames:O9,getOwnPropertyDescriptor:WY}=Object,L9=Object.prototype.hasOwnProperty;var Kv=(f,v,J)=>{J=f!=null?GY(zY(f)):{};let X=v||!f||!f.__esModule?vf(J,"default",{value:f,enumerable:!0}):J;for(let Q of O9(f))if(!L9.call(X,Q))vf(X,Q,{get:()=>f[Q],enumerable:!0});return X},D9=new WeakMap,BY=(f)=>{var v=D9.get(f),J;if(v)return v;if(v=vf({},"__esModule",{value:!0}),f&&typeof f==="object"||typeof f==="function")O9(f).map((X)=>!L9.call(v,X)&&vf(v,X,{get:()=>f[X],enumerable:!(J=WY(f,X))||J.enumerable}));return D9.set(f,v),v},r=(f,v)=>()=>(v||f((v={exports:{}}).exports,v),v.exports);var A9=(f,v)=>{for(var J in v)vf(f,J,{get:v[J],enumerable:!0,configurable:!0,set:(X)=>v[J]=()=>X})};var S9=r((YW,R9)=>{R9.exports=function f(v){return v.map(function(J){if(J==="")return"''";if(J&&typeof J==="object")return J.op.replace(/(.)/g,"\\$1");if(/["\s\\]/.test(J)&&!/'/.test(J))return"'"+J.replace(/(['])/g,"\\$1")+"'";if(/["'\s]/.test(J))return'"'+J.replace(/(["\\$`!])/g,"\\$1")+'"';return String(J).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@[\\\]^`{|}])/g,"$1\\$2")}).join(" ")}});var x9=r((GW,T9)=>{var C9="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(","\\<\\<\\<",">>",">\\&","<\\&","[&;()|<>]"].join("|")+")",y9=new RegExp("^"+C9+"$"),I9="|&;()<> \\t",KY='"((\\\\"|[^"])*?)"',jY="'((\\\\'|[^'])*?)'",HY=/^#$/,g9="'",Z9='"',uQ="$",X0="",qY=4294967296;for(hf=0;hf<4;hf++)X0+=(qY*Math.random()).toString(16);var hf,PY=new RegExp("^"+X0);function VY(f,v){var J=v.lastIndex,X=[],Q;while(Q=v.exec(f))if(X.push(Q),v.lastIndex===Q.index)v.lastIndex+=1;return v.lastIndex=J,X}function NY(f,v,J){var X=typeof f==="function"?f(J):f[J];if(typeof X==="undefined"&&J!="")X="";else if(typeof X==="undefined")X="$";if(typeof X==="object")return v+X0+JSON.stringify(X)+X0;return v+X}function MY(f,v,J){if(!J)J={};var X=J.escape||"\\",Q="(\\"+X+`['"`+I9+`]|[^\\s'"`+I9+"])+",Y=new RegExp(["("+C9+")","("+Q+"|"+KY+"|"+jY+")+"].join("|"),"g"),G=VY(f,Y);if(G.length===0)return[];if(!v)v={};var z=!1;return G.map(function(W){var $=W[0];if(!$||z)return;if(y9.test($))return{op:$};var H=!1,j=!1,N="",K=!1,q;function M(){q+=1;var F,w,h=$.charAt(q);if(h==="{"){if(q+=1,$.charAt(q)==="}")throw new Error("Bad substitution: "+$.slice(q-2,q+1));if(F=$.indexOf("}",q),F<0)throw new Error("Bad substitution: "+$.slice(q));w=$.slice(q,F),q=F}else if(/[*@#?$!_-]/.test(h))w=h,q+=1;else{var E=$.slice(q);if(F=E.match(/[^\w\d_]/),!F)w=E,q=$.length;else w=E.slice(0,F.index),q+=F.index-1}return NY(v,"",w)}for(q=0;q<$.length;q++){var V=$.charAt(q);if(K=K||!H&&(V==="*"||V==="?"),j)N+=V,j=!1;else if(H)if(V===H)H=!1;else if(H==g9)N+=V;else if(V===X)if(q+=1,V=$.charAt(q),V===Z9||V===X||V===uQ)N+=V;else N+=X+V;else if(V===uQ)N+=M();else N+=V;else if(V===Z9||V===g9)H=V;else if(y9.test(V))return{op:$};else if(HY.test(V)){z=!0;var L={comment:f.slice(W.index+q+1)};if(N.length)return[N,L];return[L]}else if(V===X)j=!0;else if(V===uQ)N+=M();else N+=V}if(K)return{op:"glob",pattern:N};return N}).reduce(function(W,$){return typeof $==="undefined"?W:W.concat($)},[])}T9.exports=function f(v,J,X){var Q=MY(v,J,X);if(typeof J!=="function")return Q;return Q.reduce(function(Y,G){if(typeof G==="object")return Y.concat(G);var z=G.split(RegExp("("+X0+".*?"+X0+")","g"));if(z.length===1)return Y.concat(z[0]);return Y.concat(z.filter(Boolean).map(function(W){if(PY.test(W))return JSON.parse(W.split(X0)[1]);return W}))},[])}});var b9=r((rQ)=>{rQ.quote=S9();rQ.parse=x9()});var UJ=r((df,wJ)=>{(function(f,v){typeof df==="object"&&typeof wJ!=="undefined"?v(df):typeof define==="function"&&define.amd?define(["exports"],v):v(f.URI=f.URI||{})})(df,function(f){function v(){for(var D=arguments.length,P=Array(D),O=0;O<D;O++)P[O]=arguments[O];if(P.length>1){P[0]=P[0].slice(0,-1);var A=P.length-1;for(var U=1;U<A;++U)P[U]=P[U].slice(1,-1);return P[A]=P[A].slice(1),P.join("")}else return P[0]}function J(D){return"(?:"+D+")"}function X(D){return D===void 0?"undefined":D===null?"null":Object.prototype.toString.call(D).split(" ").pop().split("]").shift().toLowerCase()}function Q(D){return D.toUpperCase()}function Y(D){return D!==void 0&&D!==null?D instanceof Array?D:typeof D.length!=="number"||D.split||D.setInterval||D.call?[D]:Array.prototype.slice.call(D):[]}function G(D,P){var O=D;if(P)for(var A in P)O[A]=P[A];return O}function z(D){var P="[A-Za-z]",O="[\\x0D]",A="[0-9]",U="[\\x22]",k=v(A,"[A-Fa-f]"),o="[\\x0A]",Yv="[\\x20]",$v=J(J("%[EFef]"+k+"%"+k+k+"%"+k+k)+"|"+J("%[89A-Fa-f]"+k+"%"+k+k)+"|"+J("%"+k+k)),_v="[\\:\\/\\?\\#\\[\\]\\@]",Xv="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Dv=v(_v,Xv),Rv=D?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Nv=D?"[\\uE000-\\uF8FF]":"[]",zv=v(P,A,"[\\-\\.\\_\\~]",Rv),Ov=J(P+v(P,A,"[\\+\\-\\.]")+"*"),Hv=J(J($v+"|"+v(zv,Xv,"[\\:]"))+"*"),f0=J(J("25[0-5]")+"|"+J("2[0-4]"+A)+"|"+J("1"+A+A)+"|"+J("[1-9]"+A)+"|"+A),dv=J(J("25[0-5]")+"|"+J("2[0-4]"+A)+"|"+J("1"+A+A)+"|"+J("0?[1-9]"+A)+"|0?0?"+A),ev=J(dv+"\\."+dv+"\\."+dv+"\\."+dv),qv=J(k+"{1,4}"),iv=J(J(qv+"\\:"+qv)+"|"+ev),v1=J(J(qv+"\\:")+"{6}"+iv),q1=J("\\:\\:"+J(qv+"\\:")+"{5}"+iv),Q0=J(J(qv)+"?\\:\\:"+J(qv+"\\:")+"{4}"+iv),F1=J(J(J(qv+"\\:")+"{0,1}"+qv)+"?\\:\\:"+J(qv+"\\:")+"{3}"+iv),i0=J(J(J(qv+"\\:")+"{0,2}"+qv)+"?\\:\\:"+J(qv+"\\:")+"{2}"+iv),wf=J(J(J(qv+"\\:")+"{0,3}"+qv)+"?\\:\\:"+qv+"\\:"+iv),Uf=J(J(J(qv+"\\:")+"{0,4}"+qv)+"?\\:\\:"+iv),M0=J(J(J(qv+"\\:")+"{0,5}"+qv)+"?\\:\\:"+qv),D0=J(J(J(qv+"\\:")+"{0,6}"+qv)+"?\\:\\:"),h1=J([v1,q1,Q0,F1,i0,wf,Uf,M0,D0].join("|")),O0=J(J(zv+"|"+$v)+"+"),bQ=J(h1+"\\%25"+O0),J0=J(h1+J("\\%25|\\%(?!"+k+"{2})")+O0),e7=J("[vV]"+k+"+\\."+v(zv,Xv,"[\\:]")+"+"),vY=J("\\["+J(J0+"|"+h1+"|"+e7)+"\\]"),P9=J(J($v+"|"+v(zv,Xv))+"*"),s0=J(vY+"|"+ev+"(?!"+P9+")|"+P9),o0=J(A+"*"),V9=J(J(Hv+"@")+"?"+s0+J("\\:"+o0)+"?"),t0=J($v+"|"+v(zv,Xv,"[\\:\\@]")),fY=J(t0+"*"),N9=J(t0+"+"),QY=J(J($v+"|"+v(zv,Xv,"[\\@]"))+"+"),E1=J(J("\\/"+fY)+"*"),L0=J("\\/"+J(N9+E1)+"?"),kQ=J(QY+E1),Ff=J(N9+E1),A0="(?!"+t0+")",cz=J(E1+"|"+L0+"|"+kQ+"|"+Ff+"|"+A0),w0=J(J(t0+"|"+v("[\\/\\?]",Nv))+"*"),e0=J(J(t0+"|[\\/\\?]")+"*"),M9=J(J("\\/\\/"+V9+E1)+"|"+L0+"|"+Ff+"|"+A0),JY=J(Ov+"\\:"+M9+J("\\?"+w0)+"?"+J("\\#"+e0)+"?"),XY=J(J("\\/\\/"+V9+E1)+"|"+L0+"|"+kQ+"|"+A0),YY=J(XY+J("\\?"+w0)+"?"+J("\\#"+e0)+"?"),nz=J(JY+"|"+YY),dz=J(Ov+"\\:"+M9+J("\\?"+w0)+"?"),iz="^("+Ov+")\\:"+J(J("\\/\\/("+J("("+Hv+")@")+"?("+s0+")"+J("\\:("+o0+")")+"?)")+"?("+E1+"|"+L0+"|"+Ff+"|"+A0+")")+J("\\?("+w0+")")+"?"+J("\\#("+e0+")")+"?$",sz="^(){0}"+J(J("\\/\\/("+J("("+Hv+")@")+"?("+s0+")"+J("\\:("+o0+")")+"?)")+"?("+E1+"|"+L0+"|"+kQ+"|"+A0+")")+J("\\?("+w0+")")+"?"+J("\\#("+e0+")")+"?$",oz="^("+Ov+")\\:"+J(J("\\/\\/("+J("("+Hv+")@")+"?("+s0+")"+J("\\:("+o0+")")+"?)")+"?("+E1+"|"+L0+"|"+Ff+"|"+A0+")")+J("\\?("+w0+")")+"?$",tz="^"+J("\\#("+e0+")")+"?$",ez="^"+J("("+Hv+")@")+"?("+s0+")"+J("\\:("+o0+")")+"?$";return{NOT_SCHEME:new RegExp(v("[^]",P,A,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(v("[^\\%\\:]",zv,Xv),"g"),NOT_HOST:new RegExp(v("[^\\%\\[\\]\\:]",zv,Xv),"g"),NOT_PATH:new RegExp(v("[^\\%\\/\\:\\@]",zv,Xv),"g"),NOT_PATH_NOSCHEME:new RegExp(v("[^\\%\\/\\@]",zv,Xv),"g"),NOT_QUERY:new RegExp(v("[^\\%]",zv,Xv,"[\\:\\@\\/\\?]",Nv),"g"),NOT_FRAGMENT:new RegExp(v("[^\\%]",zv,Xv,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(v("[^]",zv,Xv),"g"),UNRESERVED:new RegExp(zv,"g"),OTHER_CHARS:new RegExp(v("[^\\%]",zv,Dv),"g"),PCT_ENCODED:new RegExp($v,"g"),IPV4ADDRESS:new RegExp("^("+ev+")$"),IPV6ADDRESS:new RegExp("^\\[?("+h1+")"+J(J("\\%25|\\%(?!"+k+"{2})")+"("+O0+")")+"?\\]?$")}}var W=z(!1),$=z(!0),H=function(){function D(P,O){var A=[],U=!0,k=!1,o=void 0;try{for(var Yv=P[Symbol.iterator](),$v;!(U=($v=Yv.next()).done);U=!0)if(A.push($v.value),O&&A.length===O)break}catch(_v){k=!0,o=_v}finally{try{if(!U&&Yv.return)Yv.return()}finally{if(k)throw o}}return A}return function(P,O){if(Array.isArray(P))return P;else if(Symbol.iterator in Object(P))return D(P,O);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=function(D){if(Array.isArray(D)){for(var P=0,O=Array(D.length);P<D.length;P++)O[P]=D[P];return O}else return Array.from(D)},N=2147483647,K=36,q=1,M=26,V=38,L=700,F=72,w=128,h="-",E=/^xn--/,R=/[^\0-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=K-q,m=Math.floor,I=String.fromCharCode;function x(D){throw new RangeError(l[D])}function _(D,P){var O=[],A=D.length;while(A--)O[A]=P(D[A]);return O}function Z(D,P){var O=D.split("@"),A="";if(O.length>1)A=O[0]+"@",D=O[1];D=D.replace(b,".");var U=D.split("."),k=_(U,P).join(".");return A+k}function u(D){var P=[],O=0,A=D.length;while(O<A){var U=D.charCodeAt(O++);if(U>=55296&&U<=56319&&O<A){var k=D.charCodeAt(O++);if((k&64512)==56320)P.push(((U&1023)<<10)+(k&1023)+65536);else P.push(U),O--}else P.push(U)}return P}var jv=function D(P){return String.fromCodePoint.apply(String,j(P))},vv=function D(P){if(P-48<10)return P-22;if(P-65<26)return P-65;if(P-97<26)return P-97;return K},Jv=function D(P,O){return P+22+75*(P<26)-((O!=0)<<5)},e=function D(P,O,A){var U=0;P=A?m(P/L):P>>1,P+=m(P/O);for(;P>g*M>>1;U+=K)P=m(P/g);return m(U+(g+1)*P/(P+V))},a=function D(P){var O=[],A=P.length,U=0,k=w,o=F,Yv=P.lastIndexOf(h);if(Yv<0)Yv=0;for(var $v=0;$v<Yv;++$v){if(P.charCodeAt($v)>=128)x("not-basic");O.push(P.charCodeAt($v))}for(var _v=Yv>0?Yv+1:0;_v<A;){var Xv=U;for(var Dv=1,Rv=K;;Rv+=K){if(_v>=A)x("invalid-input");var Nv=vv(P.charCodeAt(_v++));if(Nv>=K||Nv>m((N-U)/Dv))x("overflow");U+=Nv*Dv;var zv=Rv<=o?q:Rv>=o+M?M:Rv-o;if(Nv<zv)break;var Ov=K-zv;if(Dv>m(N/Ov))x("overflow");Dv*=Ov}var Hv=O.length+1;if(o=e(U-Xv,Hv,Xv==0),m(U/Hv)>N-k)x("overflow");k+=m(U/Hv),U%=Hv,O.splice(U++,0,k)}return String.fromCodePoint.apply(String,O)},Av=function D(P){var O=[];P=u(P);var A=P.length,U=w,k=0,o=F,Yv=!0,$v=!1,_v=void 0;try{for(var Xv=P[Symbol.iterator](),Dv;!(Yv=(Dv=Xv.next()).done);Yv=!0){var Rv=Dv.value;if(Rv<128)O.push(I(Rv))}}catch(J0){$v=!0,_v=J0}finally{try{if(!Yv&&Xv.return)Xv.return()}finally{if($v)throw _v}}var Nv=O.length,zv=Nv;if(Nv)O.push(h);while(zv<A){var Ov=N,Hv=!0,f0=!1,dv=void 0;try{for(var ev=P[Symbol.iterator](),qv;!(Hv=(qv=ev.next()).done);Hv=!0){var iv=qv.value;if(iv>=U&&iv<Ov)Ov=iv}}catch(J0){f0=!0,dv=J0}finally{try{if(!Hv&&ev.return)ev.return()}finally{if(f0)throw dv}}var v1=zv+1;if(Ov-U>m((N-k)/v1))x("overflow");k+=(Ov-U)*v1,U=Ov;var q1=!0,Q0=!1,F1=void 0;try{for(var i0=P[Symbol.iterator](),wf;!(q1=(wf=i0.next()).done);q1=!0){var Uf=wf.value;if(Uf<U&&++k>N)x("overflow");if(Uf==U){var M0=k;for(var D0=K;;D0+=K){var h1=D0<=o?q:D0>=o+M?M:D0-o;if(M0<h1)break;var O0=M0-h1,bQ=K-h1;O.push(I(Jv(h1+O0%bQ,0))),M0=m(O0/bQ)}O.push(I(Jv(M0,0))),o=e(k,v1,zv==Nv),k=0,++zv}}}catch(J0){Q0=!0,F1=J0}finally{try{if(!q1&&i0.return)i0.return()}finally{if(Q0)throw F1}}++k,++U}return O.join("")},Cv=function D(P){return Z(P,function(O){return E.test(O)?a(O.slice(4).toLowerCase()):O})},bv=function D(P){return Z(P,function(O){return R.test(O)?"xn--"+Av(O):O})},Gv={version:"2.1.0",ucs2:{decode:u,encode:jv},decode:a,encode:Av,toASCII:bv,toUnicode:Cv},hv={};function Sv(D){var P=D.charCodeAt(0),O=void 0;if(P<16)O="%0"+P.toString(16).toUpperCase();else if(P<128)O="%"+P.toString(16).toUpperCase();else if(P<2048)O="%"+(P>>6|192).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase();else O="%"+(P>>12|224).toString(16).toUpperCase()+"%"+(P>>6&63|128).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase();return O}function kv(D){var P="",O=0,A=D.length;while(O<A){var U=parseInt(D.substr(O+1,2),16);if(U<128)P+=String.fromCharCode(U),O+=3;else if(U>=194&&U<224){if(A-O>=6){var k=parseInt(D.substr(O+4,2),16);P+=String.fromCharCode((U&31)<<6|k&63)}else P+=D.substr(O,6);O+=6}else if(U>=224){if(A-O>=9){var o=parseInt(D.substr(O+4,2),16),Yv=parseInt(D.substr(O+7,2),16);P+=String.fromCharCode((U&15)<<12|(o&63)<<6|Yv&63)}else P+=D.substr(O,9);O+=9}else P+=D.substr(O,3),O+=3}return P}function T1(D,P){function O(A){var U=kv(A);return!U.match(P.UNRESERVED)?A:U}if(D.scheme)D.scheme=String(D.scheme).replace(P.PCT_ENCODED,O).toLowerCase().replace(P.NOT_SCHEME,"");if(D.userinfo!==void 0)D.userinfo=String(D.userinfo).replace(P.PCT_ENCODED,O).replace(P.NOT_USERINFO,Sv).replace(P.PCT_ENCODED,Q);if(D.host!==void 0)D.host=String(D.host).replace(P.PCT_ENCODED,O).toLowerCase().replace(P.NOT_HOST,Sv).replace(P.PCT_ENCODED,Q);if(D.path!==void 0)D.path=String(D.path).replace(P.PCT_ENCODED,O).replace(D.scheme?P.NOT_PATH:P.NOT_PATH_NOSCHEME,Sv).replace(P.PCT_ENCODED,Q);if(D.query!==void 0)D.query=String(D.query).replace(P.PCT_ENCODED,O).replace(P.NOT_QUERY,Sv).replace(P.PCT_ENCODED,Q);if(D.fragment!==void 0)D.fragment=String(D.fragment).replace(P.PCT_ENCODED,O).replace(P.NOT_FRAGMENT,Sv).replace(P.PCT_ENCODED,Q);return D}function w1(D){return D.replace(/^0*(.*)/,"$1")||"0"}function Ev(D,P){var O=D.match(P.IPV4ADDRESS)||[],A=H(O,2),U=A[1];if(U)return U.split(".").map(w1).join(".");else return D}function wv(D,P){var O=D.match(P.IPV6ADDRESS)||[],A=H(O,3),U=A[1],k=A[2];if(U){var o=U.toLowerCase().split("::").reverse(),Yv=H(o,2),$v=Yv[0],_v=Yv[1],Xv=_v?_v.split(":").map(w1):[],Dv=$v.split(":").map(w1),Rv=P.IPV4ADDRESS.test(Dv[Dv.length-1]),Nv=Rv?7:8,zv=Dv.length-Nv,Ov=Array(Nv);for(var Hv=0;Hv<Nv;++Hv)Ov[Hv]=Xv[Hv]||Dv[zv+Hv]||"";if(Rv)Ov[Nv-1]=Ev(Ov[Nv-1],P);var f0=Ov.reduce(function(v1,q1,Q0){if(!q1||q1==="0"){var F1=v1[v1.length-1];if(F1&&F1.index+F1.length===Q0)F1.length++;else v1.push({index:Q0,length:1})}return v1},[]),dv=f0.sort(function(v1,q1){return q1.length-v1.length})[0],ev=void 0;if(dv&&dv.length>1){var qv=Ov.slice(0,dv.index),iv=Ov.slice(dv.index+dv.length);ev=qv.join(":")+"::"+iv.join(":")}else ev=Ov.join(":");if(k)ev+="%"+k;return ev}else return D}var t1=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Tv="".match(/(){0}/)[1]===void 0;function Bv(D){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O={},A=P.iri!==!1?$:W;if(P.reference==="suffix")D=(P.scheme?P.scheme+":":"")+"//"+D;var U=D.match(t1);if(U){if(Tv){if(O.scheme=U[1],O.userinfo=U[3],O.host=U[4],O.port=parseInt(U[5],10),O.path=U[6]||"",O.query=U[7],O.fragment=U[8],isNaN(O.port))O.port=U[5]}else if(O.scheme=U[1]||void 0,O.userinfo=D.indexOf("@")!==-1?U[3]:void 0,O.host=D.indexOf("//")!==-1?U[4]:void 0,O.port=parseInt(U[5],10),O.path=U[6]||"",O.query=D.indexOf("?")!==-1?U[7]:void 0,O.fragment=D.indexOf("#")!==-1?U[8]:void 0,isNaN(O.port))O.port=D.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?U[4]:void 0;if(O.host)O.host=wv(Ev(O.host,A),A);if(O.scheme===void 0&&O.userinfo===void 0&&O.host===void 0&&O.port===void 0&&!O.path&&O.query===void 0)O.reference="same-document";else if(O.scheme===void 0)O.reference="relative";else if(O.fragment===void 0)O.reference="absolute";else O.reference="uri";if(P.reference&&P.reference!=="suffix"&&P.reference!==O.reference)O.error=O.error||"URI is not a "+P.reference+" reference.";var k=hv[(P.scheme||O.scheme||"").toLowerCase()];if(!P.unicodeSupport&&(!k||!k.unicodeSupport)){if(O.host&&(P.domainHost||k&&k.domainHost))try{O.host=Gv.toASCII(O.host.replace(A.PCT_ENCODED,kv).toLowerCase())}catch(o){O.error=O.error||"Host's domain name can not be converted to ASCII via punycode: "+o}T1(O,W)}else T1(O,A);if(k&&k.parse)k.parse(O,P)}else O.error=O.error||"URI can not be parsed.";return O}function x1(D,P){var O=P.iri!==!1?$:W,A=[];if(D.userinfo!==void 0)A.push(D.userinfo),A.push("@");if(D.host!==void 0)A.push(wv(Ev(String(D.host),O),O).replace(O.IPV6ADDRESS,function(U,k,o){return"["+k+(o?"%25"+o:"")+"]"}));if(typeof D.port==="number"||typeof D.port==="string")A.push(":"),A.push(String(D.port));return A.length?A.join(""):void 0}var U1=/^\.\.?\//,e1=/^\/\.(\/|$)/,v0=/^\/\.\.(\/|$)/,gv=/^\/?(?:.|\n)*?(?=\/|$)/;function tv(D){var P=[];while(D.length)if(D.match(U1))D=D.replace(U1,"");else if(D.match(e1))D=D.replace(e1,"/");else if(D.match(v0))D=D.replace(v0,"/"),P.pop();else if(D==="."||D==="..")D="";else{var O=D.match(gv);if(O){var A=O[0];D=D.slice(A.length),P.push(A)}else throw new Error("Unexpected dot segment condition")}return P.join("")}function uv(D){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=P.iri?$:W,A=[],U=hv[(P.scheme||D.scheme||"").toLowerCase()];if(U&&U.serialize)U.serialize(D,P);if(D.host){if(O.IPV6ADDRESS.test(D.host));else if(P.domainHost||U&&U.domainHost)try{D.host=!P.iri?Gv.toASCII(D.host.replace(O.PCT_ENCODED,kv).toLowerCase()):Gv.toUnicode(D.host)}catch(Yv){D.error=D.error||"Host's domain name can not be converted to "+(!P.iri?"ASCII":"Unicode")+" via punycode: "+Yv}}if(T1(D,O),P.reference!=="suffix"&&D.scheme)A.push(D.scheme),A.push(":");var k=x1(D,P);if(k!==void 0){if(P.reference!=="suffix")A.push("//");if(A.push(k),D.path&&D.path.charAt(0)!=="/")A.push("/")}if(D.path!==void 0){var o=D.path;if(!P.absolutePath&&(!U||!U.absolutePath))o=tv(o);if(k===void 0)o=o.replace(/^\/\//,"/%2F");A.push(o)}if(D.query!==void 0)A.push("?"),A.push(D.query);if(D.fragment!==void 0)A.push("#"),A.push(D.fragment);return A.join("")}function lv(D,P){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=arguments[3],U={};if(!A)D=Bv(uv(D,O),O),P=Bv(uv(P,O),O);if(O=O||{},!O.tolerant&&P.scheme)U.scheme=P.scheme,U.userinfo=P.userinfo,U.host=P.host,U.port=P.port,U.path=tv(P.path||""),U.query=P.query;else{if(P.userinfo!==void 0||P.host!==void 0||P.port!==void 0)U.userinfo=P.userinfo,U.host=P.host,U.port=P.port,U.path=tv(P.path||""),U.query=P.query;else{if(!P.path)if(U.path=D.path,P.query!==void 0)U.query=P.query;else U.query=D.query;else{if(P.path.charAt(0)==="/")U.path=tv(P.path);else{if((D.userinfo!==void 0||D.host!==void 0||D.port!==void 0)&&!D.path)U.path="/"+P.path;else if(!D.path)U.path=P.path;else U.path=D.path.slice(0,D.path.lastIndexOf("/")+1)+P.path;U.path=tv(U.path)}U.query=P.query}U.userinfo=D.userinfo,U.host=D.host,U.port=D.port}U.scheme=D.scheme}return U.fragment=P.fragment,U}function j1(D,P,O){var A=G({scheme:"null"},O);return uv(lv(Bv(D,A),Bv(P,A),A,!0),A)}function nv(D,P){if(typeof D==="string")D=uv(Bv(D,P),P);else if(X(D)==="object")D=Bv(uv(D,P),P);return D}function Af(D,P,O){if(typeof D==="string")D=uv(Bv(D,O),O);else if(X(D)==="object")D=uv(D,O);if(typeof P==="string")P=uv(Bv(P,O),O);else if(X(P)==="object")P=uv(P,O);return D===P}function TQ(D,P){return D&&D.toString().replace(!P||!P.iri?W.ESCAPE:$.ESCAPE,Sv)}function X1(D,P){return D&&D.toString().replace(!P||!P.iri?W.PCT_ENCODED:$.PCT_ENCODED,kv)}var n0={scheme:"http",domainHost:!0,parse:function D(P,O){if(!P.host)P.error=P.error||"HTTP URIs must have a host.";return P},serialize:function D(P,O){var A=String(P.scheme).toLowerCase()==="https";if(P.port===(A?443:80)||P.port==="")P.port=void 0;if(!P.path)P.path="/";return P}},z9={scheme:"https",domainHost:n0.domainHost,parse:n0.parse,serialize:n0.serialize};function W9(D){return typeof D.secure==="boolean"?D.secure:String(D.scheme).toLowerCase()==="wss"}var d0={scheme:"ws",domainHost:!0,parse:function D(P,O){var A=P;return A.secure=W9(A),A.resourceName=(A.path||"/")+(A.query?"?"+A.query:""),A.path=void 0,A.query=void 0,A},serialize:function D(P,O){if(P.port===(W9(P)?443:80)||P.port==="")P.port=void 0;if(typeof P.secure==="boolean")P.scheme=P.secure?"wss":"ws",P.secure=void 0;if(P.resourceName){var A=P.resourceName.split("?"),U=H(A,2),k=U[0],o=U[1];P.path=k&&k!=="/"?k:void 0,P.query=o,P.resourceName=void 0}return P.fragment=void 0,P}},B9={scheme:"wss",domainHost:d0.domainHost,parse:d0.parse,serialize:d0.serialize},m7={},u7=!0,$9="[A-Za-z0-9\\-\\.\\_\\~"+(u7?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",H1="[0-9A-Fa-f]",r7=J(J("%[EFef]"+H1+"%"+H1+H1+"%"+H1+H1)+"|"+J("%[89A-Fa-f]"+H1+"%"+H1+H1)+"|"+J("%"+H1+H1)),p7="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",a7="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",c7=v(a7,"[\\\"\\\\]"),n7="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",d7=new RegExp($9,"g"),N0=new RegExp(r7,"g"),i7=new RegExp(v("[^]",p7,"[\\.]","[\\\"]",c7),"g"),K9=new RegExp(v("[^]",$9,n7),"g"),s7=K9;function xQ(D){var P=kv(D);return!P.match(d7)?D:P}var j9={scheme:"mailto",parse:function D(P,O){var A=P,U=A.to=A.path?A.path.split(","):[];if(A.path=void 0,A.query){var k=!1,o={},Yv=A.query.split("&");for(var $v=0,_v=Yv.length;$v<_v;++$v){var Xv=Yv[$v].split("=");switch(Xv[0]){case"to":var Dv=Xv[1].split(",");for(var Rv=0,Nv=Dv.length;Rv<Nv;++Rv)U.push(Dv[Rv]);break;case"subject":A.subject=X1(Xv[1],O);break;case"body":A.body=X1(Xv[1],O);break;default:k=!0,o[X1(Xv[0],O)]=X1(Xv[1],O);break}}if(k)A.headers=o}A.query=void 0;for(var zv=0,Ov=U.length;zv<Ov;++zv){var Hv=U[zv].split("@");if(Hv[0]=X1(Hv[0]),!O.unicodeSupport)try{Hv[1]=Gv.toASCII(X1(Hv[1],O).toLowerCase())}catch(f0){A.error=A.error||"Email address's domain name can not be converted to ASCII via punycode: "+f0}else Hv[1]=X1(Hv[1],O).toLowerCase();U[zv]=Hv.join("@")}return A},serialize:function D(P,O){var A=P,U=Y(P.to);if(U){for(var k=0,o=U.length;k<o;++k){var Yv=String(U[k]),$v=Yv.lastIndexOf("@"),_v=Yv.slice(0,$v).replace(N0,xQ).replace(N0,Q).replace(i7,Sv),Xv=Yv.slice($v+1);try{Xv=!O.iri?Gv.toASCII(X1(Xv,O).toLowerCase()):Gv.toUnicode(Xv)}catch(zv){A.error=A.error||"Email address's domain name can not be converted to "+(!O.iri?"ASCII":"Unicode")+" via punycode: "+zv}U[k]=_v+"@"+Xv}A.path=U.join(",")}var Dv=P.headers=P.headers||{};if(P.subject)Dv.subject=P.subject;if(P.body)Dv.body=P.body;var Rv=[];for(var Nv in Dv)if(Dv[Nv]!==m7[Nv])Rv.push(Nv.replace(N0,xQ).replace(N0,Q).replace(K9,Sv)+"="+Dv[Nv].replace(N0,xQ).replace(N0,Q).replace(s7,Sv));if(Rv.length)A.query=Rv.join("&");return A}},o7=/^([^\:]+)\:(.*)/,H9={scheme:"urn",parse:function D(P,O){var A=P.path&&P.path.match(o7),U=P;if(A){var k=O.scheme||U.scheme||"urn",o=A[1].toLowerCase(),Yv=A[2],$v=k+":"+(O.nid||o),_v=hv[$v];if(U.nid=o,U.nss=Yv,U.path=void 0,_v)U=_v.parse(U,O)}else U.error=U.error||"URN can not be parsed.";return U},serialize:function D(P,O){var A=O.scheme||P.scheme||"urn",U=P.nid,k=A+":"+(O.nid||U),o=hv[k];if(o)P=o.serialize(P,O);var Yv=P,$v=P.nss;return Yv.path=(U||O.nid)+":"+$v,Yv}},t7=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,q9={scheme:"urn:uuid",parse:function D(P,O){var A=P;if(A.uuid=A.nss,A.nss=void 0,!O.tolerant&&(!A.uuid||!A.uuid.match(t7)))A.error=A.error||"UUID is not valid.";return A},serialize:function D(P,O){var A=P;return A.nss=(P.uuid||"").toLowerCase(),A}};hv[n0.scheme]=n0,hv[z9.scheme]=z9,hv[d0.scheme]=d0,hv[B9.scheme]=B9,hv[j9.scheme]=j9,hv[H9.scheme]=H9,hv[q9.scheme]=q9,f.SCHEMES=hv,f.pctEncChar=Sv,f.pctDecChars=kv,f.parse=Bv,f.removeDotSegments=tv,f.serialize=uv,f.resolveComponents=lv,f.resolve=j1,f.normalize=nv,f.equal=Af,f.escapeComponent=TQ,f.unescapeComponent=X1,Object.defineProperty(f,"__esModule",{value:!0})})});var sf=r((iW,FJ)=>{FJ.exports=function f(v,J){if(v===J)return!0;if(v&&J&&typeof v=="object"&&typeof J=="object"){if(v.constructor!==J.constructor)return!1;var X,Q,Y;if(Array.isArray(v)){if(X=v.length,X!=J.length)return!1;for(Q=X;Q--!==0;)if(!f(v[Q],J[Q]))return!1;return!0}if(v.constructor===RegExp)return v.source===J.source&&v.flags===J.flags;if(v.valueOf!==Object.prototype.valueOf)return v.valueOf()===J.valueOf();if(v.toString!==Object.prototype.toString)return v.toString()===J.toString();if(Y=Object.keys(v),X=Y.length,X!==Object.keys(J).length)return!1;for(Q=X;Q--!==0;)if(!Object.prototype.hasOwnProperty.call(J,Y[Q]))return!1;for(Q=X;Q--!==0;){var G=Y[Q];if(!f(v[G],J[G]))return!1}return!0}return v!==v&&J!==J}});var EJ=r((sW,hJ)=>{hJ.exports=function f(v){var J=0,X=v.length,Q=0,Y;while(Q<X)if(J++,Y=v.charCodeAt(Q++),Y>=55296&&Y<=56319&&Q<X){if(Y=v.charCodeAt(Q),(Y&64512)==56320)Q++}return J}});var $0=r((oW,SJ)=>{SJ.exports={copy:O2,checkDataType:X8,checkDataTypes:L2,coerceToTypes:A2,toHash:G8,getProperty:z8,escapeQuotes:W8,equal:sf(),ucs2length:EJ(),varOccurences:F2,varReplace:h2,schemaHasRules:E2,schemaHasRulesExcept:_2,schemaUnknownRules:R2,toQuotedString:Y8,getPathExpr:S2,getPath:y2,getData:Z2,unescapeFragment:C2,unescapeJsonPointer:$8,escapeFragment:T2,escapeJsonPointer:B8};function O2(f,v){v=v||{};for(var J in f)v[J]=f[J];return v}function X8(f,v,J,X){var Q=X?" !== ":" === ",Y=X?" || ":" && ",G=X?"!":"",z=X?"":"!";switch(f){case"null":return v+Q+"null";case"array":return G+"Array.isArray("+v+")";case"object":return"("+G+v+Y+"typeof "+v+Q+'"object"'+Y+z+"Array.isArray("+v+"))";case"integer":return"(typeof "+v+Q+'"number"'+Y+z+"("+v+" % 1)"+Y+v+Q+v+(J?Y+G+"isFinite("+v+")":"")+")";case"number":return"(typeof "+v+Q+'"'+f+'"'+(J?Y+G+"isFinite("+v+")":"")+")";default:return"typeof "+v+Q+'"'+f+'"'}}function L2(f,v,J){switch(f.length){case 1:return X8(f[0],v,J,!0);default:var X="",Q=G8(f);if(Q.array&&Q.object)X=Q.null?"(":"(!"+v+" || ",X+="typeof "+v+' !== "object")',delete Q.null,delete Q.array,delete Q.object;if(Q.number)delete Q.integer;for(var Y in Q)X+=(X?" && ":"")+X8(Y,v,J,!0);return X}}var _J=G8(["string","number","integer","boolean","null"]);function A2(f,v){if(Array.isArray(v)){var J=[];for(var X=0;X<v.length;X++){var Q=v[X];if(_J[Q])J[J.length]=Q;else if(f==="array"&&Q==="array")J[J.length]=Q}if(J.length)return J}else if(_J[v])return[v];else if(f==="array"&&v==="array")return["array"]}function G8(f){var v={};for(var J=0;J<f.length;J++)v[f[J]]=!0;return v}var w2=/^[a-z$_][a-z$_0-9]*$/i,U2=/'|\\/g;function z8(f){return typeof f=="number"?"["+f+"]":w2.test(f)?"."+f:"['"+W8(f)+"']"}function W8(f){return f.replace(U2,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function F2(f,v){v+="[^0-9]";var J=f.match(new RegExp(v,"g"));return J?J.length:0}function h2(f,v,J){return v+="([^0-9])",J=J.replace(/\$/g,"$$$$"),f.replace(new RegExp(v,"g"),J+"$1")}function E2(f,v){if(typeof f=="boolean")return!f;for(var J in f)if(v[J])return!0}function _2(f,v,J){if(typeof f=="boolean")return!f&&J!="not";for(var X in f)if(X!=J&&v[X])return!0}function R2(f,v){if(typeof f=="boolean")return;for(var J in f)if(!v[J])return J}function Y8(f){return"'"+W8(f)+"'"}function S2(f,v,J,X){var Q=J?"'/' + "+v+(X?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):X?"'[' + "+v+" + ']'":"'[\\'' + "+v+" + '\\']'";return RJ(f,Q)}function y2(f,v,J){var X=J?Y8("/"+B8(v)):Y8(z8(v));return RJ(f,X)}var I2=/^\/(?:[^~]|~0|~1)*$/,g2=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Z2(f,v,J){var X,Q,Y,G;if(f==="")return"rootData";if(f[0]=="/"){if(!I2.test(f))throw new Error("Invalid JSON-pointer: "+f);Q=f,Y="rootData"}else{if(G=f.match(g2),!G)throw new Error("Invalid JSON-pointer: "+f);if(X=+G[1],Q=G[2],Q=="#"){if(X>=v)throw new Error("Cannot access property/index "+X+" levels up, current level is "+v);return J[v-X]}if(X>v)throw new Error("Cannot access data "+X+" levels up, current level is "+v);if(Y="data"+(v-X||""),!Q)return Y}var z=Y,W=Q.split("/");for(var $=0;$<W.length;$++){var H=W[$];if(H)Y+=z8($8(H)),z+=" && "+Y}return z}function RJ(f,v){if(f=='""')return v;return(f+" + "+v).replace(/([^\\])' \+ '/g,"$1")}function C2(f){return $8(decodeURIComponent(f))}function T2(f){return encodeURIComponent(B8(f))}function B8(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}function $8(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}});var K8=r((tW,yJ)=>{var x2=$0();yJ.exports=b2;function b2(f){x2.copy(f,this)}});var gJ=r((eW,IJ)=>{var r1=IJ.exports=function(f,v,J){if(typeof v=="function")J=v,v={};J=v.cb||J;var X=typeof J=="function"?J:J.pre||function(){},Q=J.post||function(){};of(v,X,Q,f,"",f)};r1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};r1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};r1.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};r1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function of(f,v,J,X,Q,Y,G,z,W,$){if(X&&typeof X=="object"&&!Array.isArray(X)){v(X,Q,Y,G,z,W,$);for(var H in X){var j=X[H];if(Array.isArray(j)){if(H in r1.arrayKeywords)for(var N=0;N<j.length;N++)of(f,v,J,j[N],Q+"/"+H+"/"+N,Y,Q,H,X,N)}else if(H in r1.propsKeywords){if(j&&typeof j=="object")for(var K in j)of(f,v,J,j[K],Q+"/"+H+"/"+k2(K),Y,Q,H,X,K)}else if(H in r1.keywords||f.allKeys&&!(H in r1.skipKeywords))of(f,v,J,j,Q+"/"+H,Y,Q,H,X)}J(X,Q,Y,G,z,W,$)}}function k2(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}});var JQ=r((vB,xJ)=>{var $f=UJ(),ZJ=sf(),fQ=$0(),tf=K8(),l2=gJ();xJ.exports=a1;a1.normalizeId=p1;a1.fullPath=ef;a1.url=vQ;a1.ids=a2;a1.inlineRef=j8;a1.schema=QQ;function a1(f,v,J){var X=this._refs[J];if(typeof X=="string")if(this._refs[X])X=this._refs[X];else return a1.call(this,f,v,X);if(X=X||this._schemas[J],X instanceof tf)return j8(X.schema,this._opts.inlineRefs)?X.schema:X.validate||this._compile(X);var Q=QQ.call(this,v,J),Y,G,z;if(Q)Y=Q.schema,v=Q.root,z=Q.baseId;if(Y instanceof tf)G=Y.validate||f.call(this,Y.schema,v,void 0,z);else if(Y!==void 0)G=j8(Y,this._opts.inlineRefs)?Y:f.call(this,Y,v,void 0,z);return G}function QQ(f,v){var J=$f.parse(v),X=TJ(J),Q=ef(this._getId(f.schema));if(Object.keys(f.schema).length===0||X!==Q){var Y=p1(X),G=this._refs[Y];if(typeof G=="string")return m2.call(this,f,G,J);else if(G instanceof tf){if(!G.validate)this._compile(G);f=G}else if(G=this._schemas[Y],G instanceof tf){if(!G.validate)this._compile(G);if(Y==p1(v))return{schema:G,root:f,baseId:Q};f=G}else return;if(!f.schema)return;Q=ef(this._getId(f.schema))}return CJ.call(this,J,Q,f.schema,f)}function m2(f,v,J){var X=QQ.call(this,f,v);if(X){var{schema:Q,baseId:Y}=X;f=X.root;var G=this._getId(Q);if(G)Y=vQ(Y,G);return CJ.call(this,J,Y,Q,f)}}var u2=fQ.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function CJ(f,v,J,X){if(f.fragment=f.fragment||"",f.fragment.slice(0,1)!="/")return;var Q=f.fragment.split("/");for(var Y=1;Y<Q.length;Y++){var G=Q[Y];if(G){if(G=fQ.unescapeFragment(G),J=J[G],J===void 0)break;var z;if(!u2[G]){if(z=this._getId(J),z)v=vQ(v,z);if(J.$ref){var W=vQ(v,J.$ref),$=QQ.call(this,X,W);if($)J=$.schema,X=$.root,v=$.baseId}}}}if(J!==void 0&&J!==X.schema)return{schema:J,root:X,baseId:v}}var r2=fQ.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function j8(f,v){if(v===!1)return!1;if(v===void 0||v===!0)return H8(f);else if(v)return q8(f)<=v}function H8(f){var v;if(Array.isArray(f)){for(var J=0;J<f.length;J++)if(v=f[J],typeof v=="object"&&!H8(v))return!1}else for(var X in f){if(X=="$ref")return!1;if(v=f[X],typeof v=="object"&&!H8(v))return!1}return!0}function q8(f){var v=0,J;if(Array.isArray(f))for(var X=0;X<f.length;X++){if(J=f[X],typeof J=="object")v+=q8(J);if(v==1/0)return 1/0}else for(var Q in f){if(Q=="$ref")return 1/0;if(r2[Q])v++;else{if(J=f[Q],typeof J=="object")v+=q8(J)+1;if(v==1/0)return 1/0}}return v}function ef(f,v){if(v!==!1)f=p1(f);var J=$f.parse(f);return TJ(J)}function TJ(f){return $f.serialize(f).split("#")[0]+"#"}var p2=/#\/?$/;function p1(f){return f?f.replace(p2,""):""}function vQ(f,v){return v=p1(v),$f.resolve(f,v)}function a2(f){var v=p1(this._getId(f)),J={"":v},X={"":ef(v,!1)},Q={},Y=this;return l2(f,{allKeys:!0},function(G,z,W,$,H,j,N){if(z==="")return;var K=Y._getId(G),q=J[$],M=X[$]+"/"+H;if(N!==void 0)M+="/"+(typeof N=="number"?N:fQ.escapeFragment(N));if(typeof K=="string"){K=q=p1(q?$f.resolve(q,K):K);var V=Y._refs[K];if(typeof V=="string")V=Y._refs[V];if(V&&V.schema){if(!ZJ(G,V.schema))throw new Error('id "'+K+'" resolves to more than one schema')}else if(K!=p1(M))if(K[0]=="#"){if(Q[K]&&!ZJ(G,Q[K]))throw new Error('id "'+K+'" resolves to more than one schema');Q[K]=G}else Y._refs[K]=M}J[z]=q,X[z]=M}),Q}});var XQ=r((fB,kJ)=>{var P8=JQ();kJ.exports={Validation:bJ(c2),MissingRef:bJ(V8)};function c2(f){this.message="validation failed",this.errors=f,this.ajv=this.validation=!0}V8.message=function(f,v){return"can't resolve reference "+v+" from id "+f};function V8(f,v,J){this.message=J||V8.message(f,v),this.missingRef=P8.url(f,v),this.missingSchema=P8.normalizeId(P8.fullPath(this.missingRef))}function bJ(f){return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}});var N8=r((QB,lJ)=>{lJ.exports=function(f,v){if(!v)v={};if(typeof v==="function")v={cmp:v};var J=typeof v.cycles==="boolean"?v.cycles:!1,X=v.cmp&&function(Y){return function(G){return function(z,W){var $={key:z,value:G[z]},H={key:W,value:G[W]};return Y($,H)}}}(v.cmp),Q=[];return function Y(G){if(G&&G.toJSON&&typeof G.toJSON==="function")G=G.toJSON();if(G===void 0)return;if(typeof G=="number")return isFinite(G)?""+G:"null";if(typeof G!=="object")return JSON.stringify(G);var z,W;if(Array.isArray(G)){W="[";for(z=0;z<G.length;z++){if(z)W+=",";W+=Y(G[z])||"null"}return W+"]"}if(G===null)return"null";if(Q.indexOf(G)!==-1){if(J)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var $=Q.push(G)-1,H=Object.keys(G).sort(X&&X(G));W="";for(z=0;z<H.length;z++){var j=H[z],N=Y(G[j]);if(!N)continue;if(W)W+=",";W+=JSON.stringify(j)+":"+N}return Q.splice($,1),"{"+W+"}"}(f)}});var M8=r((JB,mJ)=>{mJ.exports=function f(v,J,X){var Q="",Y=v.schema.$async===!0,G=v.util.schemaHasRulesExcept(v.schema,v.RULES.all,"$ref"),z=v.self._getId(v.schema);if(v.opts.strictKeywords){var W=v.util.schemaUnknownRules(v.schema,v.RULES.keywords);if(W){var $="unknown keyword: "+W;if(v.opts.strictKeywords==="log")v.logger.warn($);else throw new Error($)}}if(v.isTop){if(Q+=" var validate = ",Y)v.async=!0,Q+="async ";if(Q+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",z&&(v.opts.sourceCode||v.opts.processCode))Q+=" "+("/*# sourceURL="+z+" */")+" "}if(typeof v.schema=="boolean"||!(G||v.schema.$ref)){var J="false schema",H=v.level,j=v.dataLevel,N=v.schema[J],K=v.schemaPath+v.util.getProperty(J),q=v.errSchemaPath+"/"+J,E=!v.opts.allErrors,l,M="data"+(j||""),h="valid"+H;if(v.schema===!1){if(v.isTop)E=!0;else Q+=" var "+h+" = false; ";var V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(l||"false schema")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'boolean schema is false' ";if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&E)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(v.isTop)if(Y)Q+=" return data; ";else Q+=" validate.errors = null; return true; ";else Q+=" var "+h+" = true; ";if(v.isTop)Q+=" }; return validate; ";return Q}if(v.isTop){var F=v.isTop,H=v.level=0,j=v.dataLevel=0,M="data";if(v.rootId=v.resolve.fullPath(v.self._getId(v.root.schema)),v.baseId=v.baseId||v.rootId,delete v.isTop,v.dataPathArr=[""],v.schema.default!==void 0&&v.opts.useDefaults&&v.opts.strictDefaults){var w="default is ignored in the schema root";if(v.opts.strictDefaults==="log")v.logger.warn(w);else throw new Error(w)}Q+=" var vErrors = null; ",Q+=" var errors = 0;     ",Q+=" if (rootData === undefined) rootData = data; "}else{var{level:H,dataLevel:j}=v,M="data"+(j||"");if(z)v.baseId=v.resolve.url(v.baseId,z);if(Y&&!v.async)throw new Error("async schema in sync schema");Q+=" var errs_"+H+" = errors;"}var h="valid"+H,E=!v.opts.allErrors,R="",b="",l,g=v.schema.type,m=Array.isArray(g);if(g&&v.opts.nullable&&v.schema.nullable===!0){if(m){if(g.indexOf("null")==-1)g=g.concat("null")}else if(g!="null")g=[g,"null"],m=!0}if(m&&g.length==1)g=g[0],m=!1;if(v.schema.$ref&&G){if(v.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+v.errSchemaPath+'" (see option extendRefs)');else if(v.opts.extendRefs!==!0)G=!1,v.logger.warn('$ref: keywords ignored in schema at path "'+v.errSchemaPath+'"')}if(v.schema.$comment&&v.opts.$comment)Q+=" "+v.RULES.all.$comment.code(v,"$comment");if(g){if(v.opts.coerceTypes)var I=v.util.coerceToTypes(v.opts.coerceTypes,g);var x=v.RULES.types[g];if(I||m||x===!0||x&&!gv(x)){var K=v.schemaPath+".type",q=v.errSchemaPath+"/type",K=v.schemaPath+".type",q=v.errSchemaPath+"/type",_=m?"checkDataTypes":"checkDataType";if(Q+=" if ("+v.util[_](g,M,v.opts.strictNumbers,!0)+") { ",I){var Z="dataType"+H,u="coerced"+H;if(Q+=" var "+Z+" = typeof "+M+"; var "+u+" = undefined; ",v.opts.coerceTypes=="array")Q+=" if ("+Z+" == 'object' && Array.isArray("+M+") && "+M+".length == 1) { "+M+" = "+M+"[0]; "+Z+" = typeof "+M+"; if ("+v.util.checkDataType(v.schema.type,M,v.opts.strictNumbers)+") "+u+" = "+M+"; } ";Q+=" if ("+u+" !== undefined) ; ";var jv=I;if(jv){var vv,Jv=-1,e=jv.length-1;while(Jv<e)if(vv=jv[Jv+=1],vv=="string")Q+=" else if ("+Z+" == 'number' || "+Z+" == 'boolean') "+u+" = '' + "+M+"; else if ("+M+" === null) "+u+" = ''; ";else if(vv=="number"||vv=="integer"){if(Q+=" else if ("+Z+" == 'boolean' || "+M+" === null || ("+Z+" == 'string' && "+M+" && "+M+" == +"+M+" ",vv=="integer")Q+=" && !("+M+" % 1)";Q+=")) "+u+" = +"+M+"; "}else if(vv=="boolean")Q+=" else if ("+M+" === 'false' || "+M+" === 0 || "+M+" === null) "+u+" = false; else if ("+M+" === 'true' || "+M+" === 1) "+u+" = true; ";else if(vv=="null")Q+=" else if ("+M+" === '' || "+M+" === 0 || "+M+" === false) "+u+" = null; ";else if(v.opts.coerceTypes=="array"&&vv=="array")Q+=" else if ("+Z+" == 'string' || "+Z+" == 'number' || "+Z+" == 'boolean' || "+M+" == null) "+u+" = ["+M+"]; "}Q+=" else {   ";var V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: { type: '",m)Q+=""+g.join(",");else Q+=""+g;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",m)Q+=""+g.join(",");else Q+=""+g;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&E)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } if ("+u+" !== undefined) {  ";var a=j?"data"+(j-1||""):"parentData",Av=j?v.dataPathArr[j]:"parentDataProperty";if(Q+=" "+M+" = "+u+"; ",!j)Q+="if ("+a+" !== undefined)";Q+=" "+a+"["+Av+"] = "+u+"; } "}else{var V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: { type: '",m)Q+=""+g.join(",");else Q+=""+g;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",m)Q+=""+g.join(",");else Q+=""+g;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&E)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}Q+=" } "}}if(v.schema.$ref&&!G){if(Q+=" "+v.RULES.all.$ref.code(v,"$ref")+" ",E){if(Q+=" } if (errors === ",F)Q+="0";else Q+="errs_"+H;Q+=") { ",b+="}"}}else{var Cv=v.RULES;if(Cv){var x,bv=-1,Gv=Cv.length-1;while(bv<Gv)if(x=Cv[bv+=1],gv(x)){if(x.type)Q+=" if ("+v.util.checkDataType(x.type,M,v.opts.strictNumbers)+") { ";if(v.opts.useDefaults){if(x.type=="object"&&v.schema.properties){var N=v.schema.properties,hv=Object.keys(N),Sv=hv;if(Sv){var kv,T1=-1,w1=Sv.length-1;while(T1<w1){kv=Sv[T1+=1];var Ev=N[kv];if(Ev.default!==void 0){var wv=M+v.util.getProperty(kv);if(v.compositeRule){if(v.opts.strictDefaults){var w="default is ignored for: "+wv;if(v.opts.strictDefaults==="log")v.logger.warn(w);else throw new Error(w)}}else{if(Q+=" if ("+wv+" === undefined ",v.opts.useDefaults=="empty")Q+=" || "+wv+" === null || "+wv+" === '' ";if(Q+=" ) "+wv+" = ",v.opts.useDefaults=="shared")Q+=" "+v.useDefault(Ev.default)+" ";else Q+=" "+JSON.stringify(Ev.default)+" ";Q+="; "}}}}}else if(x.type=="array"&&Array.isArray(v.schema.items)){var t1=v.schema.items;if(t1){var Ev,Jv=-1,Tv=t1.length-1;while(Jv<Tv)if(Ev=t1[Jv+=1],Ev.default!==void 0){var wv=M+"["+Jv+"]";if(v.compositeRule){if(v.opts.strictDefaults){var w="default is ignored for: "+wv;if(v.opts.strictDefaults==="log")v.logger.warn(w);else throw new Error(w)}}else{if(Q+=" if ("+wv+" === undefined ",v.opts.useDefaults=="empty")Q+=" || "+wv+" === null || "+wv+" === '' ";if(Q+=" ) "+wv+" = ",v.opts.useDefaults=="shared")Q+=" "+v.useDefault(Ev.default)+" ";else Q+=" "+JSON.stringify(Ev.default)+" ";Q+="; "}}}}}var Bv=x.rules;if(Bv){var x1,U1=-1,e1=Bv.length-1;while(U1<e1)if(x1=Bv[U1+=1],tv(x1)){var v0=x1.code(v,x1.keyword,x.type);if(v0){if(Q+=" "+v0+" ",E)R+="}"}}}if(E)Q+=" "+R+" ",R="";if(x.type){if(Q+=" } ",g&&g===x.type&&!I){Q+=" else { ";var K=v.schemaPath+".type",q=v.errSchemaPath+"/type",V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: { type: '",m)Q+=""+g.join(",");else Q+=""+g;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",m)Q+=""+g.join(",");else Q+=""+g;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&E)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } "}}if(E){if(Q+=" if (errors === ",F)Q+="0";else Q+="errs_"+H;Q+=") { ",b+="}"}}}}if(E)Q+=" "+b+" ";if(F){if(Y)Q+=" if (errors === 0) return data;           ",Q+=" else throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; ",Q+=" return errors === 0;       ";Q+=" }; return validate;"}else Q+=" var "+h+" = errors === errs_"+H+";";function gv(lv){var j1=lv.rules;for(var nv=0;nv<j1.length;nv++)if(tv(j1[nv]))return!0}function tv(lv){return v.schema[lv.keyword]!==void 0||lv.implements&&uv(lv)}function uv(lv){var j1=lv.implements;for(var nv=0;nv<j1.length;nv++)if(v.schema[j1[nv]]!==void 0)return!0}return Q}});var cJ=r((XB,aJ)=>{var YQ=JQ(),zQ=$0(),rJ=XQ(),n2=N8(),uJ=M8(),d2=zQ.ucs2length,i2=sf(),s2=rJ.Validation;aJ.exports=D8;function D8(f,v,J,X){var Q=this,Y=this._opts,G=[void 0],z={},W=[],$={},H=[],j={},N=[];v=v||{schema:f,refVal:G,refs:z};var K=o2.call(this,f,v,X),q=this._compilations[K.index];if(K.compiling)return q.callValidate=w;var M=this._formats,V=this.RULES;try{var L=h(f,v,J,X);q.validate=L;var F=q.callValidate;if(F){if(F.schema=L.schema,F.errors=null,F.refs=L.refs,F.refVal=L.refVal,F.root=L.root,F.$async=L.$async,Y.sourceCode)F.source=L.source}return L}finally{t2.call(this,f,v,X)}function w(){var _=q.validate,Z=_.apply(this,arguments);return w.errors=_.errors,Z}function h(_,Z,u,jv){var vv=!Z||Z&&Z.schema==_;if(Z.schema!=v.schema)return D8.call(Q,_,Z,u,jv);var Jv=_.$async===!0,e=uJ({isTop:!0,schema:_,isRoot:vv,baseId:jv,root:Z,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:rJ.MissingRef,RULES:V,validate:uJ,util:zQ,resolve:YQ,resolveRef:E,usePattern:m,useDefault:I,useCustomRule:x,opts:Y,formats:M,logger:Q.logger,self:Q});if(e=GQ(G,f3)+GQ(W,e2)+GQ(H,v3)+GQ(N,Q3)+e,Y.processCode)e=Y.processCode(e,_);var a;try{var Av=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",e);a=Av(Q,V,M,v,G,H,N,i2,d2,s2),G[0]=a}catch(Cv){throw Q.logger.error("Error compiling schema, function code:",e),Cv}if(a.schema=_,a.errors=null,a.refs=z,a.refVal=G,a.root=vv?a:Z,Jv)a.$async=!0;if(Y.sourceCode===!0)a.source={code:e,patterns:W,defaults:H};return a}function E(_,Z,u){Z=YQ.url(_,Z);var jv=z[Z],vv,Jv;if(jv!==void 0)return vv=G[jv],Jv="refVal["+jv+"]",g(vv,Jv);if(!u&&v.refs){var e=v.refs[Z];if(e!==void 0)return vv=v.refVal[e],Jv=R(Z,vv),g(vv,Jv)}Jv=R(Z);var a=YQ.call(Q,h,v,Z);if(a===void 0){var Av=J&&J[Z];if(Av)a=YQ.inlineRef(Av,Y.inlineRefs)?Av:D8.call(Q,Av,v,J,_)}if(a===void 0)b(Z);else return l(Z,a),g(a,Jv)}function R(_,Z){var u=G.length;return G[u]=Z,z[_]=u,"refVal"+u}function b(_){delete z[_]}function l(_,Z){var u=z[_];G[u]=Z}function g(_,Z){return typeof _=="object"||typeof _=="boolean"?{code:Z,schema:_,inline:!0}:{code:Z,$async:_&&!!_.$async}}function m(_){var Z=$[_];if(Z===void 0)Z=$[_]=W.length,W[Z]=_;return"pattern"+Z}function I(_){switch(typeof _){case"boolean":case"number":return""+_;case"string":return zQ.toQuotedString(_);case"object":if(_===null)return"null";var Z=n2(_),u=j[Z];if(u===void 0)u=j[Z]=H.length,H[u]=_;return"default"+u}}function x(_,Z,u,jv){if(Q._opts.validateSchema!==!1){var vv=_.definition.dependencies;if(vv&&!vv.every(function(Sv){return Object.prototype.hasOwnProperty.call(u,Sv)}))throw new Error("parent schema must have all required keywords: "+vv.join(","));var Jv=_.definition.validateSchema;if(Jv){var e=Jv(Z);if(!e){var a="keyword schema is invalid: "+Q.errorsText(Jv.errors);if(Q._opts.validateSchema=="log")Q.logger.error(a);else throw new Error(a)}}}var Av=_.definition.compile,Cv=_.definition.inline,bv=_.definition.macro,Gv;if(Av)Gv=Av.call(Q,Z,u,jv);else if(bv){if(Gv=bv.call(Q,Z,u,jv),Y.validateSchema!==!1)Q.validateSchema(Gv,!0)}else if(Cv)Gv=Cv.call(Q,jv,_.keyword,Z,u);else if(Gv=_.definition.validate,!Gv)return;if(Gv===void 0)throw new Error('custom keyword "'+_.keyword+'"failed to compile');var hv=N.length;return N[hv]=Gv,{code:"customRule"+hv,validate:Gv}}}function o2(f,v,J){var X=pJ.call(this,f,v,J);if(X>=0)return{index:X,compiling:!0};return X=this._compilations.length,this._compilations[X]={schema:f,root:v,baseId:J},{index:X,compiling:!1}}function t2(f,v,J){var X=pJ.call(this,f,v,J);if(X>=0)this._compilations.splice(X,1)}function pJ(f,v,J){for(var X=0;X<this._compilations.length;X++){var Q=this._compilations[X];if(Q.schema==f&&Q.root==v&&Q.baseId==J)return X}return-1}function e2(f,v){return"var pattern"+f+" = new RegExp("+zQ.toQuotedString(v[f])+");"}function v3(f){return"var default"+f+" = defaults["+f+"];"}function f3(f,v){return v[f]===void 0?"":"var refVal"+f+" = refVal["+f+"];"}function Q3(f){return"var customRule"+f+" = customRules["+f+"];"}function GQ(f,v){if(!f.length)return"";var J="";for(var X=0;X<f.length;X++)J+=v(X,f);return J}});var dJ=r((YB,nJ)=>{var WQ=nJ.exports=function f(){this._cache={}};WQ.prototype.put=function f(v,J){this._cache[v]=J};WQ.prototype.get=function f(v){return this._cache[v]};WQ.prototype.del=function f(v){delete this._cache[v]};WQ.prototype.clear=function f(){this._cache={}}});var G6=r((GB,Y6)=>{var J3=$0(),X3=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Y3=[0,31,28,31,30,31,30,31,31,30,31,30,31],G3=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,iJ=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,z3=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,W3=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,sJ=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,oJ=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,tJ=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,eJ=/^(?:\/(?:[^~/]|~0|~1)*)*$/,v6=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f6=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Y6.exports=BQ;function BQ(f){return f=f=="full"?"full":"fast",J3.copy(BQ[f])}BQ.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":sJ,url:oJ,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:iJ,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:X6,uuid:tJ,"json-pointer":eJ,"json-pointer-uri-fragment":v6,"relative-json-pointer":f6};BQ.full={date:Q6,time:J6,"date-time":K3,uri:H3,"uri-reference":W3,"uri-template":sJ,url:oJ,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:iJ,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:X6,uuid:tJ,"json-pointer":eJ,"json-pointer-uri-fragment":v6,"relative-json-pointer":f6};function B3(f){return f%4===0&&(f%100!==0||f%400===0)}function Q6(f){var v=f.match(X3);if(!v)return!1;var J=+v[1],X=+v[2],Q=+v[3];return X>=1&&X<=12&&Q>=1&&Q<=(X==2&&B3(J)?29:Y3[X])}function J6(f,v){var J=f.match(G3);if(!J)return!1;var X=J[1],Q=J[2],Y=J[3],G=J[5];return(X<=23&&Q<=59&&Y<=59||X==23&&Q==59&&Y==60)&&(!v||G)}var $3=/t|\s/i;function K3(f){var v=f.split($3);return v.length==2&&Q6(v[0])&&J6(v[1],!0)}var j3=/\/|:/;function H3(f){return j3.test(f)&&z3.test(f)}var q3=/[^\\]\\Z/;function X6(f){if(q3.test(f))return!1;try{return new RegExp(f),!0}catch(v){return!1}}});var W6=r((zB,z6)=>{z6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.errSchemaPath+"/"+J,$=!v.opts.allErrors,H="data"+(G||""),j="valid"+Y,N,K;if(z=="#"||z=="#/")if(v.isRoot)N=v.async,K="validate";else N=v.root.schema.$async===!0,K="root.refVal[0]";else{var q=v.resolveRef(v.baseId,z,v.isRoot);if(q===void 0){var M=v.MissingRefError.message(v.baseId,z);if(v.opts.missingRefs=="fail"){v.logger.error(M);var V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(W)+" , params: { ref: '"+v.util.escapeQuotes(z)+"' } ",v.opts.messages!==!1)Q+=" , message: 'can\\'t resolve reference "+v.util.escapeQuotes(z)+"' ";if(v.opts.verbose)Q+=" , schema: "+v.util.toQuotedString(z)+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&$)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if($)Q+=" if (false) { "}else if(v.opts.missingRefs=="ignore"){if(v.logger.warn(M),$)Q+=" if (true) { "}else throw new v.MissingRefError(v.baseId,z,M)}else if(q.inline){var F=v.util.copy(v);F.level++;var w="valid"+F.level;F.schema=q.schema,F.schemaPath="",F.errSchemaPath=z;var h=v.validate(F).replace(/validate\.schema/g,q.code);if(Q+=" "+h+" ",$)Q+=" if ("+w+") { "}else N=q.$async===!0||v.async&&q.$async!==!1,K=q.code}if(K){var V=V||[];if(V.push(Q),Q="",v.opts.passContext)Q+=" "+K+".call(this, ";else Q+=" "+K+"( ";if(Q+=" "+H+", (dataPath || '')",v.errorPath!='""')Q+=" + "+v.errorPath;var E=G?"data"+(G-1||""):"parentData",R=G?v.dataPathArr[G]:"parentDataProperty";Q+=" , "+E+" , "+R+", rootData)  ";var b=Q;if(Q=V.pop(),N){if(!v.async)throw new Error("async schema referenced by sync schema");if($)Q+=" var "+j+"; ";if(Q+=" try { await "+b+"; ",$)Q+=" "+j+" = true; ";if(Q+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",$)Q+=" "+j+" = false; ";if(Q+=" } ",$)Q+=" if ("+j+") { "}else if(Q+=" if (!"+b+") { if (vErrors === null) vErrors = "+K+".errors; else vErrors = vErrors.concat("+K+".errors); errors = vErrors.length; } ",$)Q+=" else { "}return Q}});var $6=r((WB,B6)=>{B6.exports=function f(v,J,X){var Q=" ",Y=v.schema[J],G=v.schemaPath+v.util.getProperty(J),z=v.errSchemaPath+"/"+J,W=!v.opts.allErrors,$=v.util.copy(v),H="";$.level++;var j="valid"+$.level,N=$.baseId,K=!0,q=Y;if(q){var M,V=-1,L=q.length-1;while(V<L)if(M=q[V+=1],v.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:v.util.schemaHasRules(M,v.RULES.all)){if(K=!1,$.schema=M,$.schemaPath=G+"["+V+"]",$.errSchemaPath=z+"/"+V,Q+="  "+v.validate($)+" ",$.baseId=N,W)Q+=" if ("+j+") { ",H+="}"}}if(W)if(K)Q+=" if (true) { ";else Q+=" "+H.slice(0,-1)+" ";return Q}});var j6=r((BB,K6)=>{K6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K="errs__"+Y,q=v.util.copy(v),M="";q.level++;var V="valid"+q.level,L=z.every(function(l){return v.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:v.util.schemaHasRules(l,v.RULES.all)});if(L){var F=q.baseId;Q+=" var "+K+" = errors; var "+N+" = false;  ";var w=v.compositeRule;v.compositeRule=q.compositeRule=!0;var h=z;if(h){var E,R=-1,b=h.length-1;while(R<b)E=h[R+=1],q.schema=E,q.schemaPath=W+"["+R+"]",q.errSchemaPath=$+"/"+R,Q+="  "+v.validate(q)+" ",q.baseId=F,Q+=" "+N+" = "+N+" || "+V+"; if (!"+N+") { ",M+="}"}if(v.compositeRule=q.compositeRule=w,Q+=" "+M+" if (!"+N+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should match some schema in anyOf' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+=" } else {  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; } ",v.opts.allErrors)Q+=" } "}else if(H)Q+=" if (true) { ";return Q}});var q6=r(($B,H6)=>{H6.exports=function f(v,J,X){var Q=" ",Y=v.schema[J],G=v.errSchemaPath+"/"+J,z=!v.opts.allErrors,W=v.util.toQuotedString(Y);if(v.opts.$comment===!0)Q+=" console.log("+W+");";else if(typeof v.opts.$comment=="function")Q+=" self._opts.$comment("+W+", "+v.util.toQuotedString(G)+", validate.root.schema);";return Q}});var V6=r((KB,P6)=>{P6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K=v.opts.$data&&z&&z.$data,q;if(K)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",q="schema"+Y;else q=z;if(!K)Q+=" var schema"+Y+" = validate.schema"+W+";";Q+="var "+N+" = equal("+j+", schema"+Y+"); if (!"+N+") {   ";var M=M||[];if(M.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'const' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { allowedValue: schema"+Y+" } ",v.opts.messages!==!1)Q+=" , message: 'should be equal to constant' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var V=Q;if(Q=M.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+V+"]); ";else Q+=" validate.errors = ["+V+"]; return false; ";else Q+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" }",H)Q+=" else { ";return Q}});var M6=r((jB,N6)=>{N6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K="errs__"+Y,q=v.util.copy(v),M="";q.level++;var V="valid"+q.level,L="i"+Y,F=q.dataLevel=v.dataLevel+1,w="data"+F,h=v.baseId,E=v.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:v.util.schemaHasRules(z,v.RULES.all);if(Q+="var "+K+" = errors;var "+N+";",E){var R=v.compositeRule;v.compositeRule=q.compositeRule=!0,q.schema=z,q.schemaPath=W,q.errSchemaPath=$,Q+=" var "+V+" = false; for (var "+L+" = 0; "+L+" < "+j+".length; "+L+"++) { ",q.errorPath=v.util.getPathExpr(v.errorPath,L,v.opts.jsonPointers,!0);var b=j+"["+L+"]";q.dataPathArr[F]=L;var l=v.validate(q);if(q.baseId=h,v.util.varOccurences(l,w)<2)Q+=" "+v.util.varReplace(l,w,b)+" ";else Q+=" var "+w+" = "+b+"; "+l+" ";Q+=" if ("+V+") break; }  ",v.compositeRule=q.compositeRule=R,Q+=" "+M+" if (!"+V+") {"}else Q+=" if ("+j+".length == 0) {";var g=g||[];if(g.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should contain a valid item' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var m=Q;if(Q=g.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+m+"]); ";else Q+=" validate.errors = ["+m+"]; return false; ";else Q+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else { ",E)Q+="  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; } ";if(v.opts.allErrors)Q+=" } ";return Q}});var O6=r((HB,D6)=>{D6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="errs__"+Y,K=v.util.copy(v),q="";K.level++;var M="valid"+K.level,V={},L={},F=v.opts.ownProperties;for(R in z){if(R=="__proto__")continue;var w=z[R],h=Array.isArray(w)?L:V;h[R]=w}Q+="var "+N+" = errors;";var E=v.errorPath;Q+="var missing"+Y+";";for(var R in L)if(h=L[R],h.length){if(Q+=" if ( "+j+v.util.getProperty(R)+" !== undefined ",F)Q+=" && Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(R)+"') ";if(H){Q+=" && ( ";var b=h;if(b){var l,g=-1,m=b.length-1;while(g<m){if(l=b[g+=1],g)Q+=" || ";var I=v.util.getProperty(l),x=j+I;if(Q+=" ( ( "+x+" === undefined ",F)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(l)+"') ";Q+=") && (missing"+Y+" = "+v.util.toQuotedString(v.opts.jsonPointers?l:I)+") ) "}}Q+=")) {  ";var _="missing"+Y,Z="' + "+_+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(E,_,!0):E+" + "+_;var u=u||[];if(u.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { property: '"+v.util.escapeQuotes(R)+"', missingProperty: '"+Z+"', depsCount: "+h.length+", deps: '"+v.util.escapeQuotes(h.length==1?h[0]:h.join(", "))+"' } ",v.opts.messages!==!1){if(Q+=" , message: 'should have ",h.length==1)Q+="property "+v.util.escapeQuotes(h[0]);else Q+="properties "+v.util.escapeQuotes(h.join(", "));Q+=" when property "+v.util.escapeQuotes(R)+" is present' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var jv=Q;if(Q=u.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+jv+"]); ";else Q+=" validate.errors = ["+jv+"]; return false; ";else Q+=" var err = "+jv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{Q+=" ) { ";var vv=h;if(vv){var l,Jv=-1,e=vv.length-1;while(Jv<e){l=vv[Jv+=1];var I=v.util.getProperty(l),Z=v.util.escapeQuotes(l),x=j+I;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(E,l,v.opts.jsonPointers);if(Q+=" if ( "+x+" === undefined ",F)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(l)+"') ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { property: '"+v.util.escapeQuotes(R)+"', missingProperty: '"+Z+"', depsCount: "+h.length+", deps: '"+v.util.escapeQuotes(h.length==1?h[0]:h.join(", "))+"' } ",v.opts.messages!==!1){if(Q+=" , message: 'should have ",h.length==1)Q+="property "+v.util.escapeQuotes(h[0]);else Q+="properties "+v.util.escapeQuotes(h.join(", "));Q+=" when property "+v.util.escapeQuotes(R)+" is present' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(Q+=" }   ",H)q+="}",Q+=" else { "}v.errorPath=E;var a=K.baseId;for(var R in V){var w=V[R];if(v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){if(Q+=" "+M+" = true; if ( "+j+v.util.getProperty(R)+" !== undefined ",F)Q+=" && Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(R)+"') ";if(Q+=") { ",K.schema=w,K.schemaPath=W+v.util.getProperty(R),K.errSchemaPath=$+"/"+v.util.escapeFragment(R),Q+="  "+v.validate(K)+" ",K.baseId=a,Q+=" }  ",H)Q+=" if ("+M+") { ",q+="}"}}if(H)Q+="   "+q+" if ("+N+" == errors) {";return Q}});var A6=r((qB,L6)=>{L6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K=v.opts.$data&&z&&z.$data,q;if(K)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",q="schema"+Y;else q=z;var M="i"+Y,V="schema"+Y;if(!K)Q+=" var "+V+" = validate.schema"+W+";";if(Q+="var "+N+";",K)Q+=" if (schema"+Y+" === undefined) "+N+" = true; else if (!Array.isArray(schema"+Y+")) "+N+" = false; else {";if(Q+=""+N+" = false;for (var "+M+"=0; "+M+"<"+V+".length; "+M+"++) if (equal("+j+", "+V+"["+M+"])) { "+N+" = true; break; }",K)Q+="  }  ";Q+=" if (!"+N+") {   ";var L=L||[];if(L.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { allowedValues: schema"+Y+" } ",v.opts.messages!==!1)Q+=" , message: 'should be equal to one of the allowed values' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var F=Q;if(Q=L.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+F+"]); ";else Q+=" validate.errors = ["+F+"]; return false; ";else Q+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" }",H)Q+=" else { ";return Q}});var U6=r((PB,w6)=>{w6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||"");if(v.opts.format===!1){if(H)Q+=" if (true) { ";return Q}var N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;var q=v.opts.unknownFormats,M=Array.isArray(q);if(N){var V="format"+Y,L="isObject"+Y,F="formatType"+Y;if(Q+=" var "+V+" = formats["+K+"]; var "+L+" = typeof "+V+" == 'object' && !("+V+" instanceof RegExp) && "+V+".validate; var "+F+" = "+L+" && "+V+".type || 'string'; if ("+L+") { ",v.async)Q+=" var async"+Y+" = "+V+".async; ";if(Q+=" "+V+" = "+V+".validate; } if (  ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'string') || ";if(Q+=" (",q!="ignore"){if(Q+=" ("+K+" && !"+V+" ",M)Q+=" && self._opts.unknownFormats.indexOf("+K+") == -1 ";Q+=") || "}if(Q+=" ("+V+" && "+F+" == '"+X+"' && !(typeof "+V+" == 'function' ? ",v.async)Q+=" (async"+Y+" ? await "+V+"("+j+") : "+V+"("+j+")) ";else Q+=" "+V+"("+j+") ";Q+=" : "+V+".test("+j+"))))) {"}else{var V=v.formats[z];if(!V)if(q=="ignore"){if(v.logger.warn('unknown format "'+z+'" ignored in schema at path "'+v.errSchemaPath+'"'),H)Q+=" if (true) { ";return Q}else if(M&&q.indexOf(z)>=0){if(H)Q+=" if (true) { ";return Q}else throw new Error('unknown format "'+z+'" is used in schema at path "'+v.errSchemaPath+'"');var L=typeof V=="object"&&!(V instanceof RegExp)&&V.validate,F=L&&V.type||"string";if(L){var w=V.async===!0;V=V.validate}if(F!=X){if(H)Q+=" if (true) { ";return Q}if(w){if(!v.async)throw new Error("async format in sync schema");var h="formats"+v.util.getProperty(z)+".validate";Q+=" if (!(await "+h+"("+j+"))) { "}else{Q+=" if (! ";var h="formats"+v.util.getProperty(z);if(L)h+=".validate";if(typeof V=="function")Q+=" "+h+"("+j+") ";else Q+=" "+h+".test("+j+") ";Q+=") { "}}var E=E||[];if(E.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'format' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { format:  ",N)Q+=""+K;else Q+=""+v.util.toQuotedString(z);if(Q+="  } ",v.opts.messages!==!1){if(Q+=` , message: 'should match format "`,N)Q+="' + "+K+" + '";else Q+=""+v.util.escapeQuotes(z);Q+=`"' `}if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+v.util.toQuotedString(z);Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var R=Q;if(Q=E.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+R+"]); ";else Q+=" validate.errors = ["+R+"]; return false; ";else Q+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",H)Q+=" else { ";return Q}});var h6=r((VB,F6)=>{F6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K="errs__"+Y,q=v.util.copy(v);q.level++;var M="valid"+q.level,V=v.schema.then,L=v.schema.else,F=V!==void 0&&(v.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:v.util.schemaHasRules(V,v.RULES.all)),w=L!==void 0&&(v.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:v.util.schemaHasRules(L,v.RULES.all)),h=q.baseId;if(F||w){var E;q.createErrors=!1,q.schema=z,q.schemaPath=W,q.errSchemaPath=$,Q+=" var "+K+" = errors; var "+N+" = true;  ";var R=v.compositeRule;if(v.compositeRule=q.compositeRule=!0,Q+="  "+v.validate(q)+" ",q.baseId=h,q.createErrors=!0,Q+="  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; }  ",v.compositeRule=q.compositeRule=R,F){if(Q+=" if ("+M+") {  ",q.schema=v.schema.then,q.schemaPath=v.schemaPath+".then",q.errSchemaPath=v.errSchemaPath+"/then",Q+="  "+v.validate(q)+" ",q.baseId=h,Q+=" "+N+" = "+M+"; ",F&&w)E="ifClause"+Y,Q+=" var "+E+" = 'then'; ";else E="'then'";if(Q+=" } ",w)Q+=" else { "}else Q+=" if (!"+M+") { ";if(w){if(q.schema=v.schema.else,q.schemaPath=v.schemaPath+".else",q.errSchemaPath=v.errSchemaPath+"/else",Q+="  "+v.validate(q)+" ",q.baseId=h,Q+=" "+N+" = "+M+"; ",F&&w)E="ifClause"+Y,Q+=" var "+E+" = 'else'; ";else E="'else'";Q+=" } "}if(Q+=" if (!"+N+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'if' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { failingKeyword: "+E+" } ",v.opts.messages!==!1)Q+=` , message: 'should match "' + `+E+` + '" schema' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+=" }   ",H)Q+=" else { "}else if(H)Q+=" if (true) { ";return Q}});var _6=r((NB,E6)=>{E6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K="errs__"+Y,q=v.util.copy(v),M="";q.level++;var V="valid"+q.level,L="i"+Y,F=q.dataLevel=v.dataLevel+1,w="data"+F,h=v.baseId;if(Q+="var "+K+" = errors;var "+N+";",Array.isArray(z)){var E=v.schema.additionalItems;if(E===!1){Q+=" "+N+" = "+j+".length <= "+z.length+"; ";var R=$;$=v.errSchemaPath+"/additionalItems",Q+="  if (!"+N+") {   ";var b=b||[];if(b.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { limit: "+z.length+" } ",v.opts.messages!==!1)Q+=" , message: 'should NOT have more than "+z.length+" items' ";if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var l=Q;if(Q=b.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+l+"]); ";else Q+=" validate.errors = ["+l+"]; return false; ";else Q+=" var err = "+l+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",$=R,H)M+="}",Q+=" else { "}var g=z;if(g){var m,I=-1,x=g.length-1;while(I<x)if(m=g[I+=1],v.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:v.util.schemaHasRules(m,v.RULES.all)){Q+=" "+V+" = true; if ("+j+".length > "+I+") { ";var _=j+"["+I+"]";q.schema=m,q.schemaPath=W+"["+I+"]",q.errSchemaPath=$+"/"+I,q.errorPath=v.util.getPathExpr(v.errorPath,I,v.opts.jsonPointers,!0),q.dataPathArr[F]=I;var Z=v.validate(q);if(q.baseId=h,v.util.varOccurences(Z,w)<2)Q+=" "+v.util.varReplace(Z,w,_)+" ";else Q+=" var "+w+" = "+_+"; "+Z+" ";if(Q+=" }  ",H)Q+=" if ("+V+") { ",M+="}"}}if(typeof E=="object"&&(v.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:v.util.schemaHasRules(E,v.RULES.all))){q.schema=E,q.schemaPath=v.schemaPath+".additionalItems",q.errSchemaPath=v.errSchemaPath+"/additionalItems",Q+=" "+V+" = true; if ("+j+".length > "+z.length+") {  for (var "+L+" = "+z.length+"; "+L+" < "+j+".length; "+L+"++) { ",q.errorPath=v.util.getPathExpr(v.errorPath,L,v.opts.jsonPointers,!0);var _=j+"["+L+"]";q.dataPathArr[F]=L;var Z=v.validate(q);if(q.baseId=h,v.util.varOccurences(Z,w)<2)Q+=" "+v.util.varReplace(Z,w,_)+" ";else Q+=" var "+w+" = "+_+"; "+Z+" ";if(H)Q+=" if (!"+V+") break; ";if(Q+=" } }  ",H)Q+=" if ("+V+") { ",M+="}"}}else if(v.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:v.util.schemaHasRules(z,v.RULES.all)){q.schema=z,q.schemaPath=W,q.errSchemaPath=$,Q+="  for (var "+L+" = 0; "+L+" < "+j+".length; "+L+"++) { ",q.errorPath=v.util.getPathExpr(v.errorPath,L,v.opts.jsonPointers,!0);var _=j+"["+L+"]";q.dataPathArr[F]=L;var Z=v.validate(q);if(q.baseId=h,v.util.varOccurences(Z,w)<2)Q+=" "+v.util.varReplace(Z,w,_)+" ";else Q+=" var "+w+" = "+_+"; "+Z+" ";if(H)Q+=" if (!"+V+") break; ";Q+=" }"}if(H)Q+=" "+M+" if ("+K+" == errors) {";return Q}});var O8=r((MB,R6)=>{R6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,h,j="data"+(G||""),N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;var q=J=="maximum",M=q?"exclusiveMaximum":"exclusiveMinimum",V=v.schema[M],L=v.opts.$data&&V&&V.$data,F=q?"<":">",w=q?">":"<",h=void 0;if(!(N||typeof z=="number"||z===void 0))throw new Error(J+" must be number");if(!(L||V===void 0||typeof V=="number"||typeof V=="boolean"))throw new Error(M+" must be number or boolean");if(L){var E=v.util.getData(V.$data,G,v.dataPathArr),R="exclusive"+Y,b="exclType"+Y,l="exclIsNumber"+Y,g="op"+Y,m="' + "+g+" + '";Q+=" var schemaExcl"+Y+" = "+E+"; ",E="schemaExcl"+Y,Q+=" var "+R+"; var "+b+" = typeof "+E+"; if ("+b+" != 'boolean' && "+b+" != 'undefined' && "+b+" != 'number') { ";var h=M,I=I||[];if(I.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(h||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: '"+M+" should be boolean' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var x=Q;if(Q=I.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+x+"]); ";else Q+=" validate.errors = ["+x+"]; return false; ";else Q+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";if(Q+=" "+b+" == 'number' ? ( ("+R+" = "+K+" === undefined || "+E+" "+F+"= "+K+") ? "+j+" "+w+"= "+E+" : "+j+" "+w+" "+K+" ) : ( ("+R+" = "+E+" === true) ? "+j+" "+w+"= "+K+" : "+j+" "+w+" "+K+" ) || "+j+" !== "+j+") { var op"+Y+" = "+R+" ? '"+F+"' : '"+F+"='; ",z===void 0)h=M,$=v.errSchemaPath+"/"+M,K=E,N=L}else{var l=typeof V=="number",m=F;if(l&&N){var g="'"+m+"'";if(Q+=" if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" ( "+K+" === undefined || "+V+" "+F+"= "+K+" ? "+j+" "+w+"= "+V+" : "+j+" "+w+" "+K+" ) || "+j+" !== "+j+") { "}else{if(l&&z===void 0)R=!0,h=M,$=v.errSchemaPath+"/"+M,K=V,w+="=";else{if(l)K=Math[q?"min":"max"](V,z);if(V===(l?K:!0))R=!0,h=M,$=v.errSchemaPath+"/"+M,w+="=";else R=!1,m+="="}var g="'"+m+"'";if(Q+=" if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" "+j+" "+w+" "+K+" || "+j+" !== "+j+") { "}}h=h||J;var I=I||[];if(I.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(h||"_limit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { comparison: "+g+", limit: "+K+", exclusive: "+R+" } ",v.opts.messages!==!1)if(Q+=" , message: 'should be "+m+" ",N)Q+="' + "+K;else Q+=""+K+"'";if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+z;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var x=Q;if(Q=I.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+x+"]); ";else Q+=" validate.errors = ["+x+"]; return false; ";else Q+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",H)Q+=" else { ";return Q}});var L8=r((DB,S6)=>{S6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,M,j="data"+(G||""),N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;if(!(N||typeof z=="number"))throw new Error(J+" must be number");var q=J=="maxItems"?">":"<";if(Q+="if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" "+j+".length "+q+" "+K+") { ";var M=J,V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitItems")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { limit: "+K+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT have ",J=="maxItems")Q+="more";else Q+="fewer";if(Q+=" than ",N)Q+="' + "+K+" + '";else Q+=""+z;Q+=" items' "}if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+z;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",H)Q+=" else { ";return Q}});var A8=r((OB,y6)=>{y6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,M,j="data"+(G||""),N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;if(!(N||typeof z=="number"))throw new Error(J+" must be number");var q=J=="maxLength"?">":"<";if(Q+="if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";if(v.opts.unicode===!1)Q+=" "+j+".length ";else Q+=" ucs2length("+j+") ";Q+=" "+q+" "+K+") { ";var M=J,V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitLength")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { limit: "+K+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT be ",J=="maxLength")Q+="longer";else Q+="shorter";if(Q+=" than ",N)Q+="' + "+K+" + '";else Q+=""+z;Q+=" characters' "}if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+z;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",H)Q+=" else { ";return Q}});var w8=r((LB,I6)=>{I6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,M,j="data"+(G||""),N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;if(!(N||typeof z=="number"))throw new Error(J+" must be number");var q=J=="maxProperties"?">":"<";if(Q+="if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" Object.keys("+j+").length "+q+" "+K+") { ";var M=J,V=V||[];if(V.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitProperties")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { limit: "+K+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT have ",J=="maxProperties")Q+="more";else Q+="fewer";if(Q+=" than ",N)Q+="' + "+K+" + '";else Q+=""+z;Q+=" properties' "}if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+z;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var L=Q;if(Q=V.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",H)Q+=" else { ";return Q}});var Z6=r((AB,g6)=>{g6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;if(!(N||typeof z=="number"))throw new Error(J+" must be number");if(Q+="var division"+Y+";if (",N)Q+=" "+K+" !== undefined && ( typeof "+K+" != 'number' || ";if(Q+=" (division"+Y+" = "+j+" / "+K+", ",v.opts.multipleOfPrecision)Q+=" Math.abs(Math.round(division"+Y+") - division"+Y+") > 1e-"+v.opts.multipleOfPrecision+" ";else Q+=" division"+Y+" !== parseInt(division"+Y+") ";if(Q+=" ) ",N)Q+="  )  ";Q+=" ) {   ";var q=q||[];if(q.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { multipleOf: "+K+" } ",v.opts.messages!==!1)if(Q+=" , message: 'should be multiple of ",N)Q+="' + "+K;else Q+=""+K+"'";if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+z;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var M=Q;if(Q=q.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+M+"]); ";else Q+=" validate.errors = ["+M+"]; return false; ";else Q+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",H)Q+=" else { ";return Q}});var T6=r((wB,C6)=>{C6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="errs__"+Y,K=v.util.copy(v);K.level++;var q="valid"+K.level;if(v.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:v.util.schemaHasRules(z,v.RULES.all)){K.schema=z,K.schemaPath=W,K.errSchemaPath=$,Q+=" var "+N+" = errors;  ";var M=v.compositeRule;v.compositeRule=K.compositeRule=!0,K.createErrors=!1;var V;if(K.opts.allErrors)V=K.opts.allErrors,K.opts.allErrors=!1;if(Q+=" "+v.validate(K)+" ",K.createErrors=!0,V)K.opts.allErrors=V;v.compositeRule=K.compositeRule=M,Q+=" if ("+q+") {   ";var L=L||[];if(L.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should NOT be valid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var F=Q;if(Q=L.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+F+"]); ";else Q+=" validate.errors = ["+F+"]; return false; ";else Q+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else {  errors = "+N+"; if (vErrors !== null) { if ("+N+") vErrors.length = "+N+"; else vErrors = null; } ",v.opts.allErrors)Q+=" } "}else{if(Q+="  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should NOT be valid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",H)Q+=" if (false) { "}return Q}});var b6=r((UB,x6)=>{x6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K="errs__"+Y,q=v.util.copy(v),M="";q.level++;var V="valid"+q.level,L=q.baseId,F="prevValid"+Y,w="passingSchemas"+Y;Q+="var "+K+" = errors , "+F+" = false , "+N+" = false , "+w+" = null; ";var h=v.compositeRule;v.compositeRule=q.compositeRule=!0;var E=z;if(E){var R,b=-1,l=E.length-1;while(b<l){if(R=E[b+=1],v.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:v.util.schemaHasRules(R,v.RULES.all))q.schema=R,q.schemaPath=W+"["+b+"]",q.errSchemaPath=$+"/"+b,Q+="  "+v.validate(q)+" ",q.baseId=L;else Q+=" var "+V+" = true; ";if(b)Q+=" if ("+V+" && "+F+") { "+N+" = false; "+w+" = ["+w+", "+b+"]; } else { ",M+="}";Q+=" if ("+V+") { "+N+" = "+F+" = true; "+w+" = "+b+"; }"}}if(v.compositeRule=q.compositeRule=h,Q+=""+M+"if (!"+N+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { passingSchemas: "+w+" } ",v.opts.messages!==!1)Q+=" , message: 'should match exactly one schema in oneOf' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+="} else {  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; }",v.opts.allErrors)Q+=" } ";return Q}});var l6=r((FB,k6)=>{k6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N=v.opts.$data&&z&&z.$data,K;if(N)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",K="schema"+Y;else K=z;var q=N?"(new RegExp("+K+"))":v.usePattern(z);if(Q+="if ( ",N)Q+=" ("+K+" !== undefined && typeof "+K+" != 'string') || ";Q+=" !"+q+".test("+j+") ) {   ";var M=M||[];if(M.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { pattern:  ",N)Q+=""+K;else Q+=""+v.util.toQuotedString(z);if(Q+="  } ",v.opts.messages!==!1){if(Q+=` , message: 'should match pattern "`,N)Q+="' + "+K+" + '";else Q+=""+v.util.escapeQuotes(z);Q+=`"' `}if(v.opts.verbose){if(Q+=" , schema:  ",N)Q+="validate.schema"+W;else Q+=""+v.util.toQuotedString(z);Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var V=Q;if(Q=M.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+V+"]); ";else Q+=" validate.errors = ["+V+"]; return false; ";else Q+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",H)Q+=" else { ";return Q}});var u6=r((hB,m6)=>{m6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="errs__"+Y,K=v.util.copy(v),q="";K.level++;var M="valid"+K.level,V="key"+Y,L="idx"+Y,F=K.dataLevel=v.dataLevel+1,w="data"+F,h="dataProperties"+Y,E=Object.keys(z||{}).filter(Jv),R=v.schema.patternProperties||{},b=Object.keys(R).filter(Jv),l=v.schema.additionalProperties,g=E.length||b.length,m=l===!1,I=typeof l=="object"&&Object.keys(l).length,x=v.opts.removeAdditional,_=m||I||x,Z=v.opts.ownProperties,u=v.baseId,jv=v.schema.required;if(jv&&!(v.opts.$data&&jv.$data)&&jv.length<v.opts.loopRequired)var vv=v.util.toHash(jv);function Jv(X1){return X1!=="__proto__"}if(Q+="var "+N+" = errors;var "+M+" = true;",Z)Q+=" var "+h+" = undefined;";if(_){if(Z)Q+=" "+h+" = "+h+" || Object.keys("+j+"); for (var "+L+"=0; "+L+"<"+h+".length; "+L+"++) { var "+V+" = "+h+"["+L+"]; ";else Q+=" for (var "+V+" in "+j+") { ";if(g){if(Q+=" var isAdditional"+Y+" = !(false ",E.length)if(E.length>8)Q+=" || validate.schema"+W+".hasOwnProperty("+V+") ";else{var e=E;if(e){var a,Av=-1,Cv=e.length-1;while(Av<Cv)a=e[Av+=1],Q+=" || "+V+" == "+v.util.toQuotedString(a)+" "}}if(b.length){var bv=b;if(bv){var Gv,hv=-1,Sv=bv.length-1;while(hv<Sv)Gv=bv[hv+=1],Q+=" || "+v.usePattern(Gv)+".test("+V+") "}}Q+=" ); if (isAdditional"+Y+") { "}if(x=="all")Q+=" delete "+j+"["+V+"]; ";else{var kv=v.errorPath,T1="' + "+V+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers);if(m)if(x)Q+=" delete "+j+"["+V+"]; ";else{Q+=" "+M+" = false; ";var w1=$;$=v.errSchemaPath+"/additionalProperties";var Ev=Ev||[];if(Ev.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { additionalProperty: '"+T1+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is an invalid additional property";else Q+="should NOT have additional properties";Q+="' "}if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var wv=Q;if(Q=Ev.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+wv+"]); ";else Q+=" validate.errors = ["+wv+"]; return false; ";else Q+=" var err = "+wv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if($=w1,H)Q+=" break; "}else if(I)if(x=="failing"){Q+=" var "+N+" = errors;  ";var t1=v.compositeRule;v.compositeRule=K.compositeRule=!0,K.schema=l,K.schemaPath=v.schemaPath+".additionalProperties",K.errSchemaPath=v.errSchemaPath+"/additionalProperties",K.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers);var Tv=j+"["+V+"]";K.dataPathArr[F]=V;var Bv=v.validate(K);if(K.baseId=u,v.util.varOccurences(Bv,w)<2)Q+=" "+v.util.varReplace(Bv,w,Tv)+" ";else Q+=" var "+w+" = "+Tv+"; "+Bv+" ";Q+=" if (!"+M+") { errors = "+N+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+j+"["+V+"]; }  ",v.compositeRule=K.compositeRule=t1}else{K.schema=l,K.schemaPath=v.schemaPath+".additionalProperties",K.errSchemaPath=v.errSchemaPath+"/additionalProperties",K.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers);var Tv=j+"["+V+"]";K.dataPathArr[F]=V;var Bv=v.validate(K);if(K.baseId=u,v.util.varOccurences(Bv,w)<2)Q+=" "+v.util.varReplace(Bv,w,Tv)+" ";else Q+=" var "+w+" = "+Tv+"; "+Bv+" ";if(H)Q+=" if (!"+M+") break; "}v.errorPath=kv}if(g)Q+=" } ";if(Q+=" }  ",H)Q+=" if ("+M+") { ",q+="}"}var x1=v.opts.useDefaults&&!v.compositeRule;if(E.length){var U1=E;if(U1){var a,e1=-1,v0=U1.length-1;while(e1<v0){a=U1[e1+=1];var gv=z[a];if(v.opts.strictKeywords?typeof gv=="object"&&Object.keys(gv).length>0||gv===!1:v.util.schemaHasRules(gv,v.RULES.all)){var tv=v.util.getProperty(a),Tv=j+tv,uv=x1&&gv.default!==void 0;K.schema=gv,K.schemaPath=W+tv,K.errSchemaPath=$+"/"+v.util.escapeFragment(a),K.errorPath=v.util.getPath(v.errorPath,a,v.opts.jsonPointers),K.dataPathArr[F]=v.util.toQuotedString(a);var Bv=v.validate(K);if(K.baseId=u,v.util.varOccurences(Bv,w)<2){Bv=v.util.varReplace(Bv,w,Tv);var lv=Tv}else{var lv=w;Q+=" var "+w+" = "+Tv+"; "}if(uv)Q+=" "+Bv+" ";else{if(vv&&vv[a]){if(Q+=" if ( "+lv+" === undefined ",Z)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(a)+"') ";Q+=") { "+M+" = false; ";var kv=v.errorPath,w1=$,j1=v.util.escapeQuotes(a);if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(kv,a,v.opts.jsonPointers);$=v.errSchemaPath+"/required";var Ev=Ev||[];if(Ev.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { missingProperty: '"+j1+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+j1+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var wv=Q;if(Q=Ev.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+wv+"]); ";else Q+=" validate.errors = ["+wv+"]; return false; ";else Q+=" var err = "+wv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";$=w1,v.errorPath=kv,Q+=" } else { "}else if(H){if(Q+=" if ( "+lv+" === undefined ",Z)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(a)+"') ";Q+=") { "+M+" = true; } else { "}else{if(Q+=" if ("+lv+" !== undefined ",Z)Q+=" &&   Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(a)+"') ";Q+=" ) { "}Q+=" "+Bv+" } "}}if(H)Q+=" if ("+M+") { ",q+="}"}}}if(b.length){var nv=b;if(nv){var Gv,Af=-1,TQ=nv.length-1;while(Af<TQ){Gv=nv[Af+=1];var gv=R[Gv];if(v.opts.strictKeywords?typeof gv=="object"&&Object.keys(gv).length>0||gv===!1:v.util.schemaHasRules(gv,v.RULES.all)){if(K.schema=gv,K.schemaPath=v.schemaPath+".patternProperties"+v.util.getProperty(Gv),K.errSchemaPath=v.errSchemaPath+"/patternProperties/"+v.util.escapeFragment(Gv),Z)Q+=" "+h+" = "+h+" || Object.keys("+j+"); for (var "+L+"=0; "+L+"<"+h+".length; "+L+"++) { var "+V+" = "+h+"["+L+"]; ";else Q+=" for (var "+V+" in "+j+") { ";Q+=" if ("+v.usePattern(Gv)+".test("+V+")) { ",K.errorPath=v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers);var Tv=j+"["+V+"]";K.dataPathArr[F]=V;var Bv=v.validate(K);if(K.baseId=u,v.util.varOccurences(Bv,w)<2)Q+=" "+v.util.varReplace(Bv,w,Tv)+" ";else Q+=" var "+w+" = "+Tv+"; "+Bv+" ";if(H)Q+=" if (!"+M+") break; ";if(Q+=" } ",H)Q+=" else "+M+" = true; ";if(Q+=" }  ",H)Q+=" if ("+M+") { ",q+="}"}}}}if(H)Q+=" "+q+" if ("+N+" == errors) {";return Q}});var p6=r((EB,r6)=>{r6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="errs__"+Y,K=v.util.copy(v),q="";K.level++;var M="valid"+K.level;if(Q+="var "+N+" = errors;",v.opts.strictKeywords?typeof z=="object"&&Object.keys(z).length>0||z===!1:v.util.schemaHasRules(z,v.RULES.all)){K.schema=z,K.schemaPath=W,K.errSchemaPath=$;var V="key"+Y,L="idx"+Y,F="i"+Y,w="' + "+V+" + '",h=K.dataLevel=v.dataLevel+1,E="data"+h,R="dataProperties"+Y,b=v.opts.ownProperties,l=v.baseId;if(b)Q+=" var "+R+" = undefined; ";if(b)Q+=" "+R+" = "+R+" || Object.keys("+j+"); for (var "+L+"=0; "+L+"<"+R+".length; "+L+"++) { var "+V+" = "+R+"["+L+"]; ";else Q+=" for (var "+V+" in "+j+") { ";Q+=" var startErrs"+Y+" = errors; ";var g=V,m=v.compositeRule;v.compositeRule=K.compositeRule=!0;var I=v.validate(K);if(K.baseId=l,v.util.varOccurences(I,E)<2)Q+=" "+v.util.varReplace(I,E,g)+" ";else Q+=" var "+E+" = "+g+"; "+I+" ";if(v.compositeRule=K.compositeRule=m,Q+=" if (!"+M+") { for (var "+F+"=startErrs"+Y+"; "+F+"<errors; "+F+"++) { vErrors["+F+"].propertyName = "+V+"; }   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { propertyName: '"+w+"' } ",v.opts.messages!==!1)Q+=" , message: 'property name \\'"+w+"\\' is invalid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(H)Q+=" break; ";Q+=" } }"}if(H)Q+=" "+q+" if ("+N+" == errors) {";return Q}});var c6=r((_B,a6)=>{a6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K=v.opts.$data&&z&&z.$data,q;if(K)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",q="schema"+Y;else q=z;var M="schema"+Y;if(!K)if(z.length<v.opts.loopRequired&&v.schema.properties&&Object.keys(v.schema.properties).length){var V=[],L=z;if(L){var F,w=-1,h=L.length-1;while(w<h){F=L[w+=1];var E=v.schema.properties[F];if(!(E&&(v.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:v.util.schemaHasRules(E,v.RULES.all))))V[V.length]=F}}}else var V=z;if(K||V.length){var R=v.errorPath,b=K||V.length>=v.opts.loopRequired,l=v.opts.ownProperties;if(H)if(Q+=" var missing"+Y+"; ",b){if(!K)Q+=" var "+M+" = validate.schema"+W+"; ";var g="i"+Y,m="schema"+Y+"["+g+"]",I="' + "+m+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(R,m,v.opts.jsonPointers);if(Q+=" var "+N+" = true; ",K)Q+=" if (schema"+Y+" === undefined) "+N+" = true; else if (!Array.isArray(schema"+Y+")) "+N+" = false; else {";if(Q+=" for (var "+g+" = 0; "+g+" < "+M+".length; "+g+"++) { "+N+" = "+j+"["+M+"["+g+"]] !== undefined ",l)Q+=" &&   Object.prototype.hasOwnProperty.call("+j+", "+M+"["+g+"]) ";if(Q+="; if (!"+N+") break; } ",K)Q+="  }  ";Q+="  if (!"+N+") {   ";var x=x||[];if(x.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { missingProperty: '"+I+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+I+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var _=Q;if(Q=x.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+_+"]); ";else Q+=" validate.errors = ["+_+"]; return false; ";else Q+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } else { "}else{Q+=" if ( ";var Z=V;if(Z){var u,g=-1,jv=Z.length-1;while(g<jv){if(u=Z[g+=1],g)Q+=" || ";var vv=v.util.getProperty(u),Jv=j+vv;if(Q+=" ( ( "+Jv+" === undefined ",l)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(u)+"') ";Q+=") && (missing"+Y+" = "+v.util.toQuotedString(v.opts.jsonPointers?u:vv)+") ) "}}Q+=") {  ";var m="missing"+Y,I="' + "+m+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(R,m,!0):R+" + "+m;var x=x||[];if(x.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { missingProperty: '"+I+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+I+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";var _=Q;if(Q=x.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+_+"]); ";else Q+=" validate.errors = ["+_+"]; return false; ";else Q+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } else { "}else if(b){if(!K)Q+=" var "+M+" = validate.schema"+W+"; ";var g="i"+Y,m="schema"+Y+"["+g+"]",I="' + "+m+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(R,m,v.opts.jsonPointers);if(K){if(Q+=" if ("+M+" && !Array.isArray("+M+")) {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { missingProperty: '"+I+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+I+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+M+" !== undefined) { "}if(Q+=" for (var "+g+" = 0; "+g+" < "+M+".length; "+g+"++) { if ("+j+"["+M+"["+g+"]] === undefined ",l)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", "+M+"["+g+"]) ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { missingProperty: '"+I+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+I+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",K)Q+="  }  "}else{var e=V;if(e){var u,a=-1,Av=e.length-1;while(a<Av){u=e[a+=1];var vv=v.util.getProperty(u),I=v.util.escapeQuotes(u),Jv=j+vv;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(R,u,v.opts.jsonPointers);if(Q+=" if ( "+Jv+" === undefined ",l)Q+=" || ! Object.prototype.hasOwnProperty.call("+j+", '"+v.util.escapeQuotes(u)+"') ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { missingProperty: '"+I+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+I+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}v.errorPath=R}else if(H)Q+=" if (true) {";return Q}});var d6=r((RB,n6)=>{n6.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j="data"+(G||""),N="valid"+Y,K=v.opts.$data&&z&&z.$data,q;if(K)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",q="schema"+Y;else q=z;if((z||K)&&v.opts.uniqueItems!==!1){if(K)Q+=" var "+N+"; if ("+q+" === false || "+q+" === undefined) "+N+" = true; else if (typeof "+q+" != 'boolean') "+N+" = false; else { ";Q+=" var i = "+j+".length , "+N+" = true , j; if (i > 1) { ";var M=v.schema.items&&v.schema.items.type,V=Array.isArray(M);if(!M||M=="object"||M=="array"||V&&(M.indexOf("object")>=0||M.indexOf("array")>=0))Q+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+j+"[i], "+j+"[j])) { "+N+" = false; break outer; } } } ";else{Q+=" var itemIndices = {}, item; for (;i--;) { var item = "+j+"[i]; ";var L="checkDataType"+(V?"s":"");if(Q+=" if ("+v.util[L](M,"item",v.opts.strictNumbers,!0)+") continue; ",V)Q+=` if (typeof item == 'string') item = '"' + item; `;Q+=" if (typeof itemIndices[item] == 'number') { "+N+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(Q+=" } ",K)Q+="  }  ";Q+=" if (!"+N+") {   ";var F=F||[];if(F.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { i: i, j: j } ",v.opts.messages!==!1)Q+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(v.opts.verbose){if(Q+=" , schema:  ",K)Q+="validate.schema"+W;else Q+=""+z;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+j+" "}Q+=" } "}else Q+=" {} ";var w=Q;if(Q=F.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+w+"]); ";else Q+=" validate.errors = ["+w+"]; return false; ";else Q+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",H)Q+=" else { "}else if(H)Q+=" if (true) { ";return Q}});var s6=r((SB,i6)=>{i6.exports={$ref:W6(),allOf:$6(),anyOf:j6(),$comment:q6(),const:V6(),contains:M6(),dependencies:O6(),enum:A6(),format:U6(),if:h6(),items:_6(),maximum:O8(),minimum:O8(),maxItems:L8(),minItems:L8(),maxLength:A8(),minLength:A8(),maxProperties:w8(),minProperties:w8(),multipleOf:Z6(),not:T6(),oneOf:b6(),pattern:l6(),properties:u6(),propertyNames:p6(),required:c6(),uniqueItems:d6(),validate:M8()}});var e6=r((yB,t6)=>{var o6=s6(),U8=$0().toHash;t6.exports=function f(){var v=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],J=["type","$comment"],X=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],Q=["number","integer","string","array","object","boolean","null"];return v.all=U8(J),v.types=U8(Q),v.forEach(function(Y){if(Y.rules=Y.rules.map(function(G){var z;if(typeof G=="object"){var W=Object.keys(G)[0];z=G[W],G=W,z.forEach(function(H){J.push(H),v.all[H]=!0})}J.push(G);var $=v.all[G]={keyword:G,code:o6[G],implements:z};return $}),v.all.$comment={keyword:"$comment",code:o6.$comment},Y.type)v.types[Y.type]=Y}),v.keywords=U8(J.concat(X)),v.custom={},v}});var Q5=r((IB,f5)=>{var v5=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];f5.exports=function(f,v){for(var J=0;J<v.length;J++){f=JSON.parse(JSON.stringify(f));var X=v[J].split("/"),Q=f,Y;for(Y=1;Y<X.length;Y++)Q=Q[X[Y]];for(Y=0;Y<v5.length;Y++){var G=v5[Y],z=Q[G];if(z)Q[G]={anyOf:[z,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return f}});var Y5=r((gB,X5)=>{var P3=XQ().MissingRef;X5.exports=J5;function J5(f,v,J){var X=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");if(typeof v=="function")J=v,v=void 0;var Q=Y(f).then(function(){var z=X._addSchema(f,void 0,v);return z.validate||G(z)});if(J)Q.then(function(z){J(null,z)},J);return Q;function Y(z){var W=z.$schema;return W&&!X.getSchema(W)?J5.call(X,{$ref:W},!0):Promise.resolve()}function G(z){try{return X._compile(z)}catch($){if($ instanceof P3)return W($);throw $}function W($){var H=$.missingSchema;if(K(H))throw new Error("Schema "+H+" is loaded but "+$.missingRef+" cannot be resolved");var j=X._loadingSchemas[H];if(!j)j=X._loadingSchemas[H]=X._opts.loadSchema(H),j.then(N,N);return j.then(function(q){if(!K(H))return Y(q).then(function(){if(!K(H))X.addSchema(q,H,void 0,v)})}).then(function(){return G(z)});function N(){delete X._loadingSchemas[H]}function K(q){return X._refs[q]||X._schemas[q]}}}}});var z5=r((ZB,G5)=>{G5.exports=function f(v,J,X){var Q=" ",Y=v.level,G=v.dataLevel,z=v.schema[J],W=v.schemaPath+v.util.getProperty(J),$=v.errSchemaPath+"/"+J,H=!v.opts.allErrors,j,N="data"+(G||""),K="valid"+Y,q="errs__"+Y,M=v.opts.$data&&z&&z.$data,V;if(M)Q+=" var schema"+Y+" = "+v.util.getData(z.$data,G,v.dataPathArr)+"; ",V="schema"+Y;else V=z;var L=this,F="definition"+Y,w=L.definition,h="",E,R,b,l,g;if(M&&w.$data){g="keywordValidate"+Y;var m=w.validateSchema;Q+=" var "+F+" = RULES.custom['"+J+"'].definition; var "+g+" = "+F+".validate;"}else{if(l=v.useCustomRule(L,z,v.schema,v),!l)return;V="validate.schema"+W,g=l.code,E=w.compile,R=w.inline,b=w.macro}var I=g+".errors",x="i"+Y,_="ruleErr"+Y,Z=w.async;if(Z&&!v.async)throw new Error("async keyword in sync schema");if(!(R||b))Q+=""+I+" = null;";if(Q+="var "+q+" = errors;var "+K+";",M&&w.$data){if(h+="}",Q+=" if ("+V+" === undefined) { "+K+" = true; } else { ",m)h+="}",Q+=" "+K+" = "+F+".validateSchema("+V+"); if ("+K+") { "}if(R)if(w.statements)Q+=" "+l.validate+" ";else Q+=" "+K+" = "+l.validate+"; ";else if(b){var u=v.util.copy(v),h="";u.level++;var jv="valid"+u.level;u.schema=l.validate,u.schemaPath="";var vv=v.compositeRule;v.compositeRule=u.compositeRule=!0;var Jv=v.validate(u).replace(/validate\.schema/g,g);v.compositeRule=u.compositeRule=vv,Q+=" "+Jv}else{var e=e||[];if(e.push(Q),Q="",Q+="  "+g+".call( ",v.opts.passContext)Q+="this";else Q+="self";if(E||w.schema===!1)Q+=" , "+N+" ";else Q+=" , "+V+" , "+N+" , validate.schema"+v.schemaPath+" ";if(Q+=" , (dataPath || '')",v.errorPath!='""')Q+=" + "+v.errorPath;var a=G?"data"+(G-1||""):"parentData",Av=G?v.dataPathArr[G]:"parentDataProperty";Q+=" , "+a+" , "+Av+" , rootData )  ";var Cv=Q;if(Q=e.pop(),w.errors===!1){if(Q+=" "+K+" = ",Z)Q+="await ";Q+=""+Cv+"; "}else if(Z)I="customErrors"+Y,Q+=" var "+I+" = null; try { "+K+" = await "+Cv+"; } catch (e) { "+K+" = false; if (e instanceof ValidationError) "+I+" = e.errors; else throw e; } ";else Q+=" "+I+" = null; "+K+" = "+Cv+"; "}if(w.modifying)Q+=" if ("+a+") "+N+" = "+a+"["+Av+"];";if(Q+=""+h,w.valid){if(H)Q+=" if (true) { "}else{if(Q+=" if ( ",w.valid===void 0)if(Q+=" !",b)Q+=""+jv;else Q+=""+K;else Q+=" "+!w.valid+" ";Q+=") { ",j=L.keyword;var e=e||[];e.push(Q),Q="";var e=e||[];if(e.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(j||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { keyword: '"+L.keyword+"' } ",v.opts.messages!==!1)Q+=` , message: 'should pass "`+L.keyword+`" keyword validation' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+N+" ";Q+=" } "}else Q+=" {} ";var bv=Q;if(Q=e.pop(),!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(["+bv+"]); ";else Q+=" validate.errors = ["+bv+"]; return false; ";else Q+=" var err = "+bv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Gv=Q;if(Q=e.pop(),R)if(w.errors){if(w.errors!="full"){if(Q+="  for (var "+x+"="+q+"; "+x+"<errors; "+x+"++) { var "+_+" = vErrors["+x+"]; if ("+_+".dataPath === undefined) "+_+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+_+".schemaPath === undefined) { "+_+'.schemaPath = "'+$+'"; } ',v.opts.verbose)Q+=" "+_+".schema = "+V+"; "+_+".data = "+N+"; ";Q+=" } "}}else if(w.errors===!1)Q+=" "+Gv+" ";else{if(Q+=" if ("+q+" == errors) { "+Gv+" } else {  for (var "+x+"="+q+"; "+x+"<errors; "+x+"++) { var "+_+" = vErrors["+x+"]; if ("+_+".dataPath === undefined) "+_+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+_+".schemaPath === undefined) { "+_+'.schemaPath = "'+$+'"; } ',v.opts.verbose)Q+=" "+_+".schema = "+V+"; "+_+".data = "+N+"; ";Q+=" } } "}else if(b){if(Q+="   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: '"+(j||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString($)+" , params: { keyword: '"+L.keyword+"' } ",v.opts.messages!==!1)Q+=` , message: 'should pass "`+L.keyword+`" keyword validation' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+W+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+N+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&H)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; "}else if(w.errors===!1)Q+=" "+Gv+" ";else{if(Q+=" if (Array.isArray("+I+")) { if (vErrors === null) vErrors = "+I+"; else vErrors = vErrors.concat("+I+"); errors = vErrors.length;  for (var "+x+"="+q+"; "+x+"<errors; "+x+"++) { var "+_+" = vErrors["+x+"]; if ("+_+".dataPath === undefined) "+_+".dataPath = (dataPath || '') + "+v.errorPath+";  "+_+'.schemaPath = "'+$+'";  ',v.opts.verbose)Q+=" "+_+".schema = "+V+"; "+_+".data = "+N+"; ";Q+=" } } else { "+Gv+" } "}if(Q+=" } ",H)Q+=" else { "}return Q}});var F8=r((CB,V3)=>{V3.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var $5=r((TB,B5)=>{var W5=F8();B5.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:W5.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:W5.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var j5=r((xB,K5)=>{var N3=/^[a-z_$][a-z0-9_$-]*$/i,M3=z5(),D3=$5();K5.exports={add:O3,get:L3,remove:A3,validate:h8};function O3(f,v){var J=this.RULES;if(J.keywords[f])throw new Error("Keyword "+f+" is already defined");if(!N3.test(f))throw new Error("Keyword "+f+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var X=v.type;if(Array.isArray(X))for(var Q=0;Q<X.length;Q++)G(f,X[Q],v);else G(f,X,v);var Y=v.metaSchema;if(Y){if(v.$data&&this._opts.$data)Y={anyOf:[Y,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(Y,!0)}}J.keywords[f]=J.all[f]=!0;function G(z,W,$){var H;for(var j=0;j<J.length;j++){var N=J[j];if(N.type==W){H=N;break}}if(!H)H={type:W,rules:[]},J.push(H);var K={keyword:z,definition:$,custom:!0,code:M3,implements:$.implements};H.rules.push(K),J.custom[z]=K}return this}function L3(f){var v=this.RULES.custom[f];return v?v.definition:this.RULES.keywords[f]||!1}function A3(f){var v=this.RULES;delete v.keywords[f],delete v.all[f],delete v.custom[f];for(var J=0;J<v.length;J++){var X=v[J].rules;for(var Q=0;Q<X.length;Q++)if(X[Q].keyword==f){X.splice(Q,1);break}}return this}function h8(f,v){h8.errors=null;var J=this._validateKeyword=this._validateKeyword||this.compile(D3,!0);if(J(f))return!0;if(h8.errors=J.errors,v)throw new Error("custom keyword definition is invalid: "+this.errorsText(J.errors));else return!1}});var H5=r((bB,w3)=>{w3.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var w5=r((kB,A5)=>{var P5=cJ(),K0=JQ(),U3=dJ(),V5=K8(),F3=N8(),h3=G6(),E3=e6(),N5=Q5(),M5=$0();A5.exports=Uv;Uv.prototype.validate=R3;Uv.prototype.compile=S3;Uv.prototype.addSchema=y3;Uv.prototype.addMetaSchema=I3;Uv.prototype.validateSchema=g3;Uv.prototype.getSchema=C3;Uv.prototype.removeSchema=x3;Uv.prototype.addFormat=a3;Uv.prototype.errorsText=p3;Uv.prototype._addSchema=b3;Uv.prototype._compile=k3;Uv.prototype.compileAsync=Y5();var jQ=j5();Uv.prototype.addKeyword=jQ.add;Uv.prototype.getKeyword=jQ.get;Uv.prototype.removeKeyword=jQ.remove;Uv.prototype.validateKeyword=jQ.validate;var D5=XQ();Uv.ValidationError=D5.Validation;Uv.MissingRefError=D5.MissingRef;Uv.$dataMetaSchema=N5;var KQ="http://json-schema.org/draft-07/schema",q5=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],_3=["/properties"];function Uv(f){if(!(this instanceof Uv))return new Uv(f);if(f=this._opts=M5.copy(f)||{},o3(this),this._schemas={},this._refs={},this._fragments={},this._formats=h3(f.format),this._cache=f.cache||new U3,this._loadingSchemas={},this._compilations=[],this.RULES=E3(),this._getId=l3(f),f.loopRequired=f.loopRequired||1/0,f.errorDataPath=="property")f._errorDataPathProperty=!0;if(f.serialize===void 0)f.serialize=F3;if(this._metaOpts=s3(this),f.formats)d3(this);if(f.keywords)i3(this);if(c3(this),typeof f.meta=="object")this.addMetaSchema(f.meta);if(f.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});n3(this)}function R3(f,v){var J;if(typeof f=="string"){if(J=this.getSchema(f),!J)throw new Error('no schema with key or ref "'+f+'"')}else{var X=this._addSchema(f);J=X.validate||this._compile(X)}var Q=J(v);if(J.$async!==!0)this.errors=J.errors;return Q}function S3(f,v){var J=this._addSchema(f,void 0,v);return J.validate||this._compile(J)}function y3(f,v,J,X){if(Array.isArray(f)){for(var Q=0;Q<f.length;Q++)this.addSchema(f[Q],void 0,J,X);return this}var Y=this._getId(f);if(Y!==void 0&&typeof Y!="string")throw new Error("schema id must be string");return v=K0.normalizeId(v||Y),L5(this,v),this._schemas[v]=this._addSchema(f,J,X,!0),this}function I3(f,v,J){return this.addSchema(f,v,J,!0),this}function g3(f,v){var J=f.$schema;if(J!==void 0&&typeof J!="string")throw new Error("$schema must be a string");if(J=J||this._opts.defaultMeta||Z3(this),!J)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var X=this.validate(J,f);if(!X&&v){var Q="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(Q);else throw new Error(Q)}return X}function Z3(f){var v=f._opts.meta;return f._opts.defaultMeta=typeof v=="object"?f._getId(v)||v:f.getSchema(KQ)?KQ:void 0,f._opts.defaultMeta}function C3(f){var v=O5(this,f);switch(typeof v){case"object":return v.validate||this._compile(v);case"string":return this.getSchema(v);case"undefined":return T3(this,f)}}function T3(f,v){var J=K0.schema.call(f,{schema:{}},v);if(J){var{schema:X,root:Q,baseId:Y}=J,G=P5.call(f,X,Q,void 0,Y);return f._fragments[v]=new V5({ref:v,fragment:!0,schema:X,root:Q,baseId:Y,validate:G}),G}}function O5(f,v){return v=K0.normalizeId(v),f._schemas[v]||f._refs[v]||f._fragments[v]}function x3(f){if(f instanceof RegExp)return $Q(this,this._schemas,f),$Q(this,this._refs,f),this;switch(typeof f){case"undefined":return $Q(this,this._schemas),$Q(this,this._refs),this._cache.clear(),this;case"string":var v=O5(this,f);if(v)this._cache.del(v.cacheKey);return delete this._schemas[f],delete this._refs[f],this;case"object":var J=this._opts.serialize,X=J?J(f):f;this._cache.del(X);var Q=this._getId(f);if(Q)Q=K0.normalizeId(Q),delete this._schemas[Q],delete this._refs[Q]}return this}function $Q(f,v,J){for(var X in v){var Q=v[X];if(!Q.meta&&(!J||J.test(X)))f._cache.del(Q.cacheKey),delete v[X]}}function b3(f,v,J,X){if(typeof f!="object"&&typeof f!="boolean")throw new Error("schema should be object or boolean");var Q=this._opts.serialize,Y=Q?Q(f):f,G=this._cache.get(Y);if(G)return G;X=X||this._opts.addUsedSchema!==!1;var z=K0.normalizeId(this._getId(f));if(z&&X)L5(this,z);var W=this._opts.validateSchema!==!1&&!v,$;if(W&&!($=z&&z==K0.normalizeId(f.$schema)))this.validateSchema(f,!0);var H=K0.ids.call(this,f),j=new V5({id:z,schema:f,localRefs:H,cacheKey:Y,meta:J});if(z[0]!="#"&&X)this._refs[z]=j;if(this._cache.put(Y,j),W&&$)this.validateSchema(f,!0);return j}function k3(f,v){if(f.compiling){if(f.validate=Q,Q.schema=f.schema,Q.errors=null,Q.root=v?v:Q,f.schema.$async===!0)Q.$async=!0;return Q}f.compiling=!0;var J;if(f.meta)J=this._opts,this._opts=this._metaOpts;var X;try{X=P5.call(this,f.schema,v,f.localRefs)}catch(Y){throw delete f.validate,Y}finally{if(f.compiling=!1,f.meta)this._opts=J}return f.validate=X,f.refs=X.refs,f.refVal=X.refVal,f.root=X.root,X;function Q(){var Y=f.validate,G=Y.apply(this,arguments);return Q.errors=Y.errors,G}}function l3(f){switch(f.schemaId){case"auto":return r3;case"id":return m3;default:return u3}}function m3(f){if(f.$id)this.logger.warn("schema $id ignored",f.$id);return f.id}function u3(f){if(f.id)this.logger.warn("schema id ignored",f.id);return f.$id}function r3(f){if(f.$id&&f.id&&f.$id!=f.id)throw new Error("schema $id is different from id");return f.$id||f.id}function p3(f,v){if(f=f||this.errors,!f)return"No errors";v=v||{};var J=v.separator===void 0?", ":v.separator,X=v.dataVar===void 0?"data":v.dataVar,Q="";for(var Y=0;Y<f.length;Y++){var G=f[Y];if(G)Q+=X+G.dataPath+" "+G.message+J}return Q.slice(0,-J.length)}function a3(f,v){if(typeof v=="string")v=new RegExp(v);return this._formats[f]=v,this}function c3(f){var v;if(f._opts.$data)v=H5(),f.addMetaSchema(v,v.$id,!0);if(f._opts.meta===!1)return;var J=F8();if(f._opts.$data)J=N5(J,_3);f.addMetaSchema(J,KQ,!0),f._refs["http://json-schema.org/schema"]=KQ}function n3(f){var v=f._opts.schemas;if(!v)return;if(Array.isArray(v))f.addSchema(v);else for(var J in v)f.addSchema(v[J],J)}function d3(f){for(var v in f._opts.formats){var J=f._opts.formats[v];f.addFormat(v,J)}}function i3(f){for(var v in f._opts.keywords){var J=f._opts.keywords[v];f.addKeyword(v,J)}}function L5(f,v){if(f._schemas[v]||f._refs[v])throw new Error('schema with key or id "'+v+'" already exists')}function s3(f){var v=M5.copy(f._opts);for(var J=0;J<q5.length;J++)delete v[q5[J]];return v}function o3(f){var v=f._opts.logger;if(v===!1)f.logger={log:E8,warn:E8,error:E8};else{if(v===void 0)v=console;if(!(typeof v=="object"&&v.log&&v.warn&&v.error))throw new Error("logger must implement log, warn and error methods");f.logger=v}}function E8(){}});var I1=r((nj,_X)=>{var hX=["nodebuffer","arraybuffer","fragments"],EX=typeof Blob!=="undefined";if(EX)hX.push("blob");_X.exports={BINARY_TYPES:hX,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:EX,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Hf=r((dj,AQ)=>{var{EMPTY_BUFFER:DG}=I1(),l8=Buffer[Symbol.species];function OG(f,v){if(f.length===0)return DG;if(f.length===1)return f[0];let J=Buffer.allocUnsafe(v),X=0;for(let Q=0;Q<f.length;Q++){let Y=f[Q];J.set(Y,X),X+=Y.length}if(X<v)return new l8(J.buffer,J.byteOffset,X);return J}function RX(f,v,J,X,Q){for(let Y=0;Y<Q;Y++)J[X+Y]=f[Y]^v[Y&3]}function SX(f,v){for(let J=0;J<f.length;J++)f[J]^=v[J&3]}function LG(f){if(f.length===f.buffer.byteLength)return f.buffer;return f.buffer.slice(f.byteOffset,f.byteOffset+f.length)}function m8(f){if(m8.readOnly=!0,Buffer.isBuffer(f))return f;let v;if(f instanceof ArrayBuffer)v=new l8(f);else if(ArrayBuffer.isView(f))v=new l8(f.buffer,f.byteOffset,f.byteLength);else v=Buffer.from(f),m8.readOnly=!1;return v}AQ.exports={concat:OG,mask:RX,toArrayBuffer:LG,toBuffer:m8,unmask:SX};if(!process.env.WS_NO_BUFFER_UTIL)try{let f=(()=>{throw new Error("Cannot require module "+"bufferutil");})();AQ.exports.mask=function(v,J,X,Q,Y){if(Y<48)RX(v,J,X,Q,Y);else f.mask(v,J,X,Q,Y)},AQ.exports.unmask=function(v,J){if(v.length<32)SX(v,J);else f.unmask(v,J)}}catch(f){}});var ZX=r((ij,gX)=>{var yX=Symbol("kDone"),u8=Symbol("kRun");class IX{constructor(f){this[yX]=()=>{this.pending--,this[u8]()},this.concurrency=f||1/0,this.jobs=[],this.pending=0}add(f){this.jobs.push(f),this[u8]()}[u8](){if(this.pending===this.concurrency)return;if(this.jobs.length){let f=this.jobs.shift();this.pending++,f(this[yX])}}}gX.exports=IX});var Vf=r((sj,kX)=>{var qf=require("zlib"),CX=Hf(),AG=ZX(),{kStatusCode:TX}=I1(),wG=Buffer[Symbol.species],UG=Buffer.from([0,0,255,255]),FQ=Symbol("permessage-deflate"),g1=Symbol("total-length"),Pf=Symbol("callback"),d1=Symbol("buffers"),UQ=Symbol("error"),wQ;class xX{constructor(f,v,J){if(this._maxPayload=J|0,this._options=f||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!v,this._deflate=null,this._inflate=null,this.params=null,!wQ){let X=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;wQ=new AG(X)}}static get extensionName(){return"permessage-deflate"}offer(){let f={};if(this._options.serverNoContextTakeover)f.server_no_context_takeover=!0;if(this._options.clientNoContextTakeover)f.client_no_context_takeover=!0;if(this._options.serverMaxWindowBits)f.server_max_window_bits=this._options.serverMaxWindowBits;if(this._options.clientMaxWindowBits)f.client_max_window_bits=this._options.clientMaxWindowBits;else if(this._options.clientMaxWindowBits==null)f.client_max_window_bits=!0;return f}accept(f){return f=this.normalizeParams(f),this.params=this._isServer?this.acceptAsServer(f):this.acceptAsClient(f),this.params}cleanup(){if(this._inflate)this._inflate.close(),this._inflate=null;if(this._deflate){let f=this._deflate[Pf];if(this._deflate.close(),this._deflate=null,f)f(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(f){let v=this._options,J=f.find((X)=>{if(v.serverNoContextTakeover===!1&&X.server_no_context_takeover||X.server_max_window_bits&&(v.serverMaxWindowBits===!1||typeof v.serverMaxWindowBits==="number"&&v.serverMaxWindowBits>X.server_max_window_bits)||typeof v.clientMaxWindowBits==="number"&&!X.client_max_window_bits)return!1;return!0});if(!J)throw new Error("None of the extension offers can be accepted");if(v.serverNoContextTakeover)J.server_no_context_takeover=!0;if(v.clientNoContextTakeover)J.client_no_context_takeover=!0;if(typeof v.serverMaxWindowBits==="number")J.server_max_window_bits=v.serverMaxWindowBits;if(typeof v.clientMaxWindowBits==="number")J.client_max_window_bits=v.clientMaxWindowBits;else if(J.client_max_window_bits===!0||v.clientMaxWindowBits===!1)delete J.client_max_window_bits;return J}acceptAsClient(f){let v=f[0];if(this._options.clientNoContextTakeover===!1&&v.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!v.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number")v.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits==="number"&&v.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return v}normalizeParams(f){return f.forEach((v)=>{Object.keys(v).forEach((J)=>{let X=v[J];if(X.length>1)throw new Error(`Parameter "${J}" must have only a single value`);if(X=X[0],J==="client_max_window_bits"){if(X!==!0){let Q=+X;if(!Number.isInteger(Q)||Q<8||Q>15)throw new TypeError(`Invalid value for parameter "${J}": ${X}`);X=Q}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${J}": ${X}`)}else if(J==="server_max_window_bits"){let Q=+X;if(!Number.isInteger(Q)||Q<8||Q>15)throw new TypeError(`Invalid value for parameter "${J}": ${X}`);X=Q}else if(J==="client_no_context_takeover"||J==="server_no_context_takeover"){if(X!==!0)throw new TypeError(`Invalid value for parameter "${J}": ${X}`)}else throw new Error(`Unknown parameter "${J}"`);v[J]=X})}),f}decompress(f,v,J){wQ.add((X)=>{this._decompress(f,v,(Q,Y)=>{X(),J(Q,Y)})})}compress(f,v,J){wQ.add((X)=>{this._compress(f,v,(Q,Y)=>{X(),J(Q,Y)})})}_decompress(f,v,J){let X=this._isServer?"client":"server";if(!this._inflate){let Q=`${X}_max_window_bits`,Y=typeof this.params[Q]!=="number"?qf.Z_DEFAULT_WINDOWBITS:this.params[Q];this._inflate=qf.createInflateRaw({...this._options.zlibInflateOptions,windowBits:Y}),this._inflate[FQ]=this,this._inflate[g1]=0,this._inflate[d1]=[],this._inflate.on("error",hG),this._inflate.on("data",bX)}if(this._inflate[Pf]=J,this._inflate.write(f),v)this._inflate.write(UG);this._inflate.flush(()=>{let Q=this._inflate[UQ];if(Q){this._inflate.close(),this._inflate=null,J(Q);return}let Y=CX.concat(this._inflate[d1],this._inflate[g1]);if(this._inflate._readableState.endEmitted)this._inflate.close(),this._inflate=null;else if(this._inflate[g1]=0,this._inflate[d1]=[],v&&this.params[`${X}_no_context_takeover`])this._inflate.reset();J(null,Y)})}_compress(f,v,J){let X=this._isServer?"server":"client";if(!this._deflate){let Q=`${X}_max_window_bits`,Y=typeof this.params[Q]!=="number"?qf.Z_DEFAULT_WINDOWBITS:this.params[Q];this._deflate=qf.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:Y}),this._deflate[g1]=0,this._deflate[d1]=[],this._deflate.on("data",FG)}this._deflate[Pf]=J,this._deflate.write(f),this._deflate.flush(qf.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let Q=CX.concat(this._deflate[d1],this._deflate[g1]);if(v)Q=new wG(Q.buffer,Q.byteOffset,Q.length-4);if(this._deflate[Pf]=null,this._deflate[g1]=0,this._deflate[d1]=[],v&&this.params[`${X}_no_context_takeover`])this._deflate.reset();J(null,Q)})}}kX.exports=xX;function FG(f){this[d1].push(f),this[g1]+=f.length}function bX(f){if(this[g1]+=f.length,this[FQ]._maxPayload<1||this[g1]<=this[FQ]._maxPayload){this[d1].push(f);return}this[UQ]=new RangeError("Max payload size exceeded"),this[UQ].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[UQ][TX]=1009,this.removeListener("data",bX),this.reset()}function hG(f){this[FQ]._inflate=null,f[TX]=1007,this[Pf](f)}});var m0=r((oj,hQ)=>{var{isUtf8:lX}=require("buffer"),{hasBlob:EG}=I1(),_G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function RG(f){return f>=1000&&f<=1014&&f!==1004&&f!==1005&&f!==1006||f>=3000&&f<=4999}function r8(f){let v=f.length,J=0;while(J<v)if((f[J]&128)===0)J++;else if((f[J]&224)===192){if(J+1===v||(f[J+1]&192)!==128||(f[J]&254)===192)return!1;J+=2}else if((f[J]&240)===224){if(J+2>=v||(f[J+1]&192)!==128||(f[J+2]&192)!==128||f[J]===224&&(f[J+1]&224)===128||f[J]===237&&(f[J+1]&224)===160)return!1;J+=3}else if((f[J]&248)===240){if(J+3>=v||(f[J+1]&192)!==128||(f[J+2]&192)!==128||(f[J+3]&192)!==128||f[J]===240&&(f[J+1]&240)===128||f[J]===244&&f[J+1]>143||f[J]>244)return!1;J+=4}else return!1;return!0}function SG(f){return EG&&typeof f==="object"&&typeof f.arrayBuffer==="function"&&typeof f.type==="string"&&typeof f.stream==="function"&&(f[Symbol.toStringTag]==="Blob"||f[Symbol.toStringTag]==="File")}hQ.exports={isBlob:SG,isValidStatusCode:RG,isValidUTF8:r8,tokenChars:_G};if(lX)hQ.exports.isValidUTF8=function(f){return f.length<24?r8(f):lX(f)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let f=(()=>{throw new Error("Cannot require module "+"utf-8-validate");})();hQ.exports.isValidUTF8=function(v){return v.length<32?r8(v):f(v)}}catch(f){}});var a8=r((tj,aX)=>{var{Writable:yG}=require("stream"),mX=Vf(),{BINARY_TYPES:IG,EMPTY_BUFFER:uX,kStatusCode:gG,kWebSocket:ZG}=I1(),{concat:p8,toArrayBuffer:CG,unmask:TG}=Hf(),{isValidStatusCode:xG,isValidUTF8:rX}=m0(),EQ=Buffer[Symbol.species];class pX extends yG{constructor(f={}){super();this._allowSynchronousEvents=f.allowSynchronousEvents!==void 0?f.allowSynchronousEvents:!0,this._binaryType=f.binaryType||IG[0],this._extensions=f.extensions||{},this._isServer=!!f.isServer,this._maxPayload=f.maxPayload|0,this._skipUTF8Validation=!!f.skipUTF8Validation,this[ZG]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(f,v,J){if(this._opcode===8&&this._state==0)return J();this._bufferedBytes+=f.length,this._buffers.push(f),this.startLoop(J)}consume(f){if(this._bufferedBytes-=f,f===this._buffers[0].length)return this._buffers.shift();if(f<this._buffers[0].length){let J=this._buffers[0];return this._buffers[0]=new EQ(J.buffer,J.byteOffset+f,J.length-f),new EQ(J.buffer,J.byteOffset,f)}let v=Buffer.allocUnsafe(f);do{let J=this._buffers[0],X=v.length-f;if(f>=J.length)v.set(this._buffers.shift(),X);else v.set(new Uint8Array(J.buffer,J.byteOffset,f),X),this._buffers[0]=new EQ(J.buffer,J.byteOffset+f,J.length-f);f-=J.length}while(f>0);return v}startLoop(f){this._loop=!0;do switch(this._state){case 0:this.getInfo(f);break;case 1:this.getPayloadLength16(f);break;case 2:this.getPayloadLength64(f);break;case 3:this.getMask();break;case 4:this.getData(f);break;case 5:case 6:this._loop=!1;return}while(this._loop);if(!this._errored)f()}getInfo(f){if(this._bufferedBytes<2){this._loop=!1;return}let v=this.consume(2);if((v[0]&48)!==0){let X=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");f(X);return}let J=(v[0]&64)===64;if(J&&!this._extensions[mX.extensionName]){let X=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");f(X);return}if(this._fin=(v[0]&128)===128,this._opcode=v[0]&15,this._payloadLength=v[1]&127,this._opcode===0){if(J){let X=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");f(X);return}if(!this._fragmented){let X=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");f(X);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let X=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");f(X);return}this._compressed=J}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let X=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");f(X);return}if(J){let X=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");f(X);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let X=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");f(X);return}}else{let X=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");f(X);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;if(this._masked=(v[1]&128)===128,this._isServer){if(!this._masked){let X=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");f(X);return}}else if(this._masked){let X=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");f(X);return}if(this._payloadLength===126)this._state=1;else if(this._payloadLength===127)this._state=2;else this.haveLength(f)}getPayloadLength16(f){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(f)}getPayloadLength64(f){if(this._bufferedBytes<8){this._loop=!1;return}let v=this.consume(8),J=v.readUInt32BE(0);if(J>Math.pow(2,21)-1){let X=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");f(X);return}this._payloadLength=J*Math.pow(2,32)+v.readUInt32BE(4),this.haveLength(f)}haveLength(f){if(this._payloadLength&&this._opcode<8){if(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){let v=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");f(v);return}}if(this._masked)this._state=3;else this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(f){let v=uX;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}if(v=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0)TG(v,this._mask)}if(this._opcode>7){this.controlMessage(v,f);return}if(this._compressed){this._state=5,this.decompress(v,f);return}if(v.length)this._messageLength=this._totalPayloadLength,this._fragments.push(v);this.dataMessage(f)}decompress(f,v){this._extensions[mX.extensionName].decompress(f,this._fin,(X,Q)=>{if(X)return v(X);if(Q.length){if(this._messageLength+=Q.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let Y=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");v(Y);return}this._fragments.push(Q)}if(this.dataMessage(v),this._state===0)this.startLoop(v)})}dataMessage(f){if(!this._fin){this._state=0;return}let v=this._messageLength,J=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let X;if(this._binaryType==="nodebuffer")X=p8(J,v);else if(this._binaryType==="arraybuffer")X=CG(p8(J,v));else if(this._binaryType==="blob")X=new Blob(J);else X=J;if(this._allowSynchronousEvents)this.emit("message",X,!0),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",X,!0),this._state=0,this.startLoop(f)})}else{let X=p8(J,v);if(!this._skipUTF8Validation&&!rX(X)){let Q=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");f(Q);return}if(this._state===5||this._allowSynchronousEvents)this.emit("message",X,!1),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",X,!1),this._state=0,this.startLoop(f)})}}controlMessage(f,v){if(this._opcode===8){if(f.length===0)this._loop=!1,this.emit("conclude",1005,uX),this.end();else{let J=f.readUInt16BE(0);if(!xG(J)){let Q=this.createError(RangeError,`invalid status code ${J}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");v(Q);return}let X=new EQ(f.buffer,f.byteOffset+2,f.length-2);if(!this._skipUTF8Validation&&!rX(X)){let Q=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");v(Q);return}this._loop=!1,this.emit("conclude",J,X),this.end()}this._state=0;return}if(this._allowSynchronousEvents)this.emit(this._opcode===9?"ping":"pong",f),this._state=0;else this._state=6,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",f),this._state=0,this.startLoop(v)})}createError(f,v,J,X,Q){this._loop=!1,this._errored=!0;let Y=new f(J?`Invalid WebSocket frame: ${v}`:v);return Error.captureStackTrace(Y,this.createError),Y.code=Q,Y[gG]=X,Y}}aX.exports=pX});var n8=r((vH,dX)=>{var{Duplex:ej}=require("stream"),{randomFillSync:bG}=require("crypto"),cX=Vf(),{EMPTY_BUFFER:kG,kWebSocket:lG,NOOP:mG}=I1(),{isBlob:u0,isValidStatusCode:uG}=m0(),{mask:nX,toBuffer:H0}=Hf(),J1=Symbol("kByteLength"),rG=Buffer.alloc(4),q0,r0=8192,K1=0,pG=1,aG=2;class i1{constructor(f,v,J){if(this._extensions=v||{},J)this._generateMask=J,this._maskBuffer=Buffer.alloc(4);this._socket=f,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=K1,this.onerror=mG,this[lG]=void 0}static frame(f,v){let J,X=!1,Q=2,Y=!1;if(v.mask){if(J=v.maskBuffer||rG,v.generateMask)v.generateMask(J);else{if(r0===8192){if(q0===void 0)q0=Buffer.alloc(8192);bG(q0,0,8192),r0=0}J[0]=q0[r0++],J[1]=q0[r0++],J[2]=q0[r0++],J[3]=q0[r0++]}Y=(J[0]|J[1]|J[2]|J[3])===0,Q=6}let G;if(typeof f==="string")if((!v.mask||Y)&&v[J1]!==void 0)G=v[J1];else f=Buffer.from(f),G=f.length;else G=f.length,X=v.mask&&v.readOnly&&!Y;let z=G;if(G>=65536)Q+=8,z=127;else if(G>125)Q+=2,z=126;let W=Buffer.allocUnsafe(X?G+Q:Q);if(W[0]=v.fin?v.opcode|128:v.opcode,v.rsv1)W[0]|=64;if(W[1]=z,z===126)W.writeUInt16BE(G,2);else if(z===127)W[2]=W[3]=0,W.writeUIntBE(G,4,6);if(!v.mask)return[W,f];if(W[1]|=128,W[Q-4]=J[0],W[Q-3]=J[1],W[Q-2]=J[2],W[Q-1]=J[3],Y)return[W,f];if(X)return nX(f,J,W,Q,G),[W];return nX(f,J,f,0,G),[W,f]}close(f,v,J,X){let Q;if(f===void 0)Q=kG;else if(typeof f!=="number"||!uG(f))throw new TypeError("First argument must be a valid error code number");else if(v===void 0||!v.length)Q=Buffer.allocUnsafe(2),Q.writeUInt16BE(f,0);else{let G=Buffer.byteLength(v);if(G>123)throw new RangeError("The message must not be greater than 123 bytes");if(Q=Buffer.allocUnsafe(2+G),Q.writeUInt16BE(f,0),typeof v==="string")Q.write(v,2);else Q.set(v,2)}let Y={[J1]:Q.length,fin:!0,generateMask:this._generateMask,mask:J,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};if(this._state!==K1)this.enqueue([this.dispatch,Q,!1,Y,X]);else this.sendFrame(i1.frame(Q,Y),X)}ping(f,v,J){let X,Q;if(typeof f==="string")X=Buffer.byteLength(f),Q=!1;else if(u0(f))X=f.size,Q=!1;else f=H0(f),X=f.length,Q=H0.readOnly;if(X>125)throw new RangeError("The data size must not be greater than 125 bytes");let Y={[J1]:X,fin:!0,generateMask:this._generateMask,mask:v,maskBuffer:this._maskBuffer,opcode:9,readOnly:Q,rsv1:!1};if(u0(f))if(this._state!==K1)this.enqueue([this.getBlobData,f,!1,Y,J]);else this.getBlobData(f,!1,Y,J);else if(this._state!==K1)this.enqueue([this.dispatch,f,!1,Y,J]);else this.sendFrame(i1.frame(f,Y),J)}pong(f,v,J){let X,Q;if(typeof f==="string")X=Buffer.byteLength(f),Q=!1;else if(u0(f))X=f.size,Q=!1;else f=H0(f),X=f.length,Q=H0.readOnly;if(X>125)throw new RangeError("The data size must not be greater than 125 bytes");let Y={[J1]:X,fin:!0,generateMask:this._generateMask,mask:v,maskBuffer:this._maskBuffer,opcode:10,readOnly:Q,rsv1:!1};if(u0(f))if(this._state!==K1)this.enqueue([this.getBlobData,f,!1,Y,J]);else this.getBlobData(f,!1,Y,J);else if(this._state!==K1)this.enqueue([this.dispatch,f,!1,Y,J]);else this.sendFrame(i1.frame(f,Y),J)}send(f,v,J){let X=this._extensions[cX.extensionName],Q=v.binary?2:1,Y=v.compress,G,z;if(typeof f==="string")G=Buffer.byteLength(f),z=!1;else if(u0(f))G=f.size,z=!1;else f=H0(f),G=f.length,z=H0.readOnly;if(this._firstFragment){if(this._firstFragment=!1,Y&&X&&X.params[X._isServer?"server_no_context_takeover":"client_no_context_takeover"])Y=G>=X._threshold;this._compress=Y}else Y=!1,Q=0;if(v.fin)this._firstFragment=!0;let W={[J1]:G,fin:v.fin,generateMask:this._generateMask,mask:v.mask,maskBuffer:this._maskBuffer,opcode:Q,readOnly:z,rsv1:Y};if(u0(f))if(this._state!==K1)this.enqueue([this.getBlobData,f,this._compress,W,J]);else this.getBlobData(f,this._compress,W,J);else if(this._state!==K1)this.enqueue([this.dispatch,f,this._compress,W,J]);else this.dispatch(f,this._compress,W,J)}getBlobData(f,v,J,X){this._bufferedBytes+=J[J1],this._state=aG,f.arrayBuffer().then((Q)=>{if(this._socket.destroyed){let G=new Error("The socket was closed while the blob was being read");process.nextTick(c8,this,G,X);return}this._bufferedBytes-=J[J1];let Y=H0(Q);if(!v)this._state=K1,this.sendFrame(i1.frame(Y,J),X),this.dequeue();else this.dispatch(Y,v,J,X)}).catch((Q)=>{process.nextTick(cG,this,Q,X)})}dispatch(f,v,J,X){if(!v){this.sendFrame(i1.frame(f,J),X);return}let Q=this._extensions[cX.extensionName];this._bufferedBytes+=J[J1],this._state=pG,Q.compress(f,J.fin,(Y,G)=>{if(this._socket.destroyed){let z=new Error("The socket was closed while data was being compressed");c8(this,z,X);return}this._bufferedBytes-=J[J1],this._state=K1,J.readOnly=!1,this.sendFrame(i1.frame(G,J),X),this.dequeue()})}dequeue(){while(this._state===K1&&this._queue.length){let f=this._queue.shift();this._bufferedBytes-=f[3][J1],Reflect.apply(f[0],this,f.slice(1))}}enqueue(f){this._bufferedBytes+=f[3][J1],this._queue.push(f)}sendFrame(f,v){if(f.length===2)this._socket.cork(),this._socket.write(f[0]),this._socket.write(f[1],v),this._socket.uncork();else this._socket.write(f[0],v)}}dX.exports=i1;function c8(f,v,J){if(typeof J==="function")J(v);for(let X=0;X<f._queue.length;X++){let Q=f._queue[X],Y=Q[Q.length-1];if(typeof Y==="function")Y(v)}}function cG(f,v,J){c8(f,v,J),f.onerror(v)}});var J7=r((fH,Q7)=>{var{kForOnEventAttribute:Nf,kListener:d8}=I1(),iX=Symbol("kCode"),sX=Symbol("kData"),oX=Symbol("kError"),tX=Symbol("kMessage"),eX=Symbol("kReason"),p0=Symbol("kTarget"),v7=Symbol("kType"),f7=Symbol("kWasClean");class s1{constructor(f){this[p0]=null,this[v7]=f}get target(){return this[p0]}get type(){return this[v7]}}Object.defineProperty(s1.prototype,"target",{enumerable:!0});Object.defineProperty(s1.prototype,"type",{enumerable:!0});class a0 extends s1{constructor(f,v={}){super(f);this[iX]=v.code===void 0?0:v.code,this[eX]=v.reason===void 0?"":v.reason,this[f7]=v.wasClean===void 0?!1:v.wasClean}get code(){return this[iX]}get reason(){return this[eX]}get wasClean(){return this[f7]}}Object.defineProperty(a0.prototype,"code",{enumerable:!0});Object.defineProperty(a0.prototype,"reason",{enumerable:!0});Object.defineProperty(a0.prototype,"wasClean",{enumerable:!0});class Mf extends s1{constructor(f,v={}){super(f);this[oX]=v.error===void 0?null:v.error,this[tX]=v.message===void 0?"":v.message}get error(){return this[oX]}get message(){return this[tX]}}Object.defineProperty(Mf.prototype,"error",{enumerable:!0});Object.defineProperty(Mf.prototype,"message",{enumerable:!0});class RQ extends s1{constructor(f,v={}){super(f);this[sX]=v.data===void 0?null:v.data}get data(){return this[sX]}}Object.defineProperty(RQ.prototype,"data",{enumerable:!0});var nG={addEventListener(f,v,J={}){for(let Q of this.listeners(f))if(!J[Nf]&&Q[d8]===v&&!Q[Nf])return;let X;if(f==="message")X=function Q(Y,G){let z=new RQ("message",{data:G?Y:Y.toString()});z[p0]=this,_Q(v,this,z)};else if(f==="close")X=function Q(Y,G){let z=new a0("close",{code:Y,reason:G.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});z[p0]=this,_Q(v,this,z)};else if(f==="error")X=function Q(Y){let G=new Mf("error",{error:Y,message:Y.message});G[p0]=this,_Q(v,this,G)};else if(f==="open")X=function Q(){let Y=new s1("open");Y[p0]=this,_Q(v,this,Y)};else return;if(X[Nf]=!!J[Nf],X[d8]=v,J.once)this.once(f,X);else this.on(f,X)},removeEventListener(f,v){for(let J of this.listeners(f))if(J[d8]===v&&!J[Nf]){this.removeListener(f,J);break}}};Q7.exports={CloseEvent:a0,ErrorEvent:Mf,Event:s1,EventTarget:nG,MessageEvent:RQ};function _Q(f,v,J){if(typeof f==="object"&&f.handleEvent)f.handleEvent.call(f,J);else f.call(v,J)}});var i8=r((QH,X7)=>{var{tokenChars:Df}=m0();function L1(f,v,J){if(f[v]===void 0)f[v]=[J];else f[v].push(J)}function dG(f){let v=Object.create(null),J=Object.create(null),X=!1,Q=!1,Y=!1,G,z,W=-1,$=-1,H=-1,j=0;for(;j<f.length;j++)if($=f.charCodeAt(j),G===void 0)if(H===-1&&Df[$]===1){if(W===-1)W=j}else if(j!==0&&($===32||$===9)){if(H===-1&&W!==-1)H=j}else if($===59||$===44){if(W===-1)throw new SyntaxError(`Unexpected character at index ${j}`);if(H===-1)H=j;let K=f.slice(W,H);if($===44)L1(v,K,J),J=Object.create(null);else G=K;W=H=-1}else throw new SyntaxError(`Unexpected character at index ${j}`);else if(z===void 0)if(H===-1&&Df[$]===1){if(W===-1)W=j}else if($===32||$===9){if(H===-1&&W!==-1)H=j}else if($===59||$===44){if(W===-1)throw new SyntaxError(`Unexpected character at index ${j}`);if(H===-1)H=j;if(L1(J,f.slice(W,H),!0),$===44)L1(v,G,J),J=Object.create(null),G=void 0;W=H=-1}else if($===61&&W!==-1&&H===-1)z=f.slice(W,j),W=H=-1;else throw new SyntaxError(`Unexpected character at index ${j}`);else if(Q){if(Df[$]!==1)throw new SyntaxError(`Unexpected character at index ${j}`);if(W===-1)W=j;else if(!X)X=!0;Q=!1}else if(Y)if(Df[$]===1){if(W===-1)W=j}else if($===34&&W!==-1)Y=!1,H=j;else if($===92)Q=!0;else throw new SyntaxError(`Unexpected character at index ${j}`);else if($===34&&f.charCodeAt(j-1)===61)Y=!0;else if(H===-1&&Df[$]===1){if(W===-1)W=j}else if(W!==-1&&($===32||$===9)){if(H===-1)H=j}else if($===59||$===44){if(W===-1)throw new SyntaxError(`Unexpected character at index ${j}`);if(H===-1)H=j;let K=f.slice(W,H);if(X)K=K.replace(/\\/g,""),X=!1;if(L1(J,z,K),$===44)L1(v,G,J),J=Object.create(null),G=void 0;z=void 0,W=H=-1}else throw new SyntaxError(`Unexpected character at index ${j}`);if(W===-1||Y||$===32||$===9)throw new SyntaxError("Unexpected end of input");if(H===-1)H=j;let N=f.slice(W,H);if(G===void 0)L1(v,N,J);else{if(z===void 0)L1(J,N,!0);else if(X)L1(J,z,N.replace(/\\/g,""));else L1(J,z,N);L1(v,G,J)}return v}function iG(f){return Object.keys(f).map((v)=>{let J=f[v];if(!Array.isArray(J))J=[J];return J.map((X)=>{return[v].concat(Object.keys(X).map((Q)=>{let Y=X[Q];if(!Array.isArray(Y))Y=[Y];return Y.map((G)=>G===!0?Q:`${Q}=${G}`).join("; ")})).join("; ")}).join(", ")}).join(", ")}X7.exports={format:iG,parse:dG}});var gQ=r((YH,V7)=>{var sG=require("events"),oG=require("https"),tG=require("http"),z7=require("net"),eG=require("tls"),{randomBytes:vz,createHash:fz}=require("crypto"),{Duplex:JH,Readable:XH}=require("stream"),{URL:s8}=require("url"),o1=Vf(),Qz=a8(),Jz=n8(),{isBlob:Xz}=m0(),{BINARY_TYPES:Y7,EMPTY_BUFFER:SQ,GUID:Yz,kForOnEventAttribute:o8,kListener:Gz,kStatusCode:zz,kWebSocket:yv,NOOP:W7}=I1(),{EventTarget:{addEventListener:Wz,removeEventListener:Bz}}=J7(),{format:$z,parse:Kz}=i8(),{toBuffer:jz}=Hf(),B7=Symbol("kAborted"),t8=[8,13],Z1=["CONNECTING","OPEN","CLOSING","CLOSED"],Hz=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class i extends sG{constructor(f,v,J){super();if(this._binaryType=Y7[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=SQ,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=i.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,f!==null){if(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,v===void 0)v=[];else if(!Array.isArray(v))if(typeof v==="object"&&v!==null)J=v,v=[];else v=[v];$7(this,f,v,J)}else this._autoPong=J.autoPong,this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(f){if(!Y7.includes(f))return;if(this._binaryType=f,this._receiver)this._receiver._binaryType=f}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(f,v,J){let X=new Qz({allowSynchronousEvents:J.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:J.maxPayload,skipUTF8Validation:J.skipUTF8Validation}),Q=new Jz(f,this._extensions,J.generateMask);if(this._receiver=X,this._sender=Q,this._socket=f,X[yv]=this,Q[yv]=this,f[yv]=this,X.on("conclude",Vz),X.on("drain",Nz),X.on("error",Mz),X.on("message",Dz),X.on("ping",Oz),X.on("pong",Lz),Q.onerror=Az,f.setTimeout)f.setTimeout(0);if(f.setNoDelay)f.setNoDelay();if(v.length>0)f.unshift(v);f.on("close",H7),f.on("data",IQ),f.on("end",q7),f.on("error",P7),this._readyState=i.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[o1.extensionName])this._extensions[o1.extensionName].cleanup();this._receiver.removeAllListeners(),this._readyState=i.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(f,v){if(this.readyState===i.CLOSED)return;if(this.readyState===i.CONNECTING){ov(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===i.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted))this._socket.end();return}this._readyState=i.CLOSING,this._sender.close(f,v,!this._isServer,(J)=>{if(J)return;if(this._closeFrameSent=!0,this._closeFrameReceived||this._receiver._writableState.errorEmitted)this._socket.end()}),j7(this)}pause(){if(this.readyState===i.CONNECTING||this.readyState===i.CLOSED)return;this._paused=!0,this._socket.pause()}ping(f,v,J){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof f==="function")J=f,f=v=void 0;else if(typeof v==="function")J=v,v=void 0;if(typeof f==="number")f=f.toString();if(this.readyState!==i.OPEN){e8(this,f,J);return}if(v===void 0)v=!this._isServer;this._sender.ping(f||SQ,v,J)}pong(f,v,J){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof f==="function")J=f,f=v=void 0;else if(typeof v==="function")J=v,v=void 0;if(typeof f==="number")f=f.toString();if(this.readyState!==i.OPEN){e8(this,f,J);return}if(v===void 0)v=!this._isServer;this._sender.pong(f||SQ,v,J)}resume(){if(this.readyState===i.CONNECTING||this.readyState===i.CLOSED)return;if(this._paused=!1,!this._receiver._writableState.needDrain)this._socket.resume()}send(f,v,J){if(this.readyState===i.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof v==="function")J=v,v={};if(typeof f==="number")f=f.toString();if(this.readyState!==i.OPEN){e8(this,f,J);return}let X={binary:typeof f!=="string",mask:!this._isServer,compress:!0,fin:!0,...v};if(!this._extensions[o1.extensionName])X.compress=!1;this._sender.send(f||SQ,X,J)}terminate(){if(this.readyState===i.CLOSED)return;if(this.readyState===i.CONNECTING){ov(this,this._req,"WebSocket was closed before the connection was established");return}if(this._socket)this._readyState=i.CLOSING,this._socket.destroy()}}Object.defineProperty(i,"CONNECTING",{enumerable:!0,value:Z1.indexOf("CONNECTING")});Object.defineProperty(i.prototype,"CONNECTING",{enumerable:!0,value:Z1.indexOf("CONNECTING")});Object.defineProperty(i,"OPEN",{enumerable:!0,value:Z1.indexOf("OPEN")});Object.defineProperty(i.prototype,"OPEN",{enumerable:!0,value:Z1.indexOf("OPEN")});Object.defineProperty(i,"CLOSING",{enumerable:!0,value:Z1.indexOf("CLOSING")});Object.defineProperty(i.prototype,"CLOSING",{enumerable:!0,value:Z1.indexOf("CLOSING")});Object.defineProperty(i,"CLOSED",{enumerable:!0,value:Z1.indexOf("CLOSED")});Object.defineProperty(i.prototype,"CLOSED",{enumerable:!0,value:Z1.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((f)=>{Object.defineProperty(i.prototype,f,{enumerable:!0})});["open","error","close","message"].forEach((f)=>{Object.defineProperty(i.prototype,`on${f}`,{enumerable:!0,get(){for(let v of this.listeners(f))if(v[o8])return v[Gz];return null},set(v){for(let J of this.listeners(f))if(J[o8]){this.removeListener(f,J);break}if(typeof v!=="function")return;this.addEventListener(f,v,{[o8]:!0})}})});i.prototype.addEventListener=Wz;i.prototype.removeEventListener=Bz;V7.exports=i;function $7(f,v,J,X){let Q={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:t8[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...X,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(f._autoPong=Q.autoPong,!t8.includes(Q.protocolVersion))throw new RangeError(`Unsupported protocol version: ${Q.protocolVersion} (supported versions: ${t8.join(", ")})`);let Y;if(v instanceof s8)Y=v;else try{Y=new s8(v)}catch(M){throw new SyntaxError(`Invalid URL: ${v}`)}if(Y.protocol==="http:")Y.protocol="ws:";else if(Y.protocol==="https:")Y.protocol="wss:";f._url=Y.href;let G=Y.protocol==="wss:",z=Y.protocol==="ws+unix:",W;if(Y.protocol!=="ws:"&&!G&&!z)W=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`;else if(z&&!Y.pathname)W="The URL's pathname is empty";else if(Y.hash)W="The URL contains a fragment identifier";if(W){let M=new SyntaxError(W);if(f._redirects===0)throw M;else{yQ(f,M);return}}let $=G?443:80,H=vz(16).toString("base64"),j=G?oG.request:tG.request,N=new Set,K;if(Q.createConnection=Q.createConnection||(G?Pz:qz),Q.defaultPort=Q.defaultPort||$,Q.port=Y.port||$,Q.host=Y.hostname.startsWith("[")?Y.hostname.slice(1,-1):Y.hostname,Q.headers={...Q.headers,"Sec-WebSocket-Version":Q.protocolVersion,"Sec-WebSocket-Key":H,Connection:"Upgrade",Upgrade:"websocket"},Q.path=Y.pathname+Y.search,Q.timeout=Q.handshakeTimeout,Q.perMessageDeflate)K=new o1(Q.perMessageDeflate!==!0?Q.perMessageDeflate:{},!1,Q.maxPayload),Q.headers["Sec-WebSocket-Extensions"]=$z({[o1.extensionName]:K.offer()});if(J.length){for(let M of J){if(typeof M!=="string"||!Hz.test(M)||N.has(M))throw new SyntaxError("An invalid or duplicated subprotocol was specified");N.add(M)}Q.headers["Sec-WebSocket-Protocol"]=J.join(",")}if(Q.origin)if(Q.protocolVersion<13)Q.headers["Sec-WebSocket-Origin"]=Q.origin;else Q.headers.Origin=Q.origin;if(Y.username||Y.password)Q.auth=`${Y.username}:${Y.password}`;if(z){let M=Q.path.split(":");Q.socketPath=M[0],Q.path=M[1]}let q;if(Q.followRedirects){if(f._redirects===0){f._originalIpc=z,f._originalSecure=G,f._originalHostOrSocketPath=z?Q.socketPath:Y.host;let M=X&&X.headers;if(X={...X,headers:{}},M)for(let[V,L]of Object.entries(M))X.headers[V.toLowerCase()]=L}else if(f.listenerCount("redirect")===0){let M=z?f._originalIpc?Q.socketPath===f._originalHostOrSocketPath:!1:f._originalIpc?!1:Y.host===f._originalHostOrSocketPath;if(!M||f._originalSecure&&!G){if(delete Q.headers.authorization,delete Q.headers.cookie,!M)delete Q.headers.host;Q.auth=void 0}}if(Q.auth&&!X.headers.authorization)X.headers.authorization="Basic "+Buffer.from(Q.auth).toString("base64");if(q=f._req=j(Q),f._redirects)f.emit("redirect",f.url,q)}else q=f._req=j(Q);if(Q.timeout)q.on("timeout",()=>{ov(f,q,"Opening handshake has timed out")});if(q.on("error",(M)=>{if(q===null||q[B7])return;q=f._req=null,yQ(f,M)}),q.on("response",(M)=>{let V=M.headers.location,L=M.statusCode;if(V&&Q.followRedirects&&L>=300&&L<400){if(++f._redirects>Q.maxRedirects){ov(f,q,"Maximum redirects exceeded");return}q.abort();let F;try{F=new s8(V,v)}catch(w){let h=new SyntaxError(`Invalid URL: ${V}`);yQ(f,h);return}$7(f,F,J,X)}else if(!f.emit("unexpected-response",q,M))ov(f,q,`Unexpected server response: ${M.statusCode}`)}),q.on("upgrade",(M,V,L)=>{if(f.emit("upgrade",M),f.readyState!==i.CONNECTING)return;q=f._req=null;let F=M.headers.upgrade;if(F===void 0||F.toLowerCase()!=="websocket"){ov(f,V,"Invalid Upgrade header");return}let w=fz("sha1").update(H+Yz).digest("base64");if(M.headers["sec-websocket-accept"]!==w){ov(f,V,"Invalid Sec-WebSocket-Accept header");return}let h=M.headers["sec-websocket-protocol"],E;if(h!==void 0){if(!N.size)E="Server sent a subprotocol but none was requested";else if(!N.has(h))E="Server sent an invalid subprotocol"}else if(N.size)E="Server sent no subprotocol";if(E){ov(f,V,E);return}if(h)f._protocol=h;let R=M.headers["sec-websocket-extensions"];if(R!==void 0){if(!K){ov(f,V,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let b;try{b=Kz(R)}catch(g){ov(f,V,"Invalid Sec-WebSocket-Extensions header");return}let l=Object.keys(b);if(l.length!==1||l[0]!==o1.extensionName){ov(f,V,"Server indicated an extension that was not requested");return}try{K.accept(b[o1.extensionName])}catch(g){ov(f,V,"Invalid Sec-WebSocket-Extensions header");return}f._extensions[o1.extensionName]=K}f.setSocket(V,L,{allowSynchronousEvents:Q.allowSynchronousEvents,generateMask:Q.generateMask,maxPayload:Q.maxPayload,skipUTF8Validation:Q.skipUTF8Validation})}),Q.finishRequest)Q.finishRequest(q,f);else q.end()}function yQ(f,v){f._readyState=i.CLOSING,f._errorEmitted=!0,f.emit("error",v),f.emitClose()}function qz(f){return f.path=f.socketPath,z7.connect(f)}function Pz(f){if(f.path=void 0,!f.servername&&f.servername!=="")f.servername=z7.isIP(f.host)?"":f.host;return eG.connect(f)}function ov(f,v,J){f._readyState=i.CLOSING;let X=new Error(J);if(Error.captureStackTrace(X,ov),v.setHeader){if(v[B7]=!0,v.abort(),v.socket&&!v.socket.destroyed)v.socket.destroy();process.nextTick(yQ,f,X)}else v.destroy(X),v.once("error",f.emit.bind(f,"error")),v.once("close",f.emitClose.bind(f))}function e8(f,v,J){if(v){let X=Xz(v)?v.size:jz(v).length;if(f._socket)f._sender._bufferedBytes+=X;else f._bufferedAmount+=X}if(J){let X=new Error(`WebSocket is not open: readyState ${f.readyState} (${Z1[f.readyState]})`);process.nextTick(J,X)}}function Vz(f,v){let J=this[yv];if(J._closeFrameReceived=!0,J._closeMessage=v,J._closeCode=f,J._socket[yv]===void 0)return;if(J._socket.removeListener("data",IQ),process.nextTick(K7,J._socket),f===1005)J.close();else J.close(f,v)}function Nz(){let f=this[yv];if(!f.isPaused)f._socket.resume()}function Mz(f){let v=this[yv];if(v._socket[yv]!==void 0)v._socket.removeListener("data",IQ),process.nextTick(K7,v._socket),v.close(f[zz]);if(!v._errorEmitted)v._errorEmitted=!0,v.emit("error",f)}function G7(){this[yv].emitClose()}function Dz(f,v){this[yv].emit("message",f,v)}function Oz(f){let v=this[yv];if(v._autoPong)v.pong(f,!this._isServer,W7);v.emit("ping",f)}function Lz(f){this[yv].emit("pong",f)}function K7(f){f.resume()}function Az(f){let v=this[yv];if(v.readyState===i.CLOSED)return;if(v.readyState===i.OPEN)v._readyState=i.CLOSING,j7(v);if(this._socket.end(),!v._errorEmitted)v._errorEmitted=!0,v.emit("error",f)}function j7(f){f._closeTimer=setTimeout(f._socket.destroy.bind(f._socket),30000)}function H7(){let f=this[yv];this.removeListener("close",H7),this.removeListener("data",IQ),this.removeListener("end",q7),f._readyState=i.CLOSING;let v;if(!this._readableState.endEmitted&&!f._closeFrameReceived&&!f._receiver._writableState.errorEmitted&&(v=f._socket.read())!==null)f._receiver.write(v);if(f._receiver.end(),this[yv]=void 0,clearTimeout(f._closeTimer),f._receiver._writableState.finished||f._receiver._writableState.errorEmitted)f.emitClose();else f._receiver.on("error",G7),f._receiver.on("finish",G7)}function IQ(f){if(!this[yv]._receiver.write(f))this.pause()}function q7(){let f=this[yv];f._readyState=i.CLOSING,f._receiver.end(),this.end()}function P7(){let f=this[yv];if(this.removeListener("error",P7),this.on("error",W7),f)f._readyState=i.CLOSING,this.destroy()}});var O7=r((zH,D7)=>{var GH=gQ(),{Duplex:wz}=require("stream");function N7(f){f.emit("close")}function Uz(){if(!this.destroyed&&this._writableState.finished)this.destroy()}function M7(f){if(this.removeListener("error",M7),this.destroy(),this.listenerCount("error")===0)this.emit("error",f)}function Fz(f,v){let J=!0,X=new wz({...v,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return f.on("message",function Q(Y,G){let z=!G&&X._readableState.objectMode?Y.toString():Y;if(!X.push(z))f.pause()}),f.once("error",function Q(Y){if(X.destroyed)return;J=!1,X.destroy(Y)}),f.once("close",function Q(){if(X.destroyed)return;X.push(null)}),X._destroy=function(Q,Y){if(f.readyState===f.CLOSED){Y(Q),process.nextTick(N7,X);return}let G=!1;if(f.once("error",function z(W){G=!0,Y(W)}),f.once("close",function z(){if(!G)Y(Q);process.nextTick(N7,X)}),J)f.terminate()},X._final=function(Q){if(f.readyState===f.CONNECTING){f.once("open",function Y(){X._final(Q)});return}if(f._socket===null)return;if(f._socket._writableState.finished){if(Q(),X._readableState.endEmitted)X.destroy()}else f._socket.once("finish",function Y(){Q()}),f.close()},X._read=function(){if(f.isPaused)f.resume()},X._write=function(Q,Y,G){if(f.readyState===f.CONNECTING){f.once("open",function z(){X._write(Q,Y,G)});return}f.send(Q,G)},X.on("end",Uz),X.on("error",M7),X}D7.exports=Fz});var A7=r((WH,L7)=>{var{tokenChars:hz}=m0();function Ez(f){let v=new Set,J=-1,X=-1,Q=0;for(Q;Q<f.length;Q++){let G=f.charCodeAt(Q);if(X===-1&&hz[G]===1){if(J===-1)J=Q}else if(Q!==0&&(G===32||G===9)){if(X===-1&&J!==-1)X=Q}else if(G===44){if(J===-1)throw new SyntaxError(`Unexpected character at index ${Q}`);if(X===-1)X=Q;let z=f.slice(J,X);if(v.has(z))throw new SyntaxError(`The "${z}" subprotocol is duplicated`);v.add(z),J=X=-1}else throw new SyntaxError(`Unexpected character at index ${Q}`)}if(J===-1||X!==-1)throw new SyntaxError("Unexpected end of input");let Y=f.slice(J,Q);if(v.has(Y))throw new SyntaxError(`The "${Y}" subprotocol is duplicated`);return v.add(Y),v}L7.exports={parse:Ez}});var E7=r(($H,h7)=>{var _z=require("events"),ZQ=require("http"),{Duplex:BH}=require("stream"),{createHash:Rz}=require("crypto"),w7=i8(),P0=Vf(),Sz=A7(),yz=gQ(),{GUID:Iz,kWebSocket:gz}=I1(),Zz=/^[+/0-9A-Za-z]{22}==$/;class F7 extends _z{constructor(f,v){super();if(f={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:yz,...f},f.port==null&&!f.server&&!f.noServer||f.port!=null&&(f.server||f.noServer)||f.server&&f.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(f.port!=null)this._server=ZQ.createServer((J,X)=>{let Q=ZQ.STATUS_CODES[426];X.writeHead(426,{"Content-Length":Q.length,"Content-Type":"text/plain"}),X.end(Q)}),this._server.listen(f.port,f.host,f.backlog,v);else if(f.server)this._server=f.server;if(this._server){let J=this.emit.bind(this,"connection");this._removeListeners=Cz(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(X,Q,Y)=>{this.handleUpgrade(X,Q,Y,J)}})}if(f.perMessageDeflate===!0)f.perMessageDeflate={};if(f.clientTracking)this.clients=new Set,this._shouldEmitClose=!1;this.options=f,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');if(!this._server)return null;return this._server.address()}close(f){if(this._state===2){if(f)this.once("close",()=>{f(new Error("The server is not running"))});process.nextTick(Of,this);return}if(f)this.once("close",f);if(this._state===1)return;if(this._state=1,this.options.noServer||this.options.server){if(this._server)this._removeListeners(),this._removeListeners=this._server=null;if(this.clients)if(!this.clients.size)process.nextTick(Of,this);else this._shouldEmitClose=!0;else process.nextTick(Of,this)}else{let v=this._server;this._removeListeners(),this._removeListeners=this._server=null,v.close(()=>{Of(this)})}}shouldHandle(f){if(this.options.path){let v=f.url.indexOf("?");if((v!==-1?f.url.slice(0,v):f.url)!==this.options.path)return!1}return!0}handleUpgrade(f,v,J,X){v.on("error",U7);let Q=f.headers["sec-websocket-key"],Y=f.headers.upgrade,G=+f.headers["sec-websocket-version"];if(f.method!=="GET"){V0(this,f,v,405,"Invalid HTTP method");return}if(Y===void 0||Y.toLowerCase()!=="websocket"){V0(this,f,v,400,"Invalid Upgrade header");return}if(Q===void 0||!Zz.test(Q)){V0(this,f,v,400,"Missing or invalid Sec-WebSocket-Key header");return}if(G!==8&&G!==13){V0(this,f,v,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(f)){Lf(v,400);return}let z=f.headers["sec-websocket-protocol"],W=new Set;if(z!==void 0)try{W=Sz.parse(z)}catch(j){V0(this,f,v,400,"Invalid Sec-WebSocket-Protocol header");return}let $=f.headers["sec-websocket-extensions"],H={};if(this.options.perMessageDeflate&&$!==void 0){let j=new P0(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let N=w7.parse($);if(N[P0.extensionName])j.accept(N[P0.extensionName]),H[P0.extensionName]=j}catch(N){V0(this,f,v,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let j={origin:f.headers[`${G===8?"sec-websocket-origin":"origin"}`],secure:!!(f.socket.authorized||f.socket.encrypted),req:f};if(this.options.verifyClient.length===2){this.options.verifyClient(j,(N,K,q,M)=>{if(!N)return Lf(v,K||401,q,M);this.completeUpgrade(H,Q,W,f,v,J,X)});return}if(!this.options.verifyClient(j))return Lf(v,401)}this.completeUpgrade(H,Q,W,f,v,J,X)}completeUpgrade(f,v,J,X,Q,Y,G){if(!Q.readable||!Q.writable)return Q.destroy();if(Q[gz])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return Lf(Q,503);let W=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Rz("sha1").update(v+Iz).digest("base64")}`],$=new this.options.WebSocket(null,void 0,this.options);if(J.size){let H=this.options.handleProtocols?this.options.handleProtocols(J,X):J.values().next().value;if(H)W.push(`Sec-WebSocket-Protocol: ${H}`),$._protocol=H}if(f[P0.extensionName]){let H=f[P0.extensionName].params,j=w7.format({[P0.extensionName]:[H]});W.push(`Sec-WebSocket-Extensions: ${j}`),$._extensions=f}if(this.emit("headers",W,X),Q.write(W.concat(`\r
`).join(`\r
`)),Q.removeListener("error",U7),$.setSocket(Q,Y,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients)this.clients.add($),$.on("close",()=>{if(this.clients.delete($),this._shouldEmitClose&&!this.clients.size)process.nextTick(Of,this)});G($,X)}}h7.exports=F7;function Cz(f,v){for(let J of Object.keys(v))f.on(J,v[J]);return function J(){for(let X of Object.keys(v))f.removeListener(X,v[X])}}function Of(f){f._state=2,f.emit("close")}function U7(){this.destroy()}function Lf(f,v,J,X){J=J||ZQ.STATUS_CODES[v],X={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(J),...X},f.once("finish",f.destroy),f.end(`HTTP/1.1 ${v} ${ZQ.STATUS_CODES[v]}\r
`+Object.keys(X).map((Q)=>`${Q}: ${X[Q]}`).join(`\r
`)+`\r
\r
`+J)}function V0(f,v,J,X,Q){if(f.listenerCount("wsClientError")){let Y=new Error(Q);Error.captureStackTrace(Y,V0),f.emit("wsClientError",Y,J,v)}else Lf(J,X,Q)}});var az={};A9(az,{deactivate:()=>rz,activate:()=>uz});module.exports=BY(az);var A1=Kv(require("vscode"));var Wv=Kv(require("vscode")),Ef=Kv(require("path"));var h9=Kv(require("vscode"));var P1=Kv(require("node:child_process"));async function w9(){return new Promise(async(f)=>{try{let v=process.platform==="win32"?P1.spawn("powershell.exe",["-NoProfile","-Command",`Get-CimInstance Win32_Process | Where-Object { $_.CommandLine -match '(node.*bin/claude|/claude|\\$claude)(\\$| )' -and $_.CommandLine -notmatch 'grep' } | ForEach-Object { "$($_.ProcessId) $($_.ParentProcessId)" }`]):P1.spawn("bash",["-c",'ps -eo pid,ppid,command | grep -E "(node.*bin/claude|/claude|$claude)($| )" | grep -v "grep" || echo "no_claude_found"']),J="";v.stdout.on("data",(X)=>{J+=X.toString()}),v.on("close",()=>{if(J.includes("no_claude_found")||J.trim()===""){console.log("No Claude processes found running"),f([]);return}let X=[];if(process.platform==="win32")X=J.trim().split(/\r?\n/).filter((Q)=>Q.trim()).map((Q)=>{let Y=Q.trim().split(/\s+/);return{pid:Y[0],ppid:Y[1]}});else X=J.trim().split(/\r?\n/).map((Q)=>{let Y=Q.trim().split(/\s+/);return{pid:Y[0],ppid:Y[1]}});console.log(`Found ${X.length} Claude processes running`),f(X)}),v.on("error",(X)=>{console.error(`Error checking for Claude processes: ${X}`),f([])})}catch(v){console.error(`Error in process check: ${v}`),f([])}})}async function U9(f){let v="",J=process.platform==="win32"?P1.spawn("powershell.exe",["-NoProfile","-Command",`$p=${f};while($p -gt 0){$p;$p=(Get-CimInstance Win32_Process -Filter "ProcessId=$p").ParentProcessId}`]):P1.spawn("bash",["-c",`pid=${f}; while [ "$pid" -ne 0 ]; do echo $pid; pid=$(ps -o ppid= -p $pid 2>/dev/null | tr -d ' '); [ -z "$pid" ] && break; done`]);return J.stdout.on("data",(X)=>{v+=X.toString()}),new Promise((X)=>{J.on("close",()=>{let Q=v.trim().split(/\r?\n/).map((Y)=>Y.trim()).filter((Y)=>Y.length>0);X(Q)}),J.on("error",(Q)=>{console.error(`Error getting process tree: ${Q}`),X([])})})}async function F9(f){return new Promise(async(v)=>{try{let J=process.platform==="win32"?P1.spawn("powershell.exe",["-NoProfile","-Command",`(Get-CimInstance Win32_Process -Filter "ParentProcessId=${f}").ProcessId`]):process.platform==="darwin"?P1.spawn("bash",["-c",`ps -eo pid,ppid | awk '$2 == ${f} {print $1}'`]):P1.spawn("bash",["-c",`ps -o pid= --ppid ${f}`]),X="";J.stdout.on("data",(Q)=>{X+=Q.toString()}),J.on("close",()=>{let Q=X.trim().split(/\r?\n/).map((Y)=>Y.trim()).filter((Y)=>Y.length>0);v(Q)}),J.on("error",(Q)=>{console.error(`Error finding children: ${Q}`),v([])})}catch(J){console.error(`Error checking for child processes: ${J}`),v([])}})}async function lQ(f){return new Promise((v)=>{try{let J=process.platform==="win32"?P1.spawn("powershell.exe",["-NoProfile","-Command",`(Get-CimInstance Win32_Process -Filter "ProcessId=${f}").CommandLine`]):P1.spawn("bash",["-c",`ps -p ${f} -o command=`]),X="";J.stdout.on("data",(Q)=>{X+=Q.toString()}),J.on("close",()=>{v(X.trim())}),J.on("error",(Q)=>{console.error(`Error getting process command: ${Q}`),v("")})}catch(J){console.error(`Error checking process command: ${J}`),v("")}})}function mQ(f){return f.includes("bash")||f.includes("sh")||f.includes("zsh")||f.includes("cmd.exe")||f.includes("powershell")}async function E9(f,v){let J={claudeRunning:!1,terminalProcessTree:[],runningClaudeProcesses:[],isChildOfThisTerminal:!1};try{let X=await v.processId;if(!X)return f.info("Could not get terminal process ID"),J;J.runningClaudeProcesses=await w9();let Q=J.runningClaudeProcesses.length>0;J.terminalProcessTree=await U9(X);let Y=await F9(X);for(let G of J.runningClaudeProcesses){if(G.ppid===X.toString()){J.isChildOfThisTerminal=!0;break}if(Y.includes(G.ppid)){J.isChildOfThisTerminal=!0;break}let z=G.ppid;if(z===X.toString()){J.isChildOfThisTerminal=!0;break}if(X.toString()===z){J.isChildOfThisTerminal=!0;break}try{let W=await lQ(z);if(mQ(W)){if(v.name!=="Claude Code")if(X.toString()===z)J.isChildOfThisTerminal=!0;else{let $=await lQ(X.toString());if(mQ($)&&v.name!=="Claude Code")J.isChildOfThisTerminal=!0}}}catch(W){f.error(`Error checking Claude's parent process: ${W}`)}if(J.isChildOfThisTerminal)break}if(!J.isChildOfThisTerminal&&v.name==="Claude Code")return J.claudeRunning=!1,J;if(Q&&J.isChildOfThisTerminal)J.claudeRunning=!0;else J.claudeRunning=!1;return J}catch(X){return f.error("Error checking if Claude is running:",X),J}}function _1(){try{let f=h9.window.activeTerminal;if(f)f.show()}catch(f){console.error("Error focusing terminal:",f)}}var rv=Kv(require("vscode"));function $Y(f,v,J){let X="",Q="",Y="";if(!v.isEmpty){let G=f.lineAt(v.start.line),z=f.lineAt(v.end.line);if(X=G.text.trim(),Q=z.text.trim(),v.start.line===v.end.line)Y=`line ${v.start.line+1}`;else Y=`lines ${v.start.line+1}-${v.end.line+1}`}else if(J){let G=f.lineAt(J.start.line),z=f.lineAt(J.end.line);X=G.text.trim(),Q=z.text.trim();let $=f.lineAt(v.active.line).text.trim();if(J.start.line===J.end.line)Y=`line ${J.start.line+1}`;else Y=`lines ${J.start.line+1}-${J.end.line+1}`;if(v.active.line!==J.start.line&&v.active.line!==J.end.line)Y=`line ${v.active.line+1} (cursor)`,X=$,Q=$}return{rangeDescription:Y,firstLineText:X,lastLineText:Q}}function _9(f,v,J,X,Q,Y,G="",z){let{rangeDescription:W,firstLineText:$,lastLineText:H}=$Y(f,J,X),j="";if(z){let N=z.range.start.line+1;if(j=`Fix: ${z.severity===rv.DiagnosticSeverity.Error?"Error":z.severity===rv.DiagnosticSeverity.Warning?"Warning":z.severity===rv.DiagnosticSeverity.Information?"Info":"Hint"} in ${Q} line ${N}: ${z.message}`,G&&!G.includes(z.message))j+=`

Note: ${G}`}else if(G){if(j=`${G}

`,j+=`Context: ${Q} (${Y}), ${W}:`,$===H)j+=`
\`${$}\``;else j+=`
First line: \`${$}\``,j+=`
Last line: \`${H}\``;let K=rv.languages.getDiagnostics(f.uri).filter((q)=>X&&q.range.intersection(X)!==void 0);if(K.length>0)j+=`

There are ${K.length} issues in this section:`,K.forEach((q)=>{let M=q.range.start.line+1,V=q.severity===rv.DiagnosticSeverity.Error?"Error":q.severity===rv.DiagnosticSeverity.Warning?"Warning":"Issue";j+=`
- ${V} at line ${M}: ${q.message}`})}else{if(j=`Please analyze and fix issues in ${Q} (${Y}), ${W}:`,$===H)j+=`
\`${$}\``;else j+=`
First line: \`${$}\``,j+=`
Last line: \`${H}\``;let K=rv.languages.getDiagnostics(f.uri).filter((q)=>X&&q.range.intersection(X)!==void 0);if(K.length>0)j+=`

Found ${K.length} issues:`,K.forEach((q)=>{let M=q.range.start.line+1,V=q.severity===rv.DiagnosticSeverity.Error?"Error":q.severity===rv.DiagnosticSeverity.Warning?"Warning":"Issue";j+=`
- ${V} at line ${M}: ${q.message}`})}return j}var k9=Kv(b9());async function DY(f){let v,J=!1;for(let X of Wv.window.terminals)if(X.name==="Claude Code"){v=X;try{if(await X.processId){let Y=await E9(f,X);J=Y.claudeRunning,f.info("Claude running check result:",Y)}}catch(Q){f.error("Error checking if Claude is running:",Q)}break}if(v&&J)return f.info("Focusing existing Claude terminal"),v.show(),v}async function l9(f,v,J=!0,X){if(f.info("Creating new Claude terminal"),J)Wv.window.withProgress({location:Wv.ProgressLocation.Notification,title:"Claude Code launching...",cancellable:!1},async(G)=>{return new Promise((z)=>setTimeout(z,2000))});let Q=Wv.window.createTerminal({name:"Claude Code",iconPath:Wv.Uri.file(Ef.join(v.extensionPath,"resources","claude-logo.svg")),location:{viewColumn:Wv.ViewColumn.Beside},isTransient:!0});Wv.window.onDidEndTerminalShellExecution((G)=>{if(G.terminal===Q&&G.execution.commandLine.value.startsWith("claude "))f.info(`Claude terminal closed after executing ${G.execution.commandLine.value}`),Q.dispose()});let Y=!1;return Wv.window.onDidChangeTerminalShellIntegration(async(G)=>{let z="claude";if(X)z=k9.quote(["claude",X]);if(G.terminal===Q&&!Y)Y=!0,f.info("Terminal shell integration available"),G.shellIntegration.executeCommand(z)}),setTimeout(()=>{if(!Q.shellIntegration&&!Y)Y=!0,Q.sendText("claude")},3000),Q.show(),{terminal:Q,claudeRunning:!0}}function m9(f,v,J){let X=async()=>{try{await l9(f,v)}catch(Q){f.error("Error running Claude Code:",Q),Wv.window.showErrorMessage(`Failed to run Claude Code: ${Q}`)}};v.subscriptions.push(Wv.commands.registerCommand("claude-code.runClaude",()=>{J.logEvent("run_claude_command"),X()})),v.subscriptions.push(Wv.commands.registerCommand("claude-code.runClaude.keyboard",()=>{J.logEvent("run_claude_command_keyboard"),X()}))}var u9="claude-code.runQuickFix";function r9(f,v,J){let X=Wv.commands.registerCommand(u9,async(Q="",Y)=>{J.logEvent("quick_fix_command");try{let G=Wv.window.activeTextEditor;if(!G)throw new Error("No active text editor");let{document:z,selection:W}=G,$=z.uri.fsPath,H=z.languageId,j=Ef.basename($),N;if(!W.isEmpty)N=W;else{let M=G.selection.active.line,V=Math.max(0,M-3),L=Math.min(z.lineCount-1,M+3);N=new Wv.Range(new Wv.Position(V,0),new Wv.Position(L,z.lineAt(L).text.length))}let K=_9(z,G,W,N,j,H,Q,Y),q=await DY(f);if(q)q.show(),q.sendText(K);else{let{terminal:M}=await l9(f,v,!0,K);q=M}return setTimeout(()=>{q.sendText("")},1000),{success:!0,message:`Running Claude Code quick fix on ${$}`,hasSelection:!W.isEmpty}}catch(G){throw f.error("Error running quick fix with Claude Code:",G),Wv.window.showErrorMessage(`Failed to run quick fix: ${G}`),G}});v.subscriptions.push(X)}function p9(f){let v=new Wv.EventEmitter;return f.push(Wv.commands.registerCommand("claude-code.acceptProposedDiff",async()=>{let J=Wv.window.tabGroups.activeTabGroup.activeTab;v.fire({accepted:!0,activeTab:J}),_1()})),f.push(Wv.commands.registerCommand("claude-code.rejectProposedDiff",async()=>{let J=Wv.window.tabGroups.activeTabGroup.activeTab;v.fire({accepted:!1,activeTab:J}),_1()})),v.event}function a9(f){let v=new Wv.EventEmitter;return f.push(Wv.commands.registerCommand("claude-code.insertAtMentioned",async()=>{v.fire({}),_1()})),v.event}var cv=Kv(require("vscode")),I7=require("crypto");var B={};A9(B,{void:()=>J4,util:()=>fv,unknown:()=>f4,union:()=>z4,undefined:()=>tY,tuple:()=>$4,transformer:()=>O4,symbol:()=>oY,string:()=>vJ,strictObject:()=>G4,setErrorMap:()=>AY,set:()=>H4,record:()=>K4,quotelessJson:()=>OY,promise:()=>D4,preprocess:()=>w4,pipeline:()=>U4,ostring:()=>F4,optional:()=>L4,onumber:()=>h4,oboolean:()=>E4,objectUtil:()=>pQ,object:()=>Y4,number:()=>fJ,nullable:()=>A4,null:()=>eY,never:()=>Q4,nativeEnum:()=>M4,nan:()=>dY,map:()=>j4,makeIssue:()=>ff,literal:()=>V4,lazy:()=>P4,late:()=>cY,isValid:()=>b1,isDirty:()=>Rf,isAsync:()=>F0,isAborted:()=>_f,intersection:()=>B4,instanceof:()=>nY,getParsedType:()=>V1,getErrorMap:()=>U0,function:()=>q4,enum:()=>N4,effect:()=>O4,discriminatedUnion:()=>W4,defaultErrorMap:()=>R1,datetimeRegex:()=>o9,date:()=>sY,custom:()=>e9,coerce:()=>_4,boolean:()=>QJ,bigint:()=>iY,array:()=>X4,any:()=>v4,addIssueToContext:()=>T,ZodVoid:()=>Jf,ZodUnknown:()=>k1,ZodUnion:()=>y0,ZodUndefined:()=>R0,ZodType:()=>t,ZodTuple:()=>M1,ZodTransformer:()=>W1,ZodSymbol:()=>Qf,ZodString:()=>Y1,ZodSet:()=>W0,ZodSchema:()=>t,ZodRecord:()=>Xf,ZodReadonly:()=>b0,ZodPromise:()=>B0,ZodPipeline:()=>zf,ZodParsedType:()=>C,ZodOptional:()=>sv,ZodObject:()=>Lv,ZodNumber:()=>l1,ZodNullable:()=>y1,ZodNull:()=>S0,ZodNever:()=>N1,ZodNativeEnum:()=>C0,ZodNaN:()=>Gf,ZodMap:()=>Yf,ZodLiteral:()=>Z0,ZodLazy:()=>g0,ZodIssueCode:()=>S,ZodIntersection:()=>I0,ZodFunction:()=>E0,ZodFirstPartyTypeKind:()=>y,ZodError:()=>pv,ZodEnum:()=>u1,ZodEffects:()=>W1,ZodDiscriminatedUnion:()=>Sf,ZodDefault:()=>T0,ZodDate:()=>G0,ZodCatch:()=>x0,ZodBranded:()=>yf,ZodBoolean:()=>_0,ZodBigInt:()=>m1,ZodArray:()=>G1,ZodAny:()=>z0,Schema:()=>t,ParseStatus:()=>Zv,OK:()=>xv,NEVER:()=>R4,INVALID:()=>c,EMPTY_PATH:()=>wY,DIRTY:()=>Y0,BRAND:()=>aY});var fv;(function(f){f.assertEqual=(Q)=>{};function v(Q){}f.assertIs=v;function J(Q){throw new Error}f.assertNever=J,f.arrayToEnum=(Q)=>{let Y={};for(let G of Q)Y[G]=G;return Y},f.getValidEnumValues=(Q)=>{let Y=f.objectKeys(Q).filter((z)=>typeof Q[Q[z]]!=="number"),G={};for(let z of Y)G[z]=Q[z];return f.objectValues(G)},f.objectValues=(Q)=>{return f.objectKeys(Q).map(function(Y){return Q[Y]})},f.objectKeys=typeof Object.keys==="function"?(Q)=>Object.keys(Q):(Q)=>{let Y=[];for(let G in Q)if(Object.prototype.hasOwnProperty.call(Q,G))Y.push(G);return Y},f.find=(Q,Y)=>{for(let G of Q)if(Y(G))return G;return},f.isInteger=typeof Number.isInteger==="function"?(Q)=>Number.isInteger(Q):(Q)=>typeof Q==="number"&&Number.isFinite(Q)&&Math.floor(Q)===Q;function X(Q,Y=" | "){return Q.map((G)=>typeof G==="string"?`'${G}'`:G).join(Y)}f.joinValues=X,f.jsonStringifyReplacer=(Q,Y)=>{if(typeof Y==="bigint")return Y.toString();return Y}})(fv||(fv={}));var pQ;(function(f){f.mergeShapes=(v,J)=>{return{...v,...J}}})(pQ||(pQ={}));var C=fv.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),V1=(f)=>{switch(typeof f){case"undefined":return C.undefined;case"string":return C.string;case"number":return Number.isNaN(f)?C.nan:C.number;case"boolean":return C.boolean;case"function":return C.function;case"bigint":return C.bigint;case"symbol":return C.symbol;case"object":if(Array.isArray(f))return C.array;if(f===null)return C.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return C.promise;if(typeof Map!=="undefined"&&f instanceof Map)return C.map;if(typeof Set!=="undefined"&&f instanceof Set)return C.set;if(typeof Date!=="undefined"&&f instanceof Date)return C.date;return C.object;default:return C.unknown}};var S=fv.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),OY=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};class pv extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(J)=>{this.issues=[...this.issues,J]},this.addIssues=(J=[])=>{this.issues=[...this.issues,...J]};let v=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,v);else this.__proto__=v;this.name="ZodError",this.issues=f}format(f){let v=f||function(Q){return Q.message},J={_errors:[]},X=(Q)=>{for(let Y of Q.issues)if(Y.code==="invalid_union")Y.unionErrors.map(X);else if(Y.code==="invalid_return_type")X(Y.returnTypeError);else if(Y.code==="invalid_arguments")X(Y.argumentsError);else if(Y.path.length===0)J._errors.push(v(Y));else{let G=J,z=0;while(z<Y.path.length){let W=Y.path[z];if(z!==Y.path.length-1)G[W]=G[W]||{_errors:[]};else G[W]=G[W]||{_errors:[]},G[W]._errors.push(v(Y));G=G[W],z++}}};return X(this),J}static assert(f){if(!(f instanceof pv))throw new Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,fv.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(v)=>v.message){let v={},J=[];for(let X of this.issues)if(X.path.length>0){let Q=X.path[0];v[Q]=v[Q]||[],v[Q].push(f(X))}else J.push(f(X));return{formErrors:J,fieldErrors:v}}get formErrors(){return this.flatten()}}pv.create=(f)=>{return new pv(f)};var LY=(f,v)=>{let J;switch(f.code){case S.invalid_type:if(f.received===C.undefined)J="Required";else J=`Expected ${f.expected}, received ${f.received}`;break;case S.invalid_literal:J=`Invalid literal value, expected ${JSON.stringify(f.expected,fv.jsonStringifyReplacer)}`;break;case S.unrecognized_keys:J=`Unrecognized key(s) in object: ${fv.joinValues(f.keys,", ")}`;break;case S.invalid_union:J="Invalid input";break;case S.invalid_union_discriminator:J=`Invalid discriminator value. Expected ${fv.joinValues(f.options)}`;break;case S.invalid_enum_value:J=`Invalid enum value. Expected ${fv.joinValues(f.options)}, received '${f.received}'`;break;case S.invalid_arguments:J="Invalid function arguments";break;case S.invalid_return_type:J="Invalid function return type";break;case S.invalid_date:J="Invalid date";break;case S.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(J=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")J=`${J} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)J=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)J=`Invalid input: must end with "${f.validation.endsWith}"`;else fv.assertNever(f.validation);else if(f.validation!=="regex")J=`Invalid ${f.validation}`;else J="Invalid";break;case S.too_small:if(f.type==="array")J=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")J=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")J=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="bigint")J=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")J=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else J="Invalid input";break;case S.too_big:if(f.type==="array")J=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")J=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")J=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")J=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")J=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else J="Invalid input";break;case S.custom:J="Invalid input";break;case S.invalid_intersection_types:J="Intersection results could not be merged";break;case S.not_multiple_of:J=`Number must be a multiple of ${f.multipleOf}`;break;case S.not_finite:J="Number must be finite";break;default:J=v.defaultError,fv.assertNever(f)}return{message:J}},R1=LY;var c9=R1;function AY(f){c9=f}function U0(){return c9}var ff=(f)=>{let{data:v,path:J,errorMaps:X,issueData:Q}=f,Y=[...J,...Q.path||[]],G={...Q,path:Y};if(Q.message!==void 0)return{...Q,path:Y,message:Q.message};let z="",W=X.filter(($)=>!!$).slice().reverse();for(let $ of W)z=$(G,{data:v,defaultError:z}).message;return{...Q,path:Y,message:z}},wY=[];function T(f,v){let J=U0(),X=ff({issueData:v,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,J,J===R1?void 0:R1].filter((Q)=>!!Q)});f.common.issues.push(X)}class Zv{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,v){let J=[];for(let X of v){if(X.status==="aborted")return c;if(X.status==="dirty")f.dirty();J.push(X.value)}return{status:f.value,value:J}}static async mergeObjectAsync(f,v){let J=[];for(let X of v){let Q=await X.key,Y=await X.value;J.push({key:Q,value:Y})}return Zv.mergeObjectSync(f,J)}static mergeObjectSync(f,v){let J={};for(let X of v){let{key:Q,value:Y}=X;if(Q.status==="aborted")return c;if(Y.status==="aborted")return c;if(Q.status==="dirty")f.dirty();if(Y.status==="dirty")f.dirty();if(Q.value!=="__proto__"&&(typeof Y.value!=="undefined"||X.alwaysSet))J[Q.value]=Y.value}return{status:f.value,value:J}}}var c=Object.freeze({status:"aborted"}),Y0=(f)=>({status:"dirty",value:f}),xv=(f)=>({status:"valid",value:f}),_f=(f)=>f.status==="aborted",Rf=(f)=>f.status==="dirty",b1=(f)=>f.status==="valid",F0=(f)=>typeof Promise!=="undefined"&&f instanceof Promise;var p;(function(f){f.errToObj=(v)=>typeof v==="string"?{message:v}:v||{},f.toString=(v)=>typeof v==="string"?v:v?.message})(p||(p={}));class z1{constructor(f,v,J,X){this._cachedPath=[],this.parent=f,this.data=v,this._path=J,this._key=X}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var n9=(f,v)=>{if(b1(v))return{success:!0,data:v.value};else{if(!f.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let J=new pv(f.common.issues);return this._error=J,this._error}}}};function s(f){if(!f)return{};let{errorMap:v,invalid_type_error:J,required_error:X,description:Q}=f;if(v&&(J||X))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:Q};return{errorMap:(G,z)=>{let{message:W}=f;if(G.code==="invalid_enum_value")return{message:W??z.defaultError};if(typeof z.data==="undefined")return{message:W??X??z.defaultError};if(G.code!=="invalid_type")return{message:z.defaultError};return{message:W??J??z.defaultError}},description:Q}}class t{get description(){return this._def.description}_getType(f){return V1(f.data)}_getOrReturnCtx(f,v){return v||{common:f.parent.common,data:f.data,parsedType:V1(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new Zv,ctx:{common:f.parent.common,data:f.data,parsedType:V1(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let v=this._parse(f);if(F0(v))throw new Error("Synchronous parse encountered promise.");return v}_parseAsync(f){let v=this._parse(f);return Promise.resolve(v)}parse(f,v){let J=this.safeParse(f,v);if(J.success)return J.data;throw J.error}safeParse(f,v){let J={common:{issues:[],async:v?.async??!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:V1(f)},X=this._parseSync({data:f,path:J.path,parent:J});return n9(J,X)}"~validate"(f){let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:V1(f)};if(!this["~standard"].async)try{let J=this._parseSync({data:f,path:[],parent:v});return b1(J)?{value:J.value}:{issues:v.common.issues}}catch(J){if(J?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((J)=>b1(J)?{value:J.value}:{issues:v.common.issues})}async parseAsync(f,v){let J=await this.safeParseAsync(f,v);if(J.success)return J.data;throw J.error}async safeParseAsync(f,v){let J={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:V1(f)},X=this._parse({data:f,path:J.path,parent:J}),Q=await(F0(X)?X:Promise.resolve(X));return n9(J,Q)}refine(f,v){let J=(X)=>{if(typeof v==="string"||typeof v==="undefined")return{message:v};else if(typeof v==="function")return v(X);else return v};return this._refinement((X,Q)=>{let Y=f(X),G=()=>Q.addIssue({code:S.custom,...J(X)});if(typeof Promise!=="undefined"&&Y instanceof Promise)return Y.then((z)=>{if(!z)return G(),!1;else return!0});if(!Y)return G(),!1;else return!0})}refinement(f,v){return this._refinement((J,X)=>{if(!f(J))return X.addIssue(typeof v==="function"?v(J,X):v),!1;else return!0})}_refinement(f){return new W1({schema:this,typeName:y.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(v)=>this["~validate"](v)}}optional(){return sv.create(this,this._def)}nullable(){return y1.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return G1.create(this)}promise(){return B0.create(this,this._def)}or(f){return y0.create([this,f],this._def)}and(f){return I0.create(this,f,this._def)}transform(f){return new W1({...s(this._def),schema:this,typeName:y.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let v=typeof f==="function"?f:()=>f;return new T0({...s(this._def),innerType:this,defaultValue:v,typeName:y.ZodDefault})}brand(){return new yf({typeName:y.ZodBranded,type:this,...s(this._def)})}catch(f){let v=typeof f==="function"?f:()=>f;return new x0({...s(this._def),innerType:this,catchValue:v,typeName:y.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return zf.create(this,f)}readonly(){return b0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var UY=/^c[^\s-]{8,}$/i,FY=/^[0-9a-z]+$/,hY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_Y=/^[a-z0-9_-]{21}$/i,RY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",aQ,gY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ZY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,CY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,i9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kY=new RegExp(`^${i9}$`);function s9(f){let v="[0-5]\\d";if(f.precision)v=`${v}\\.\\d{${f.precision}}`;else if(f.precision==null)v=`${v}(\\.\\d+)?`;let J=f.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${v})${J}`}function lY(f){return new RegExp(`^${s9(f)}$`)}function o9(f){let v=`${i9}T${s9(f)}`,J=[];if(J.push(f.local?"Z?":"Z"),f.offset)J.push("([+-]\\d{2}:?\\d{2})");return v=`${v}(${J.join("|")})`,new RegExp(`^${v}$`)}function mY(f,v){if((v==="v4"||!v)&&gY.test(f))return!0;if((v==="v6"||!v)&&CY.test(f))return!0;return!1}function uY(f,v){if(!RY.test(f))return!1;try{let[J]=f.split(".");if(!J)return!1;let X=J.replace(/-/g,"+").replace(/_/g,"/").padEnd(J.length+(4-J.length%4)%4,"="),Q=JSON.parse(atob(X));if(typeof Q!=="object"||Q===null)return!1;if("typ"in Q&&Q?.typ!=="JWT")return!1;if(!Q.alg)return!1;if(v&&Q.alg!==v)return!1;return!0}catch{return!1}}function rY(f,v){if((v==="v4"||!v)&&ZY.test(f))return!0;if((v==="v6"||!v)&&TY.test(f))return!0;return!1}class Y1 extends t{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==C.string){let Q=this._getOrReturnCtx(f);return T(Q,{code:S.invalid_type,expected:C.string,received:Q.parsedType}),c}let J=new Zv,X=void 0;for(let Q of this._def.checks)if(Q.kind==="min"){if(f.data.length<Q.value)X=this._getOrReturnCtx(f,X),T(X,{code:S.too_small,minimum:Q.value,type:"string",inclusive:!0,exact:!1,message:Q.message}),J.dirty()}else if(Q.kind==="max"){if(f.data.length>Q.value)X=this._getOrReturnCtx(f,X),T(X,{code:S.too_big,maximum:Q.value,type:"string",inclusive:!0,exact:!1,message:Q.message}),J.dirty()}else if(Q.kind==="length"){let Y=f.data.length>Q.value,G=f.data.length<Q.value;if(Y||G){if(X=this._getOrReturnCtx(f,X),Y)T(X,{code:S.too_big,maximum:Q.value,type:"string",inclusive:!0,exact:!0,message:Q.message});else if(G)T(X,{code:S.too_small,minimum:Q.value,type:"string",inclusive:!0,exact:!0,message:Q.message});J.dirty()}}else if(Q.kind==="email"){if(!yY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"email",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="emoji"){if(!aQ)aQ=new RegExp(IY,"u");if(!aQ.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"emoji",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="uuid"){if(!EY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"uuid",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="nanoid"){if(!_Y.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"nanoid",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="cuid"){if(!UY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"cuid",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="cuid2"){if(!FY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"cuid2",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="ulid"){if(!hY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"ulid",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="url")try{new URL(f.data)}catch{X=this._getOrReturnCtx(f,X),T(X,{validation:"url",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="regex"){if(Q.regex.lastIndex=0,!Q.regex.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"regex",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="trim")f.data=f.data.trim();else if(Q.kind==="includes"){if(!f.data.includes(Q.value,Q.position))X=this._getOrReturnCtx(f,X),T(X,{code:S.invalid_string,validation:{includes:Q.value,position:Q.position},message:Q.message}),J.dirty()}else if(Q.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(Q.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(Q.kind==="startsWith"){if(!f.data.startsWith(Q.value))X=this._getOrReturnCtx(f,X),T(X,{code:S.invalid_string,validation:{startsWith:Q.value},message:Q.message}),J.dirty()}else if(Q.kind==="endsWith"){if(!f.data.endsWith(Q.value))X=this._getOrReturnCtx(f,X),T(X,{code:S.invalid_string,validation:{endsWith:Q.value},message:Q.message}),J.dirty()}else if(Q.kind==="datetime"){if(!o9(Q).test(f.data))X=this._getOrReturnCtx(f,X),T(X,{code:S.invalid_string,validation:"datetime",message:Q.message}),J.dirty()}else if(Q.kind==="date"){if(!kY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{code:S.invalid_string,validation:"date",message:Q.message}),J.dirty()}else if(Q.kind==="time"){if(!lY(Q).test(f.data))X=this._getOrReturnCtx(f,X),T(X,{code:S.invalid_string,validation:"time",message:Q.message}),J.dirty()}else if(Q.kind==="duration"){if(!SY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"duration",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="ip"){if(!mY(f.data,Q.version))X=this._getOrReturnCtx(f,X),T(X,{validation:"ip",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="jwt"){if(!uY(f.data,Q.alg))X=this._getOrReturnCtx(f,X),T(X,{validation:"jwt",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="cidr"){if(!rY(f.data,Q.version))X=this._getOrReturnCtx(f,X),T(X,{validation:"cidr",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="base64"){if(!xY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"base64",code:S.invalid_string,message:Q.message}),J.dirty()}else if(Q.kind==="base64url"){if(!bY.test(f.data))X=this._getOrReturnCtx(f,X),T(X,{validation:"base64url",code:S.invalid_string,message:Q.message}),J.dirty()}else fv.assertNever(Q);return{status:J.value,value:f.data}}_regex(f,v,J){return this.refinement((X)=>f.test(X),{validation:v,code:S.invalid_string,...p.errToObj(J)})}_addCheck(f){return new Y1({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...p.errToObj(f)})}url(f){return this._addCheck({kind:"url",...p.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...p.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...p.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...p.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...p.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...p.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...p.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...p.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...p.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...p.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...p.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...p.errToObj(f)})}datetime(f){if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof f?.precision==="undefined"?null:f?.precision,offset:f?.offset??!1,local:f?.local??!1,...p.errToObj(f?.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof f?.precision==="undefined"?null:f?.precision,...p.errToObj(f?.message)})}duration(f){return this._addCheck({kind:"duration",...p.errToObj(f)})}regex(f,v){return this._addCheck({kind:"regex",regex:f,...p.errToObj(v)})}includes(f,v){return this._addCheck({kind:"includes",value:f,position:v?.position,...p.errToObj(v?.message)})}startsWith(f,v){return this._addCheck({kind:"startsWith",value:f,...p.errToObj(v)})}endsWith(f,v){return this._addCheck({kind:"endsWith",value:f,...p.errToObj(v)})}min(f,v){return this._addCheck({kind:"min",value:f,...p.errToObj(v)})}max(f,v){return this._addCheck({kind:"max",value:f,...p.errToObj(v)})}length(f,v){return this._addCheck({kind:"length",value:f,...p.errToObj(v)})}nonempty(f){return this.min(1,p.errToObj(f))}trim(){return new Y1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Y1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Y1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxLength(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}Y1.create=(f)=>{return new Y1({checks:[],typeName:y.ZodString,coerce:f?.coerce??!1,...s(f)})};function pY(f,v){let J=(f.toString().split(".")[1]||"").length,X=(v.toString().split(".")[1]||"").length,Q=J>X?J:X,Y=Number.parseInt(f.toFixed(Q).replace(".","")),G=Number.parseInt(v.toFixed(Q).replace(".",""));return Y%G/10**Q}class l1 extends t{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==C.number){let Q=this._getOrReturnCtx(f);return T(Q,{code:S.invalid_type,expected:C.number,received:Q.parsedType}),c}let J=void 0,X=new Zv;for(let Q of this._def.checks)if(Q.kind==="int"){if(!fv.isInteger(f.data))J=this._getOrReturnCtx(f,J),T(J,{code:S.invalid_type,expected:"integer",received:"float",message:Q.message}),X.dirty()}else if(Q.kind==="min"){if(Q.inclusive?f.data<Q.value:f.data<=Q.value)J=this._getOrReturnCtx(f,J),T(J,{code:S.too_small,minimum:Q.value,type:"number",inclusive:Q.inclusive,exact:!1,message:Q.message}),X.dirty()}else if(Q.kind==="max"){if(Q.inclusive?f.data>Q.value:f.data>=Q.value)J=this._getOrReturnCtx(f,J),T(J,{code:S.too_big,maximum:Q.value,type:"number",inclusive:Q.inclusive,exact:!1,message:Q.message}),X.dirty()}else if(Q.kind==="multipleOf"){if(pY(f.data,Q.value)!==0)J=this._getOrReturnCtx(f,J),T(J,{code:S.not_multiple_of,multipleOf:Q.value,message:Q.message}),X.dirty()}else if(Q.kind==="finite"){if(!Number.isFinite(f.data))J=this._getOrReturnCtx(f,J),T(J,{code:S.not_finite,message:Q.message}),X.dirty()}else fv.assertNever(Q);return{status:X.value,value:f.data}}gte(f,v){return this.setLimit("min",f,!0,p.toString(v))}gt(f,v){return this.setLimit("min",f,!1,p.toString(v))}lte(f,v){return this.setLimit("max",f,!0,p.toString(v))}lt(f,v){return this.setLimit("max",f,!1,p.toString(v))}setLimit(f,v,J,X){return new l1({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:J,message:p.toString(X)}]})}_addCheck(f){return new l1({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:p.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:p.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:p.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:p.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:p.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:p.toString(v)})}finite(f){return this._addCheck({kind:"finite",message:p.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:p.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:p.toString(f)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&fv.isInteger(f.value))}get isFinite(){let f=null,v=null;for(let J of this._def.checks)if(J.kind==="finite"||J.kind==="int"||J.kind==="multipleOf")return!0;else if(J.kind==="min"){if(v===null||J.value>v)v=J.value}else if(J.kind==="max"){if(f===null||J.value<f)f=J.value}return Number.isFinite(v)&&Number.isFinite(f)}}l1.create=(f)=>{return new l1({checks:[],typeName:y.ZodNumber,coerce:f?.coerce||!1,...s(f)})};class m1 extends t{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch{return this._getInvalidInput(f)}if(this._getType(f)!==C.bigint)return this._getInvalidInput(f);let J=void 0,X=new Zv;for(let Q of this._def.checks)if(Q.kind==="min"){if(Q.inclusive?f.data<Q.value:f.data<=Q.value)J=this._getOrReturnCtx(f,J),T(J,{code:S.too_small,type:"bigint",minimum:Q.value,inclusive:Q.inclusive,message:Q.message}),X.dirty()}else if(Q.kind==="max"){if(Q.inclusive?f.data>Q.value:f.data>=Q.value)J=this._getOrReturnCtx(f,J),T(J,{code:S.too_big,type:"bigint",maximum:Q.value,inclusive:Q.inclusive,message:Q.message}),X.dirty()}else if(Q.kind==="multipleOf"){if(f.data%Q.value!==BigInt(0))J=this._getOrReturnCtx(f,J),T(J,{code:S.not_multiple_of,multipleOf:Q.value,message:Q.message}),X.dirty()}else fv.assertNever(Q);return{status:X.value,value:f.data}}_getInvalidInput(f){let v=this._getOrReturnCtx(f);return T(v,{code:S.invalid_type,expected:C.bigint,received:v.parsedType}),c}gte(f,v){return this.setLimit("min",f,!0,p.toString(v))}gt(f,v){return this.setLimit("min",f,!1,p.toString(v))}lte(f,v){return this.setLimit("max",f,!0,p.toString(v))}lt(f,v){return this.setLimit("max",f,!1,p.toString(v))}setLimit(f,v,J,X){return new m1({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:J,message:p.toString(X)}]})}_addCheck(f){return new m1({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:p.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:p.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:p.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:p.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:p.toString(v)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}m1.create=(f)=>{return new m1({checks:[],typeName:y.ZodBigInt,coerce:f?.coerce??!1,...s(f)})};class _0 extends t{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==C.boolean){let J=this._getOrReturnCtx(f);return T(J,{code:S.invalid_type,expected:C.boolean,received:J.parsedType}),c}return xv(f.data)}}_0.create=(f)=>{return new _0({typeName:y.ZodBoolean,coerce:f?.coerce||!1,...s(f)})};class G0 extends t{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==C.date){let Q=this._getOrReturnCtx(f);return T(Q,{code:S.invalid_type,expected:C.date,received:Q.parsedType}),c}if(Number.isNaN(f.data.getTime())){let Q=this._getOrReturnCtx(f);return T(Q,{code:S.invalid_date}),c}let J=new Zv,X=void 0;for(let Q of this._def.checks)if(Q.kind==="min"){if(f.data.getTime()<Q.value)X=this._getOrReturnCtx(f,X),T(X,{code:S.too_small,message:Q.message,inclusive:!0,exact:!1,minimum:Q.value,type:"date"}),J.dirty()}else if(Q.kind==="max"){if(f.data.getTime()>Q.value)X=this._getOrReturnCtx(f,X),T(X,{code:S.too_big,message:Q.message,inclusive:!0,exact:!1,maximum:Q.value,type:"date"}),J.dirty()}else fv.assertNever(Q);return{status:J.value,value:new Date(f.data.getTime())}}_addCheck(f){return new G0({...this._def,checks:[...this._def.checks,f]})}min(f,v){return this._addCheck({kind:"min",value:f.getTime(),message:p.toString(v)})}max(f,v){return this._addCheck({kind:"max",value:f.getTime(),message:p.toString(v)})}get minDate(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f!=null?new Date(f):null}}G0.create=(f)=>{return new G0({checks:[],coerce:f?.coerce||!1,typeName:y.ZodDate,...s(f)})};class Qf extends t{_parse(f){if(this._getType(f)!==C.symbol){let J=this._getOrReturnCtx(f);return T(J,{code:S.invalid_type,expected:C.symbol,received:J.parsedType}),c}return xv(f.data)}}Qf.create=(f)=>{return new Qf({typeName:y.ZodSymbol,...s(f)})};class R0 extends t{_parse(f){if(this._getType(f)!==C.undefined){let J=this._getOrReturnCtx(f);return T(J,{code:S.invalid_type,expected:C.undefined,received:J.parsedType}),c}return xv(f.data)}}R0.create=(f)=>{return new R0({typeName:y.ZodUndefined,...s(f)})};class S0 extends t{_parse(f){if(this._getType(f)!==C.null){let J=this._getOrReturnCtx(f);return T(J,{code:S.invalid_type,expected:C.null,received:J.parsedType}),c}return xv(f.data)}}S0.create=(f)=>{return new S0({typeName:y.ZodNull,...s(f)})};class z0 extends t{constructor(){super(...arguments);this._any=!0}_parse(f){return xv(f.data)}}z0.create=(f)=>{return new z0({typeName:y.ZodAny,...s(f)})};class k1 extends t{constructor(){super(...arguments);this._unknown=!0}_parse(f){return xv(f.data)}}k1.create=(f)=>{return new k1({typeName:y.ZodUnknown,...s(f)})};class N1 extends t{_parse(f){let v=this._getOrReturnCtx(f);return T(v,{code:S.invalid_type,expected:C.never,received:v.parsedType}),c}}N1.create=(f)=>{return new N1({typeName:y.ZodNever,...s(f)})};class Jf extends t{_parse(f){if(this._getType(f)!==C.undefined){let J=this._getOrReturnCtx(f);return T(J,{code:S.invalid_type,expected:C.void,received:J.parsedType}),c}return xv(f.data)}}Jf.create=(f)=>{return new Jf({typeName:y.ZodVoid,...s(f)})};class G1 extends t{_parse(f){let{ctx:v,status:J}=this._processInputParams(f),X=this._def;if(v.parsedType!==C.array)return T(v,{code:S.invalid_type,expected:C.array,received:v.parsedType}),c;if(X.exactLength!==null){let Y=v.data.length>X.exactLength.value,G=v.data.length<X.exactLength.value;if(Y||G)T(v,{code:Y?S.too_big:S.too_small,minimum:G?X.exactLength.value:void 0,maximum:Y?X.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:X.exactLength.message}),J.dirty()}if(X.minLength!==null){if(v.data.length<X.minLength.value)T(v,{code:S.too_small,minimum:X.minLength.value,type:"array",inclusive:!0,exact:!1,message:X.minLength.message}),J.dirty()}if(X.maxLength!==null){if(v.data.length>X.maxLength.value)T(v,{code:S.too_big,maximum:X.maxLength.value,type:"array",inclusive:!0,exact:!1,message:X.maxLength.message}),J.dirty()}if(v.common.async)return Promise.all([...v.data].map((Y,G)=>{return X.type._parseAsync(new z1(v,Y,v.path,G))})).then((Y)=>{return Zv.mergeArray(J,Y)});let Q=[...v.data].map((Y,G)=>{return X.type._parseSync(new z1(v,Y,v.path,G))});return Zv.mergeArray(J,Q)}get element(){return this._def.type}min(f,v){return new G1({...this._def,minLength:{value:f,message:p.toString(v)}})}max(f,v){return new G1({...this._def,maxLength:{value:f,message:p.toString(v)}})}length(f,v){return new G1({...this._def,exactLength:{value:f,message:p.toString(v)}})}nonempty(f){return this.min(1,f)}}G1.create=(f,v)=>{return new G1({type:f,minLength:null,maxLength:null,exactLength:null,typeName:y.ZodArray,...s(v)})};function h0(f){if(f instanceof Lv){let v={};for(let J in f.shape){let X=f.shape[J];v[J]=sv.create(h0(X))}return new Lv({...f._def,shape:()=>v})}else if(f instanceof G1)return new G1({...f._def,type:h0(f.element)});else if(f instanceof sv)return sv.create(h0(f.unwrap()));else if(f instanceof y1)return y1.create(h0(f.unwrap()));else if(f instanceof M1)return M1.create(f.items.map((v)=>h0(v)));else return f}class Lv extends t{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),v=fv.objectKeys(f);return this._cached={shape:f,keys:v},this._cached}_parse(f){if(this._getType(f)!==C.object){let W=this._getOrReturnCtx(f);return T(W,{code:S.invalid_type,expected:C.object,received:W.parsedType}),c}let{status:J,ctx:X}=this._processInputParams(f),{shape:Q,keys:Y}=this._getCached(),G=[];if(!(this._def.catchall instanceof N1&&this._def.unknownKeys==="strip")){for(let W in X.data)if(!Y.includes(W))G.push(W)}let z=[];for(let W of Y){let $=Q[W],H=X.data[W];z.push({key:{status:"valid",value:W},value:$._parse(new z1(X,H,X.path,W)),alwaysSet:W in X.data})}if(this._def.catchall instanceof N1){let W=this._def.unknownKeys;if(W==="passthrough")for(let $ of G)z.push({key:{status:"valid",value:$},value:{status:"valid",value:X.data[$]}});else if(W==="strict"){if(G.length>0)T(X,{code:S.unrecognized_keys,keys:G}),J.dirty()}else if(W==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let W=this._def.catchall;for(let $ of G){let H=X.data[$];z.push({key:{status:"valid",value:$},value:W._parse(new z1(X,H,X.path,$)),alwaysSet:$ in X.data})}}if(X.common.async)return Promise.resolve().then(async()=>{let W=[];for(let $ of z){let H=await $.key,j=await $.value;W.push({key:H,value:j,alwaysSet:$.alwaysSet})}return W}).then((W)=>{return Zv.mergeObjectSync(J,W)});else return Zv.mergeObjectSync(J,z)}get shape(){return this._def.shape()}strict(f){return p.errToObj,new Lv({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(v,J)=>{let X=this._def.errorMap?.(v,J).message??J.defaultError;if(v.code==="unrecognized_keys")return{message:p.errToObj(f).message??X};return{message:X}}}:{}})}strip(){return new Lv({...this._def,unknownKeys:"strip"})}passthrough(){return new Lv({...this._def,unknownKeys:"passthrough"})}extend(f){return new Lv({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new Lv({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:y.ZodObject})}setKey(f,v){return this.augment({[f]:v})}catchall(f){return new Lv({...this._def,catchall:f})}pick(f){let v={};for(let J of fv.objectKeys(f))if(f[J]&&this.shape[J])v[J]=this.shape[J];return new Lv({...this._def,shape:()=>v})}omit(f){let v={};for(let J of fv.objectKeys(this.shape))if(!f[J])v[J]=this.shape[J];return new Lv({...this._def,shape:()=>v})}deepPartial(){return h0(this)}partial(f){let v={};for(let J of fv.objectKeys(this.shape)){let X=this.shape[J];if(f&&!f[J])v[J]=X;else v[J]=X.optional()}return new Lv({...this._def,shape:()=>v})}required(f){let v={};for(let J of fv.objectKeys(this.shape))if(f&&!f[J])v[J]=this.shape[J];else{let Q=this.shape[J];while(Q instanceof sv)Q=Q._def.innerType;v[J]=Q}return new Lv({...this._def,shape:()=>v})}keyof(){return t9(fv.objectKeys(this.shape))}}Lv.create=(f,v)=>{return new Lv({shape:()=>f,unknownKeys:"strip",catchall:N1.create(),typeName:y.ZodObject,...s(v)})};Lv.strictCreate=(f,v)=>{return new Lv({shape:()=>f,unknownKeys:"strict",catchall:N1.create(),typeName:y.ZodObject,...s(v)})};Lv.lazycreate=(f,v)=>{return new Lv({shape:f,unknownKeys:"strip",catchall:N1.create(),typeName:y.ZodObject,...s(v)})};class y0 extends t{_parse(f){let{ctx:v}=this._processInputParams(f),J=this._def.options;function X(Q){for(let G of Q)if(G.result.status==="valid")return G.result;for(let G of Q)if(G.result.status==="dirty")return v.common.issues.push(...G.ctx.common.issues),G.result;let Y=Q.map((G)=>new pv(G.ctx.common.issues));return T(v,{code:S.invalid_union,unionErrors:Y}),c}if(v.common.async)return Promise.all(J.map(async(Q)=>{let Y={...v,common:{...v.common,issues:[]},parent:null};return{result:await Q._parseAsync({data:v.data,path:v.path,parent:Y}),ctx:Y}})).then(X);else{let Q=void 0,Y=[];for(let z of J){let W={...v,common:{...v.common,issues:[]},parent:null},$=z._parseSync({data:v.data,path:v.path,parent:W});if($.status==="valid")return $;else if($.status==="dirty"&&!Q)Q={result:$,ctx:W};if(W.common.issues.length)Y.push(W.common.issues)}if(Q)return v.common.issues.push(...Q.ctx.common.issues),Q.result;let G=Y.map((z)=>new pv(z));return T(v,{code:S.invalid_union,unionErrors:G}),c}}get options(){return this._def.options}}y0.create=(f,v)=>{return new y0({options:f,typeName:y.ZodUnion,...s(v)})};var S1=(f)=>{if(f instanceof g0)return S1(f.schema);else if(f instanceof W1)return S1(f.innerType());else if(f instanceof Z0)return[f.value];else if(f instanceof u1)return f.options;else if(f instanceof C0)return fv.objectValues(f.enum);else if(f instanceof T0)return S1(f._def.innerType);else if(f instanceof R0)return[void 0];else if(f instanceof S0)return[null];else if(f instanceof sv)return[void 0,...S1(f.unwrap())];else if(f instanceof y1)return[null,...S1(f.unwrap())];else if(f instanceof yf)return S1(f.unwrap());else if(f instanceof b0)return S1(f.unwrap());else if(f instanceof x0)return S1(f._def.innerType);else return[]};class Sf extends t{_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==C.object)return T(v,{code:S.invalid_type,expected:C.object,received:v.parsedType}),c;let J=this.discriminator,X=v.data[J],Q=this.optionsMap.get(X);if(!Q)return T(v,{code:S.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[J]}),c;if(v.common.async)return Q._parseAsync({data:v.data,path:v.path,parent:v});else return Q._parseSync({data:v.data,path:v.path,parent:v})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,v,J){let X=new Map;for(let Q of v){let Y=S1(Q.shape[f]);if(!Y.length)throw new Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let G of Y){if(X.has(G))throw new Error(`Discriminator property ${String(f)} has duplicate value ${String(G)}`);X.set(G,Q)}}return new Sf({typeName:y.ZodDiscriminatedUnion,discriminator:f,options:v,optionsMap:X,...s(J)})}}function cQ(f,v){let J=V1(f),X=V1(v);if(f===v)return{valid:!0,data:f};else if(J===C.object&&X===C.object){let Q=fv.objectKeys(v),Y=fv.objectKeys(f).filter((z)=>Q.indexOf(z)!==-1),G={...f,...v};for(let z of Y){let W=cQ(f[z],v[z]);if(!W.valid)return{valid:!1};G[z]=W.data}return{valid:!0,data:G}}else if(J===C.array&&X===C.array){if(f.length!==v.length)return{valid:!1};let Q=[];for(let Y=0;Y<f.length;Y++){let G=f[Y],z=v[Y],W=cQ(G,z);if(!W.valid)return{valid:!1};Q.push(W.data)}return{valid:!0,data:Q}}else if(J===C.date&&X===C.date&&+f===+v)return{valid:!0,data:f};else return{valid:!1}}class I0 extends t{_parse(f){let{status:v,ctx:J}=this._processInputParams(f),X=(Q,Y)=>{if(_f(Q)||_f(Y))return c;let G=cQ(Q.value,Y.value);if(!G.valid)return T(J,{code:S.invalid_intersection_types}),c;if(Rf(Q)||Rf(Y))v.dirty();return{status:v.value,value:G.data}};if(J.common.async)return Promise.all([this._def.left._parseAsync({data:J.data,path:J.path,parent:J}),this._def.right._parseAsync({data:J.data,path:J.path,parent:J})]).then(([Q,Y])=>X(Q,Y));else return X(this._def.left._parseSync({data:J.data,path:J.path,parent:J}),this._def.right._parseSync({data:J.data,path:J.path,parent:J}))}}I0.create=(f,v,J)=>{return new I0({left:f,right:v,typeName:y.ZodIntersection,...s(J)})};class M1 extends t{_parse(f){let{status:v,ctx:J}=this._processInputParams(f);if(J.parsedType!==C.array)return T(J,{code:S.invalid_type,expected:C.array,received:J.parsedType}),c;if(J.data.length<this._def.items.length)return T(J,{code:S.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c;if(!this._def.rest&&J.data.length>this._def.items.length)T(J,{code:S.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty();let Q=[...J.data].map((Y,G)=>{let z=this._def.items[G]||this._def.rest;if(!z)return null;return z._parse(new z1(J,Y,J.path,G))}).filter((Y)=>!!Y);if(J.common.async)return Promise.all(Q).then((Y)=>{return Zv.mergeArray(v,Y)});else return Zv.mergeArray(v,Q)}get items(){return this._def.items}rest(f){return new M1({...this._def,rest:f})}}M1.create=(f,v)=>{if(!Array.isArray(f))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new M1({items:f,typeName:y.ZodTuple,rest:null,...s(v)})};class Xf extends t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:J}=this._processInputParams(f);if(J.parsedType!==C.object)return T(J,{code:S.invalid_type,expected:C.object,received:J.parsedType}),c;let X=[],Q=this._def.keyType,Y=this._def.valueType;for(let G in J.data)X.push({key:Q._parse(new z1(J,G,J.path,G)),value:Y._parse(new z1(J,J.data[G],J.path,G)),alwaysSet:G in J.data});if(J.common.async)return Zv.mergeObjectAsync(v,X);else return Zv.mergeObjectSync(v,X)}get element(){return this._def.valueType}static create(f,v,J){if(v instanceof t)return new Xf({keyType:f,valueType:v,typeName:y.ZodRecord,...s(J)});return new Xf({keyType:Y1.create(),valueType:f,typeName:y.ZodRecord,...s(v)})}}class Yf extends t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:J}=this._processInputParams(f);if(J.parsedType!==C.map)return T(J,{code:S.invalid_type,expected:C.map,received:J.parsedType}),c;let X=this._def.keyType,Q=this._def.valueType,Y=[...J.data.entries()].map(([G,z],W)=>{return{key:X._parse(new z1(J,G,J.path,[W,"key"])),value:Q._parse(new z1(J,z,J.path,[W,"value"]))}});if(J.common.async){let G=new Map;return Promise.resolve().then(async()=>{for(let z of Y){let W=await z.key,$=await z.value;if(W.status==="aborted"||$.status==="aborted")return c;if(W.status==="dirty"||$.status==="dirty")v.dirty();G.set(W.value,$.value)}return{status:v.value,value:G}})}else{let G=new Map;for(let z of Y){let{key:W,value:$}=z;if(W.status==="aborted"||$.status==="aborted")return c;if(W.status==="dirty"||$.status==="dirty")v.dirty();G.set(W.value,$.value)}return{status:v.value,value:G}}}}Yf.create=(f,v,J)=>{return new Yf({valueType:v,keyType:f,typeName:y.ZodMap,...s(J)})};class W0 extends t{_parse(f){let{status:v,ctx:J}=this._processInputParams(f);if(J.parsedType!==C.set)return T(J,{code:S.invalid_type,expected:C.set,received:J.parsedType}),c;let X=this._def;if(X.minSize!==null){if(J.data.size<X.minSize.value)T(J,{code:S.too_small,minimum:X.minSize.value,type:"set",inclusive:!0,exact:!1,message:X.minSize.message}),v.dirty()}if(X.maxSize!==null){if(J.data.size>X.maxSize.value)T(J,{code:S.too_big,maximum:X.maxSize.value,type:"set",inclusive:!0,exact:!1,message:X.maxSize.message}),v.dirty()}let Q=this._def.valueType;function Y(z){let W=new Set;for(let $ of z){if($.status==="aborted")return c;if($.status==="dirty")v.dirty();W.add($.value)}return{status:v.value,value:W}}let G=[...J.data.values()].map((z,W)=>Q._parse(new z1(J,z,J.path,W)));if(J.common.async)return Promise.all(G).then((z)=>Y(z));else return Y(G)}min(f,v){return new W0({...this._def,minSize:{value:f,message:p.toString(v)}})}max(f,v){return new W0({...this._def,maxSize:{value:f,message:p.toString(v)}})}size(f,v){return this.min(f,v).max(f,v)}nonempty(f){return this.min(1,f)}}W0.create=(f,v)=>{return new W0({valueType:f,minSize:null,maxSize:null,typeName:y.ZodSet,...s(v)})};class E0 extends t{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==C.function)return T(v,{code:S.invalid_type,expected:C.function,received:v.parsedType}),c;function J(G,z){return ff({data:G,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,U0(),R1].filter((W)=>!!W),issueData:{code:S.invalid_arguments,argumentsError:z}})}function X(G,z){return ff({data:G,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,U0(),R1].filter((W)=>!!W),issueData:{code:S.invalid_return_type,returnTypeError:z}})}let Q={errorMap:v.common.contextualErrorMap},Y=v.data;if(this._def.returns instanceof B0){let G=this;return xv(async function(...z){let W=new pv([]),$=await G._def.args.parseAsync(z,Q).catch((N)=>{throw W.addIssue(J(z,N)),W}),H=await Reflect.apply(Y,this,$);return await G._def.returns._def.type.parseAsync(H,Q).catch((N)=>{throw W.addIssue(X(H,N)),W})})}else{let G=this;return xv(function(...z){let W=G._def.args.safeParse(z,Q);if(!W.success)throw new pv([J(z,W.error)]);let $=Reflect.apply(Y,this,W.data),H=G._def.returns.safeParse($,Q);if(!H.success)throw new pv([X($,H.error)]);return H.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new E0({...this._def,args:M1.create(f).rest(k1.create())})}returns(f){return new E0({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,v,J){return new E0({args:f?f:M1.create([]).rest(k1.create()),returns:v||k1.create(),typeName:y.ZodFunction,...s(J)})}}class g0 extends t{get schema(){return this._def.getter()}_parse(f){let{ctx:v}=this._processInputParams(f);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}g0.create=(f,v)=>{return new g0({getter:f,typeName:y.ZodLazy,...s(v)})};class Z0 extends t{_parse(f){if(f.data!==this._def.value){let v=this._getOrReturnCtx(f);return T(v,{received:v.data,code:S.invalid_literal,expected:this._def.value}),c}return{status:"valid",value:f.data}}get value(){return this._def.value}}Z0.create=(f,v)=>{return new Z0({value:f,typeName:y.ZodLiteral,...s(v)})};function t9(f,v){return new u1({values:f,typeName:y.ZodEnum,...s(v)})}class u1 extends t{_parse(f){if(typeof f.data!=="string"){let v=this._getOrReturnCtx(f),J=this._def.values;return T(v,{expected:fv.joinValues(J),received:v.parsedType,code:S.invalid_type}),c}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(f.data)){let v=this._getOrReturnCtx(f),J=this._def.values;return T(v,{received:v.data,code:S.invalid_enum_value,options:J}),c}return xv(f.data)}get options(){return this._def.values}get enum(){let f={};for(let v of this._def.values)f[v]=v;return f}get Values(){let f={};for(let v of this._def.values)f[v]=v;return f}get Enum(){let f={};for(let v of this._def.values)f[v]=v;return f}extract(f,v=this._def){return u1.create(f,{...this._def,...v})}exclude(f,v=this._def){return u1.create(this.options.filter((J)=>!f.includes(J)),{...this._def,...v})}}u1.create=t9;class C0 extends t{_parse(f){let v=fv.getValidEnumValues(this._def.values),J=this._getOrReturnCtx(f);if(J.parsedType!==C.string&&J.parsedType!==C.number){let X=fv.objectValues(v);return T(J,{expected:fv.joinValues(X),received:J.parsedType,code:S.invalid_type}),c}if(!this._cache)this._cache=new Set(fv.getValidEnumValues(this._def.values));if(!this._cache.has(f.data)){let X=fv.objectValues(v);return T(J,{received:J.data,code:S.invalid_enum_value,options:X}),c}return xv(f.data)}get enum(){return this._def.values}}C0.create=(f,v)=>{return new C0({values:f,typeName:y.ZodNativeEnum,...s(v)})};class B0 extends t{unwrap(){return this._def.type}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==C.promise&&v.common.async===!1)return T(v,{code:S.invalid_type,expected:C.promise,received:v.parsedType}),c;let J=v.parsedType===C.promise?v.data:Promise.resolve(v.data);return xv(J.then((X)=>{return this._def.type.parseAsync(X,{path:v.path,errorMap:v.common.contextualErrorMap})}))}}B0.create=(f,v)=>{return new B0({type:f,typeName:y.ZodPromise,...s(v)})};class W1 extends t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:v,ctx:J}=this._processInputParams(f),X=this._def.effect||null,Q={addIssue:(Y)=>{if(T(J,Y),Y.fatal)v.abort();else v.dirty()},get path(){return J.path}};if(Q.addIssue=Q.addIssue.bind(Q),X.type==="preprocess"){let Y=X.transform(J.data,Q);if(J.common.async)return Promise.resolve(Y).then(async(G)=>{if(v.value==="aborted")return c;let z=await this._def.schema._parseAsync({data:G,path:J.path,parent:J});if(z.status==="aborted")return c;if(z.status==="dirty")return Y0(z.value);if(v.value==="dirty")return Y0(z.value);return z});else{if(v.value==="aborted")return c;let G=this._def.schema._parseSync({data:Y,path:J.path,parent:J});if(G.status==="aborted")return c;if(G.status==="dirty")return Y0(G.value);if(v.value==="dirty")return Y0(G.value);return G}}if(X.type==="refinement"){let Y=(G)=>{let z=X.refinement(G,Q);if(J.common.async)return Promise.resolve(z);if(z instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return G};if(J.common.async===!1){let G=this._def.schema._parseSync({data:J.data,path:J.path,parent:J});if(G.status==="aborted")return c;if(G.status==="dirty")v.dirty();return Y(G.value),{status:v.value,value:G.value}}else return this._def.schema._parseAsync({data:J.data,path:J.path,parent:J}).then((G)=>{if(G.status==="aborted")return c;if(G.status==="dirty")v.dirty();return Y(G.value).then(()=>{return{status:v.value,value:G.value}})})}if(X.type==="transform")if(J.common.async===!1){let Y=this._def.schema._parseSync({data:J.data,path:J.path,parent:J});if(!b1(Y))return c;let G=X.transform(Y.value,Q);if(G instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:G}}else return this._def.schema._parseAsync({data:J.data,path:J.path,parent:J}).then((Y)=>{if(!b1(Y))return c;return Promise.resolve(X.transform(Y.value,Q)).then((G)=>({status:v.value,value:G}))});fv.assertNever(X)}}W1.create=(f,v,J)=>{return new W1({schema:f,typeName:y.ZodEffects,effect:v,...s(J)})};W1.createWithPreprocess=(f,v,J)=>{return new W1({schema:v,effect:{type:"preprocess",transform:f},typeName:y.ZodEffects,...s(J)})};class sv extends t{_parse(f){if(this._getType(f)===C.undefined)return xv(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}sv.create=(f,v)=>{return new sv({innerType:f,typeName:y.ZodOptional,...s(v)})};class y1 extends t{_parse(f){if(this._getType(f)===C.null)return xv(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}y1.create=(f,v)=>{return new y1({innerType:f,typeName:y.ZodNullable,...s(v)})};class T0 extends t{_parse(f){let{ctx:v}=this._processInputParams(f),J=v.data;if(v.parsedType===C.undefined)J=this._def.defaultValue();return this._def.innerType._parse({data:J,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}T0.create=(f,v)=>{return new T0({innerType:f,typeName:y.ZodDefault,defaultValue:typeof v.default==="function"?v.default:()=>v.default,...s(v)})};class x0 extends t{_parse(f){let{ctx:v}=this._processInputParams(f),J={...v,common:{...v.common,issues:[]}},X=this._def.innerType._parse({data:J.data,path:J.path,parent:{...J}});if(F0(X))return X.then((Q)=>{return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new pv(J.common.issues)},input:J.data})}});else return{status:"valid",value:X.status==="valid"?X.value:this._def.catchValue({get error(){return new pv(J.common.issues)},input:J.data})}}removeCatch(){return this._def.innerType}}x0.create=(f,v)=>{return new x0({innerType:f,typeName:y.ZodCatch,catchValue:typeof v.catch==="function"?v.catch:()=>v.catch,...s(v)})};class Gf extends t{_parse(f){if(this._getType(f)!==C.nan){let J=this._getOrReturnCtx(f);return T(J,{code:S.invalid_type,expected:C.nan,received:J.parsedType}),c}return{status:"valid",value:f.data}}}Gf.create=(f)=>{return new Gf({typeName:y.ZodNaN,...s(f)})};var aY=Symbol("zod_brand");class yf extends t{_parse(f){let{ctx:v}=this._processInputParams(f),J=v.data;return this._def.type._parse({data:J,path:v.path,parent:v})}unwrap(){return this._def.type}}class zf extends t{_parse(f){let{status:v,ctx:J}=this._processInputParams(f);if(J.common.async)return(async()=>{let Q=await this._def.in._parseAsync({data:J.data,path:J.path,parent:J});if(Q.status==="aborted")return c;if(Q.status==="dirty")return v.dirty(),Y0(Q.value);else return this._def.out._parseAsync({data:Q.value,path:J.path,parent:J})})();else{let X=this._def.in._parseSync({data:J.data,path:J.path,parent:J});if(X.status==="aborted")return c;if(X.status==="dirty")return v.dirty(),{status:"dirty",value:X.value};else return this._def.out._parseSync({data:X.value,path:J.path,parent:J})}}static create(f,v){return new zf({in:f,out:v,typeName:y.ZodPipeline})}}class b0 extends t{_parse(f){let v=this._def.innerType._parse(f),J=(X)=>{if(b1(X))X.value=Object.freeze(X.value);return X};return F0(v)?v.then((X)=>J(X)):J(v)}unwrap(){return this._def.innerType}}b0.create=(f,v)=>{return new b0({innerType:f,typeName:y.ZodReadonly,...s(v)})};function d9(f,v){let J=typeof f==="function"?f(v):typeof f==="string"?{message:f}:f;return typeof J==="string"?{message:J}:J}function e9(f,v={},J){if(f)return z0.create().superRefine((X,Q)=>{let Y=f(X);if(Y instanceof Promise)return Y.then((G)=>{if(!G){let z=d9(v,X),W=z.fatal??J??!0;Q.addIssue({code:"custom",...z,fatal:W})}});if(!Y){let G=d9(v,X),z=G.fatal??J??!0;Q.addIssue({code:"custom",...G,fatal:z})}return});return z0.create()}var cY={object:Lv.lazycreate},y;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(y||(y={}));var nY=(f,v={message:`Input not instance of ${f.name}`})=>e9((J)=>J instanceof f,v),vJ=Y1.create,fJ=l1.create,dY=Gf.create,iY=m1.create,QJ=_0.create,sY=G0.create,oY=Qf.create,tY=R0.create,eY=S0.create,v4=z0.create,f4=k1.create,Q4=N1.create,J4=Jf.create,X4=G1.create,Y4=Lv.create,G4=Lv.strictCreate,z4=y0.create,W4=Sf.create,B4=I0.create,$4=M1.create,K4=Xf.create,j4=Yf.create,H4=W0.create,q4=E0.create,P4=g0.create,V4=Z0.create,N4=u1.create,M4=C0.create,D4=B0.create,O4=W1.create,L4=sv.create,A4=y1.create,w4=W1.createWithPreprocess,U4=zf.create,F4=()=>vJ().optional(),h4=()=>fJ().optional(),E4=()=>QJ().optional(),_4={string:(f)=>Y1.create({...f,coerce:!0}),number:(f)=>l1.create({...f,coerce:!0}),boolean:(f)=>_0.create({...f,coerce:!0}),bigint:(f)=>m1.create({...f,coerce:!0}),date:(f)=>G0.create({...f,coerce:!0})};var R4=c;var nQ="2025-06-18";var JJ=[nQ,"2025-03-26","2024-11-05","2024-10-07"],If="2.0",XJ=B.union([B.string(),B.number().int()]),YJ=B.string(),S4=B.object({progressToken:B.optional(XJ)}).passthrough(),f1=B.object({_meta:B.optional(S4)}).passthrough(),av=B.object({method:B.string(),params:B.optional(f1)}),Wf=B.object({_meta:B.optional(B.object({}).passthrough())}).passthrough(),D1=B.object({method:B.string(),params:B.optional(Wf)}),Q1=B.object({_meta:B.optional(B.object({}).passthrough())}).passthrough(),gf=B.union([B.string(),B.number().int()]),GJ=B.object({jsonrpc:B.literal(If),id:gf}).merge(av).strict(),zJ=(f)=>GJ.safeParse(f).success,WJ=B.object({jsonrpc:B.literal(If)}).merge(D1).strict(),BJ=(f)=>WJ.safeParse(f).success,$J=B.object({jsonrpc:B.literal(If),id:gf,result:Q1}).strict(),dQ=(f)=>$J.safeParse(f).success,Pv;(function(f){f[f.ConnectionClosed=-32000]="ConnectionClosed",f[f.RequestTimeout=-32001]="RequestTimeout",f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"})(Pv||(Pv={}));var KJ=B.object({jsonrpc:B.literal(If),id:gf,error:B.object({code:B.number().int(),message:B.string(),data:B.optional(B.unknown())})}).strict(),jJ=(f)=>KJ.safeParse(f).success,HJ=B.union([GJ,WJ,$J,KJ]),Zf=Q1.strict(),Cf=D1.extend({method:B.literal("notifications/cancelled"),params:Wf.extend({requestId:gf,reason:B.string().optional()})}),Bf=B.object({name:B.string(),title:B.optional(B.string())}).passthrough(),qJ=Bf.extend({version:B.string()}),y4=B.object({experimental:B.optional(B.object({}).passthrough()),sampling:B.optional(B.object({}).passthrough()),elicitation:B.optional(B.object({}).passthrough()),roots:B.optional(B.object({listChanged:B.optional(B.boolean())}).passthrough())}).passthrough(),iQ=av.extend({method:B.literal("initialize"),params:f1.extend({protocolVersion:B.string(),capabilities:y4,clientInfo:qJ})});var I4=B.object({experimental:B.optional(B.object({}).passthrough()),logging:B.optional(B.object({}).passthrough()),completions:B.optional(B.object({}).passthrough()),prompts:B.optional(B.object({listChanged:B.optional(B.boolean())}).passthrough()),resources:B.optional(B.object({subscribe:B.optional(B.boolean()),listChanged:B.optional(B.boolean())}).passthrough()),tools:B.optional(B.object({listChanged:B.optional(B.boolean())}).passthrough())}).passthrough(),g4=Q1.extend({protocolVersion:B.string(),capabilities:I4,serverInfo:qJ,instructions:B.optional(B.string())}),sQ=D1.extend({method:B.literal("notifications/initialized")});var Tf=av.extend({method:B.literal("ping")}),Z4=B.object({progress:B.number(),total:B.optional(B.number()),message:B.optional(B.string())}).passthrough(),xf=D1.extend({method:B.literal("notifications/progress"),params:Wf.merge(Z4).extend({progressToken:XJ})}),bf=av.extend({params:f1.extend({cursor:B.optional(YJ)}).optional()}),kf=Q1.extend({nextCursor:B.optional(YJ)}),PJ=B.object({uri:B.string(),mimeType:B.optional(B.string()),_meta:B.optional(B.object({}).passthrough())}).passthrough(),VJ=PJ.extend({text:B.string()}),NJ=PJ.extend({blob:B.string().base64()}),MJ=Bf.extend({uri:B.string(),description:B.optional(B.string()),mimeType:B.optional(B.string()),_meta:B.optional(B.object({}).passthrough())}),C4=Bf.extend({uriTemplate:B.string(),description:B.optional(B.string()),mimeType:B.optional(B.string()),_meta:B.optional(B.object({}).passthrough())}),lf=bf.extend({method:B.literal("resources/list")}),T4=kf.extend({resources:B.array(MJ)}),mf=bf.extend({method:B.literal("resources/templates/list")}),x4=kf.extend({resourceTemplates:B.array(C4)}),uf=av.extend({method:B.literal("resources/read"),params:f1.extend({uri:B.string()})}),b4=Q1.extend({contents:B.array(B.union([VJ,NJ]))}),k4=D1.extend({method:B.literal("notifications/resources/list_changed")}),l4=av.extend({method:B.literal("resources/subscribe"),params:f1.extend({uri:B.string()})}),m4=av.extend({method:B.literal("resources/unsubscribe"),params:f1.extend({uri:B.string()})}),u4=D1.extend({method:B.literal("notifications/resources/updated"),params:Wf.extend({uri:B.string()})}),r4=B.object({name:B.string(),description:B.optional(B.string()),required:B.optional(B.boolean())}).passthrough(),p4=Bf.extend({description:B.optional(B.string()),arguments:B.optional(B.array(r4)),_meta:B.optional(B.object({}).passthrough())}),rf=bf.extend({method:B.literal("prompts/list")}),a4=kf.extend({prompts:B.array(p4)}),pf=av.extend({method:B.literal("prompts/get"),params:f1.extend({name:B.string(),arguments:B.optional(B.record(B.string()))})}),oQ=B.object({type:B.literal("text"),text:B.string(),_meta:B.optional(B.object({}).passthrough())}).passthrough(),tQ=B.object({type:B.literal("image"),data:B.string().base64(),mimeType:B.string(),_meta:B.optional(B.object({}).passthrough())}).passthrough(),eQ=B.object({type:B.literal("audio"),data:B.string().base64(),mimeType:B.string(),_meta:B.optional(B.object({}).passthrough())}).passthrough(),c4=B.object({type:B.literal("resource"),resource:B.union([VJ,NJ]),_meta:B.optional(B.object({}).passthrough())}).passthrough(),n4=MJ.extend({type:B.literal("resource_link")}),DJ=B.union([oQ,tQ,eQ,n4,c4]),d4=B.object({role:B.enum(["user","assistant"]),content:DJ}).passthrough(),i4=Q1.extend({description:B.optional(B.string()),messages:B.array(d4)}),s4=D1.extend({method:B.literal("notifications/prompts/list_changed")}),o4=B.object({title:B.optional(B.string()),readOnlyHint:B.optional(B.boolean()),destructiveHint:B.optional(B.boolean()),idempotentHint:B.optional(B.boolean()),openWorldHint:B.optional(B.boolean())}).passthrough(),t4=Bf.extend({description:B.optional(B.string()),inputSchema:B.object({type:B.literal("object"),properties:B.optional(B.object({}).passthrough()),required:B.optional(B.array(B.string()))}).passthrough(),outputSchema:B.optional(B.object({type:B.literal("object"),properties:B.optional(B.object({}).passthrough()),required:B.optional(B.array(B.string()))}).passthrough()),annotations:B.optional(o4),_meta:B.optional(B.object({}).passthrough())}),af=bf.extend({method:B.literal("tools/list")}),e4=kf.extend({tools:B.array(t4)}),OJ=Q1.extend({content:B.array(DJ).default([]),structuredContent:B.object({}).passthrough().optional(),isError:B.optional(B.boolean())}),kW=OJ.or(Q1.extend({toolResult:B.unknown()})),cf=av.extend({method:B.literal("tools/call"),params:f1.extend({name:B.string(),arguments:B.optional(B.record(B.unknown()))})}),v2=D1.extend({method:B.literal("notifications/tools/list_changed")}),LJ=B.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),f2=av.extend({method:B.literal("logging/setLevel"),params:f1.extend({level:LJ})}),Q2=D1.extend({method:B.literal("notifications/message"),params:Wf.extend({level:LJ,logger:B.optional(B.string()),data:B.unknown()})}),J2=B.object({name:B.string().optional()}).passthrough(),X2=B.object({hints:B.optional(B.array(J2)),costPriority:B.optional(B.number().min(0).max(1)),speedPriority:B.optional(B.number().min(0).max(1)),intelligencePriority:B.optional(B.number().min(0).max(1))}).passthrough(),Y2=B.object({role:B.enum(["user","assistant"]),content:B.union([oQ,tQ,eQ])}).passthrough(),G2=av.extend({method:B.literal("sampling/createMessage"),params:f1.extend({messages:B.array(Y2),systemPrompt:B.optional(B.string()),includeContext:B.optional(B.enum(["none","thisServer","allServers"])),temperature:B.optional(B.number()),maxTokens:B.number().int(),stopSequences:B.optional(B.array(B.string())),metadata:B.optional(B.object({}).passthrough()),modelPreferences:B.optional(X2)})}),v8=Q1.extend({model:B.string(),stopReason:B.optional(B.enum(["endTurn","stopSequence","maxTokens"]).or(B.string())),role:B.enum(["user","assistant"]),content:B.discriminatedUnion("type",[oQ,tQ,eQ])}),z2=B.object({type:B.literal("boolean"),title:B.optional(B.string()),description:B.optional(B.string()),default:B.optional(B.boolean())}).passthrough(),W2=B.object({type:B.literal("string"),title:B.optional(B.string()),description:B.optional(B.string()),minLength:B.optional(B.number()),maxLength:B.optional(B.number()),format:B.optional(B.enum(["email","uri","date","date-time"]))}).passthrough(),B2=B.object({type:B.enum(["number","integer"]),title:B.optional(B.string()),description:B.optional(B.string()),minimum:B.optional(B.number()),maximum:B.optional(B.number())}).passthrough(),$2=B.object({type:B.literal("string"),title:B.optional(B.string()),description:B.optional(B.string()),enum:B.array(B.string()),enumNames:B.optional(B.array(B.string()))}).passthrough(),K2=B.union([z2,W2,B2,$2]),j2=av.extend({method:B.literal("elicitation/create"),params:f1.extend({message:B.string(),requestedSchema:B.object({type:B.literal("object"),properties:B.record(B.string(),K2),required:B.optional(B.array(B.string()))}).passthrough()})}),f8=Q1.extend({action:B.enum(["accept","decline","cancel"]),content:B.optional(B.record(B.string(),B.unknown()))}),H2=B.object({type:B.literal("ref/resource"),uri:B.string()}).passthrough();var q2=B.object({type:B.literal("ref/prompt"),name:B.string()}).passthrough(),nf=av.extend({method:B.literal("completion/complete"),params:f1.extend({ref:B.union([q2,H2]),argument:B.object({name:B.string(),value:B.string()}).passthrough(),context:B.optional(B.object({arguments:B.optional(B.record(B.string(),B.string()))}))})}),P2=Q1.extend({completion:B.object({values:B.array(B.string()).max(100),total:B.optional(B.number().int()),hasMore:B.optional(B.boolean())}).passthrough()}),V2=B.object({uri:B.string().startsWith("file://"),name:B.optional(B.string()),_meta:B.optional(B.object({}).passthrough())}).passthrough(),N2=av.extend({method:B.literal("roots/list")}),Q8=Q1.extend({roots:B.array(V2)}),M2=D1.extend({method:B.literal("notifications/roots/list_changed")}),lW=B.union([Tf,iQ,nf,f2,pf,rf,lf,mf,uf,l4,m4,cf,af]),mW=B.union([Cf,xf,sQ,M2]),uW=B.union([Zf,v8,f8,Q8]),rW=B.union([Tf,G2,j2,N2]),pW=B.union([Cf,xf,Q2,u4,k4,v2,s4]),aW=B.union([Zf,g4,P2,i4,a4,T4,x4,b4,OJ,e4]);class Vv extends Error{constructor(f,v,J){super(`MCP error ${f}: ${v}`);this.code=f,this.data=J,this.name="McpError"}}var D2=60000;class J8{constructor(f){this._options=f,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(Cf,(v)=>{let J=this._requestHandlerAbortControllers.get(v.params.requestId);J===null||J===void 0||J.abort(v.params.reason)}),this.setNotificationHandler(xf,(v)=>{this._onprogress(v)}),this.setRequestHandler(Tf,(v)=>({}))}_setupTimeout(f,v,J,X,Q=!1){this._timeoutInfo.set(f,{timeoutId:setTimeout(X,v),startTime:Date.now(),timeout:v,maxTotalTimeout:J,resetTimeoutOnProgress:Q,onTimeout:X})}_resetTimeout(f){let v=this._timeoutInfo.get(f);if(!v)return!1;let J=Date.now()-v.startTime;if(v.maxTotalTimeout&&J>=v.maxTotalTimeout)throw this._timeoutInfo.delete(f),new Vv(Pv.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:v.maxTotalTimeout,totalElapsed:J});return clearTimeout(v.timeoutId),v.timeoutId=setTimeout(v.onTimeout,v.timeout),!0}_cleanupTimeout(f){let v=this._timeoutInfo.get(f);if(v)clearTimeout(v.timeoutId),this._timeoutInfo.delete(f)}async connect(f){var v,J,X;this._transport=f;let Q=(v=this.transport)===null||v===void 0?void 0:v.onclose;this._transport.onclose=()=>{Q===null||Q===void 0||Q(),this._onclose()};let Y=(J=this.transport)===null||J===void 0?void 0:J.onerror;this._transport.onerror=(z)=>{Y===null||Y===void 0||Y(z),this._onerror(z)};let G=(X=this._transport)===null||X===void 0?void 0:X.onmessage;this._transport.onmessage=(z,W)=>{if(G===null||G===void 0||G(z,W),dQ(z)||jJ(z))this._onresponse(z);else if(zJ(z))this._onrequest(z,W);else if(BJ(z))this._onnotification(z);else this._onerror(new Error(`Unknown message type: ${JSON.stringify(z)}`))},await this._transport.start()}_onclose(){var f;let v=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(f=this.onclose)===null||f===void 0||f.call(this);let J=new Vv(Pv.ConnectionClosed,"Connection closed");for(let X of v.values())X(J)}_onerror(f){var v;(v=this.onerror)===null||v===void 0||v.call(this,f)}_onnotification(f){var v;let J=(v=this._notificationHandlers.get(f.method))!==null&&v!==void 0?v:this.fallbackNotificationHandler;if(J===void 0)return;Promise.resolve().then(()=>J(f)).catch((X)=>this._onerror(new Error(`Uncaught error in notification handler: ${X}`)))}_onrequest(f,v){var J,X,Q,Y;let G=(J=this._requestHandlers.get(f.method))!==null&&J!==void 0?J:this.fallbackRequestHandler;if(G===void 0){(X=this._transport)===null||X===void 0||X.send({jsonrpc:"2.0",id:f.id,error:{code:Pv.MethodNotFound,message:"Method not found"}}).catch(($)=>this._onerror(new Error(`Failed to send an error response: ${$}`)));return}let z=new AbortController;this._requestHandlerAbortControllers.set(f.id,z);let W={signal:z.signal,sessionId:(Q=this._transport)===null||Q===void 0?void 0:Q.sessionId,_meta:(Y=f.params)===null||Y===void 0?void 0:Y._meta,sendNotification:($)=>this.notification($,{relatedRequestId:f.id}),sendRequest:($,H,j)=>this.request($,H,{...j,relatedRequestId:f.id}),authInfo:v===null||v===void 0?void 0:v.authInfo,requestId:f.id,requestInfo:v===null||v===void 0?void 0:v.requestInfo};Promise.resolve().then(()=>G(f,W)).then(($)=>{var H;if(z.signal.aborted)return;return(H=this._transport)===null||H===void 0?void 0:H.send({result:$,jsonrpc:"2.0",id:f.id})},($)=>{var H,j;if(z.signal.aborted)return;return(H=this._transport)===null||H===void 0?void 0:H.send({jsonrpc:"2.0",id:f.id,error:{code:Number.isSafeInteger($.code)?$.code:Pv.InternalError,message:(j=$.message)!==null&&j!==void 0?j:"Internal error"}})}).catch(($)=>this._onerror(new Error(`Failed to send response: ${$}`))).finally(()=>{this._requestHandlerAbortControllers.delete(f.id)})}_onprogress(f){let{progressToken:v,...J}=f.params,X=Number(v),Q=this._progressHandlers.get(X);if(!Q){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(f)}`));return}let Y=this._responseHandlers.get(X),G=this._timeoutInfo.get(X);if(G&&Y&&G.resetTimeoutOnProgress)try{this._resetTimeout(X)}catch(z){Y(z);return}Q(J)}_onresponse(f){let v=Number(f.id),J=this._responseHandlers.get(v);if(J===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(f)}`));return}if(this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),dQ(f))J(f);else{let X=new Vv(f.error.code,f.error.message,f.error.data);J(X)}}get transport(){return this._transport}async close(){var f;await((f=this._transport)===null||f===void 0?void 0:f.close())}request(f,v,J){let{relatedRequestId:X,resumptionToken:Q,onresumptiontoken:Y}=J!==null&&J!==void 0?J:{};return new Promise((G,z)=>{var W,$,H,j,N,K;if(!this._transport){z(new Error("Not connected"));return}if(((W=this._options)===null||W===void 0?void 0:W.enforceStrictCapabilities)===!0)this.assertCapabilityForMethod(f.method);($=J===null||J===void 0?void 0:J.signal)===null||$===void 0||$.throwIfAborted();let q=this._requestMessageId++,M={...f,jsonrpc:"2.0",id:q};if(J===null||J===void 0?void 0:J.onprogress)this._progressHandlers.set(q,J.onprogress),M.params={...f.params,_meta:{...((H=f.params)===null||H===void 0?void 0:H._meta)||{},progressToken:q}};let V=(w)=>{var h;this._responseHandlers.delete(q),this._progressHandlers.delete(q),this._cleanupTimeout(q),(h=this._transport)===null||h===void 0||h.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:q,reason:String(w)}},{relatedRequestId:X,resumptionToken:Q,onresumptiontoken:Y}).catch((E)=>this._onerror(new Error(`Failed to send cancellation: ${E}`))),z(w)};this._responseHandlers.set(q,(w)=>{var h;if((h=J===null||J===void 0?void 0:J.signal)===null||h===void 0?void 0:h.aborted)return;if(w instanceof Error)return z(w);try{let E=v.parse(w.result);G(E)}catch(E){z(E)}}),(j=J===null||J===void 0?void 0:J.signal)===null||j===void 0||j.addEventListener("abort",()=>{var w;V((w=J===null||J===void 0?void 0:J.signal)===null||w===void 0?void 0:w.reason)});let L=(N=J===null||J===void 0?void 0:J.timeout)!==null&&N!==void 0?N:D2,F=()=>V(new Vv(Pv.RequestTimeout,"Request timed out",{timeout:L}));this._setupTimeout(q,L,J===null||J===void 0?void 0:J.maxTotalTimeout,F,(K=J===null||J===void 0?void 0:J.resetTimeoutOnProgress)!==null&&K!==void 0?K:!1),this._transport.send(M,{relatedRequestId:X,resumptionToken:Q,onresumptiontoken:Y}).catch((w)=>{this._cleanupTimeout(q),z(w)})})}async notification(f,v){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(f.method);let J={...f,jsonrpc:"2.0"};await this._transport.send(J,v)}setRequestHandler(f,v){let J=f.shape.method.value;this.assertRequestHandlerCapability(J),this._requestHandlers.set(J,(X,Q)=>{return Promise.resolve(v(f.parse(X),Q))})}removeRequestHandler(f){this._requestHandlers.delete(f)}assertCanSetRequestHandler(f){if(this._requestHandlers.has(f))throw new Error(`A request handler for ${f} already exists, which would be overridden`)}setNotificationHandler(f,v){this._notificationHandlers.set(f.shape.method.value,(J)=>Promise.resolve(v(f.parse(J))))}removeNotificationHandler(f){this._notificationHandlers.delete(f)}}function AJ(f,v){return Object.entries(v).reduce((J,[X,Q])=>{if(Q&&typeof Q==="object")J[X]=J[X]?{...J[X],...Q}:Q;else J[X]=Q;return J},{...f})}var U5=Kv(w5());class _8 extends J8{constructor(f,v){var J;super(v);this._serverInfo=f,this._capabilities=(J=v===null||v===void 0?void 0:v.capabilities)!==null&&J!==void 0?J:{},this._instructions=v===null||v===void 0?void 0:v.instructions,this.setRequestHandler(iQ,(X)=>this._oninitialize(X)),this.setNotificationHandler(sQ,()=>{var X;return(X=this.oninitialized)===null||X===void 0?void 0:X.call(this)})}registerCapabilities(f){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=AJ(this._capabilities,f)}assertCapabilityForMethod(f){var v,J,X;switch(f){case"sampling/createMessage":if(!((v=this._clientCapabilities)===null||v===void 0?void 0:v.sampling))throw new Error(`Client does not support sampling (required for ${f})`);break;case"elicitation/create":if(!((J=this._clientCapabilities)===null||J===void 0?void 0:J.elicitation))throw new Error(`Client does not support elicitation (required for ${f})`);break;case"roots/list":if(!((X=this._clientCapabilities)===null||X===void 0?void 0:X.roots))throw new Error(`Client does not support listing roots (required for ${f})`);break;case"ping":break}}assertNotificationCapability(f){switch(f){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${f})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${f})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${f})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${f})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(f){switch(f){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${f})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${f})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${f})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${f})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${f})`);break;case"ping":case"initialize":break}}async _oninitialize(f){let v=f.params.protocolVersion;return this._clientCapabilities=f.params.capabilities,this._clientVersion=f.params.clientInfo,{protocolVersion:JJ.includes(v)?v:nQ,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},Zf)}async createMessage(f,v){return this.request({method:"sampling/createMessage",params:f},v8,v)}async elicitInput(f,v){let J=await this.request({method:"elicitation/create",params:f},f8,v);if(J.action==="accept"&&J.content)try{let X=new U5.default,Q=X.compile(f.requestedSchema);if(!Q(J.content))throw new Vv(Pv.InvalidParams,`Elicitation response content does not match requested schema: ${X.errorsText(Q.errors)}`)}catch(X){if(X instanceof Vv)throw X;throw new Vv(Pv.InternalError,`Error validating elicitation response: ${X}`)}return J}async listRoots(f,v){return this.request({method:"roots/list",params:f},Q8,v)}async sendLoggingMessage(f){return this.notification({method:"notifications/message",params:f})}async sendResourceUpdated(f){return this.notification({method:"notifications/resources/updated",params:f})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var h5=Symbol("Let zodToJsonSchema decide on which parser to use");var F5={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},E5=(f)=>typeof f==="string"?{...F5,name:f}:{...F5,...f};var _5=(f)=>{let v=E5(f),J=v.name!==void 0?[...v.basePath,v.definitionPath,v.name]:v.basePath;return{...v,currentPath:J,propertyPath:void 0,seen:new Map(Object.entries(v.definitions).map(([X,Q])=>[Q._def,{def:Q._def,path:[...v.basePath,v.definitionPath,X],jsonSchema:void 0}]))}};function R8(f,v,J,X){if(!X?.errorMessages)return;if(J)f.errorMessage={...f.errorMessage,[v]:J}}function Qv(f,v,J,X,Q){f[v]=J,R8(f,v,X,Q)}function R5(){return{}}function S5(f,v){let J={type:"array"};if(f.type?._def&&f.type?._def?.typeName!==y.ZodAny)J.items=n(f.type._def,{...v,currentPath:[...v.currentPath,"items"]});if(f.minLength)Qv(J,"minItems",f.minLength.value,f.minLength.message,v);if(f.maxLength)Qv(J,"maxItems",f.maxLength.value,f.maxLength.message,v);if(f.exactLength)Qv(J,"minItems",f.exactLength.value,f.exactLength.message,v),Qv(J,"maxItems",f.exactLength.value,f.exactLength.message,v);return J}function y5(f,v){let J={type:"integer",format:"int64"};if(!f.checks)return J;for(let X of f.checks)switch(X.kind){case"min":if(v.target==="jsonSchema7")if(X.inclusive)Qv(J,"minimum",X.value,X.message,v);else Qv(J,"exclusiveMinimum",X.value,X.message,v);else{if(!X.inclusive)J.exclusiveMinimum=!0;Qv(J,"minimum",X.value,X.message,v)}break;case"max":if(v.target==="jsonSchema7")if(X.inclusive)Qv(J,"maximum",X.value,X.message,v);else Qv(J,"exclusiveMaximum",X.value,X.message,v);else{if(!X.inclusive)J.exclusiveMaximum=!0;Qv(J,"maximum",X.value,X.message,v)}break;case"multipleOf":Qv(J,"multipleOf",X.value,X.message,v);break}return J}function I5(){return{type:"boolean"}}function HQ(f,v){return n(f.type._def,v)}var g5=(f,v)=>{return n(f.innerType._def,v)};function S8(f,v,J){let X=J??v.dateStrategy;if(Array.isArray(X))return{anyOf:X.map((Q,Y)=>S8(f,v,Q))};switch(X){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return t3(f,v)}}var t3=(f,v)=>{let J={type:"integer",format:"unix-time"};if(v.target==="openApi3")return J;for(let X of f.checks)switch(X.kind){case"min":Qv(J,"minimum",X.value,X.message,v);break;case"max":Qv(J,"maximum",X.value,X.message,v);break}return J};function Z5(f,v){return{...n(f.innerType._def,v),default:f.defaultValue()}}function C5(f,v){return v.effectStrategy==="input"?n(f.schema._def,v):{}}function T5(f){return{type:"string",enum:Array.from(f.values)}}var e3=(f)=>{if("type"in f&&f.type==="string")return!1;return"allOf"in f};function x5(f,v){let J=[n(f.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),n(f.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter((Y)=>!!Y),X=v.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,Q=[];return J.forEach((Y)=>{if(e3(Y)){if(Q.push(...Y.allOf),Y.unevaluatedProperties===void 0)X=void 0}else{let G=Y;if("additionalProperties"in Y&&Y.additionalProperties===!1){let{additionalProperties:z,...W}=Y;G=W}else X=void 0;Q.push(G)}}),Q.length?{allOf:Q,...X}:void 0}function b5(f,v){let J=typeof f.value;if(J!=="bigint"&&J!=="number"&&J!=="boolean"&&J!=="string")return{type:Array.isArray(f.value)?"array":"object"};if(v.target==="openApi3")return{type:J==="bigint"?"integer":J,enum:[f.value]};return{type:J==="bigint"?"integer":J,const:f.value}}var y8=void 0,B1={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(y8===void 0)y8=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return y8},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function qQ(f,v){let J={type:"string"};if(f.checks)for(let X of f.checks)switch(X.kind){case"min":Qv(J,"minLength",typeof J.minLength==="number"?Math.max(J.minLength,X.value):X.value,X.message,v);break;case"max":Qv(J,"maxLength",typeof J.maxLength==="number"?Math.min(J.maxLength,X.value):X.value,X.message,v);break;case"email":switch(v.emailStrategy){case"format:email":$1(J,"email",X.message,v);break;case"format:idn-email":$1(J,"idn-email",X.message,v);break;case"pattern:zod":mv(J,B1.email,X.message,v);break}break;case"url":$1(J,"uri",X.message,v);break;case"uuid":$1(J,"uuid",X.message,v);break;case"regex":mv(J,X.regex,X.message,v);break;case"cuid":mv(J,B1.cuid,X.message,v);break;case"cuid2":mv(J,B1.cuid2,X.message,v);break;case"startsWith":mv(J,RegExp(`^${I8(X.value,v)}`),X.message,v);break;case"endsWith":mv(J,RegExp(`${I8(X.value,v)}$`),X.message,v);break;case"datetime":$1(J,"date-time",X.message,v);break;case"date":$1(J,"date",X.message,v);break;case"time":$1(J,"time",X.message,v);break;case"duration":$1(J,"duration",X.message,v);break;case"length":Qv(J,"minLength",typeof J.minLength==="number"?Math.max(J.minLength,X.value):X.value,X.message,v),Qv(J,"maxLength",typeof J.maxLength==="number"?Math.min(J.maxLength,X.value):X.value,X.message,v);break;case"includes":{mv(J,RegExp(I8(X.value,v)),X.message,v);break}case"ip":{if(X.version!=="v6")$1(J,"ipv4",X.message,v);if(X.version!=="v4")$1(J,"ipv6",X.message,v);break}case"base64url":mv(J,B1.base64url,X.message,v);break;case"jwt":mv(J,B1.jwt,X.message,v);break;case"cidr":{if(X.version!=="v6")mv(J,B1.ipv4Cidr,X.message,v);if(X.version!=="v4")mv(J,B1.ipv6Cidr,X.message,v);break}case"emoji":mv(J,B1.emoji(),X.message,v);break;case"ulid":{mv(J,B1.ulid,X.message,v);break}case"base64":{switch(v.base64Strategy){case"format:binary":{$1(J,"binary",X.message,v);break}case"contentEncoding:base64":{Qv(J,"contentEncoding","base64",X.message,v);break}case"pattern:zod":{mv(J,B1.base64,X.message,v);break}}break}case"nanoid":mv(J,B1.nanoid,X.message,v);case"toLowerCase":case"toUpperCase":case"trim":break;default:((Q)=>{})(X)}return J}function I8(f,v){return v.patternStrategy==="escape"?fG(f):f}var vG=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function fG(f){let v="";for(let J=0;J<f.length;J++){if(!vG.has(f[J]))v+="\\";v+=f[J]}return v}function $1(f,v,J,X){if(f.format||f.anyOf?.some((Q)=>Q.format)){if(!f.anyOf)f.anyOf=[];if(f.format){if(f.anyOf.push({format:f.format,...f.errorMessage&&X.errorMessages&&{errorMessage:{format:f.errorMessage.format}}}),delete f.format,f.errorMessage){if(delete f.errorMessage.format,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.anyOf.push({format:v,...J&&X.errorMessages&&{errorMessage:{format:J}}})}else Qv(f,"format",v,J,X)}function mv(f,v,J,X){if(f.pattern||f.allOf?.some((Q)=>Q.pattern)){if(!f.allOf)f.allOf=[];if(f.pattern){if(f.allOf.push({pattern:f.pattern,...f.errorMessage&&X.errorMessages&&{errorMessage:{pattern:f.errorMessage.pattern}}}),delete f.pattern,f.errorMessage){if(delete f.errorMessage.pattern,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.allOf.push({pattern:k5(v,X),...J&&X.errorMessages&&{errorMessage:{pattern:J}}})}else Qv(f,"pattern",k5(v,X),J,X)}function k5(f,v){if(!v.applyRegexFlags||!f.flags)return f.source;let J={i:f.flags.includes("i"),m:f.flags.includes("m"),s:f.flags.includes("s")},X=J.i?f.source.toLowerCase():f.source,Q="",Y=!1,G=!1,z=!1;for(let W=0;W<X.length;W++){if(Y){Q+=X[W],Y=!1;continue}if(J.i){if(G){if(X[W].match(/[a-z]/)){if(z)Q+=X[W],Q+=`${X[W-2]}-${X[W]}`.toUpperCase(),z=!1;else if(X[W+1]==="-"&&X[W+2]?.match(/[a-z]/))Q+=X[W],z=!0;else Q+=`${X[W]}${X[W].toUpperCase()}`;continue}}else if(X[W].match(/[a-z]/)){Q+=`[${X[W]}${X[W].toUpperCase()}]`;continue}}if(J.m){if(X[W]==="^"){Q+=`(^|(?<=[\r
]))`;continue}else if(X[W]==="$"){Q+=`($|(?=[\r
]))`;continue}}if(J.s&&X[W]==="."){Q+=G?`${X[W]}\r
`:`[${X[W]}\r
]`;continue}if(Q+=X[W],X[W]==="\\")Y=!0;else if(G&&X[W]==="]")G=!1;else if(!G&&X[W]==="[")G=!0}try{new RegExp(Q)}catch{return console.warn(`Could not convert regex pattern at ${v.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),f.source}return Q}function PQ(f,v){if(v.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(v.target==="openApi3"&&f.keyType?._def.typeName===y.ZodEnum)return{type:"object",required:f.keyType._def.values,properties:f.keyType._def.values.reduce((X,Q)=>({...X,[Q]:n(f.valueType._def,{...v,currentPath:[...v.currentPath,"properties",Q]})??{}}),{}),additionalProperties:v.rejectedAdditionalProperties};let J={type:"object",additionalProperties:n(f.valueType._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]})??v.allowedAdditionalProperties};if(v.target==="openApi3")return J;if(f.keyType?._def.typeName===y.ZodString&&f.keyType._def.checks?.length){let{type:X,...Q}=qQ(f.keyType._def,v);return{...J,propertyNames:Q}}else if(f.keyType?._def.typeName===y.ZodEnum)return{...J,propertyNames:{enum:f.keyType._def.values}};else if(f.keyType?._def.typeName===y.ZodBranded&&f.keyType._def.type._def.typeName===y.ZodString&&f.keyType._def.type._def.checks?.length){let{type:X,...Q}=HQ(f.keyType._def,v);return{...J,propertyNames:Q}}return J}function l5(f,v){if(v.mapStrategy==="record")return PQ(f,v);let J=n(f.keyType._def,{...v,currentPath:[...v.currentPath,"items","items","0"]})||{},X=n(f.valueType._def,{...v,currentPath:[...v.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[J,X],minItems:2,maxItems:2}}}function m5(f){let v=f.values,X=Object.keys(f.values).filter((Y)=>{return typeof v[v[Y]]!=="number"}).map((Y)=>v[Y]),Q=Array.from(new Set(X.map((Y)=>typeof Y)));return{type:Q.length===1?Q[0]==="string"?"string":"number":["string","number"],enum:X}}function u5(){return{not:{}}}function r5(f){return f.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Kf={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function a5(f,v){if(v.target==="openApi3")return p5(f,v);let J=f.options instanceof Map?Array.from(f.options.values()):f.options;if(J.every((X)=>(X._def.typeName in Kf)&&(!X._def.checks||!X._def.checks.length))){let X=J.reduce((Q,Y)=>{let G=Kf[Y._def.typeName];return G&&!Q.includes(G)?[...Q,G]:Q},[]);return{type:X.length>1?X:X[0]}}else if(J.every((X)=>X._def.typeName==="ZodLiteral"&&!X.description)){let X=J.reduce((Q,Y)=>{let G=typeof Y._def.value;switch(G){case"string":case"number":case"boolean":return[...Q,G];case"bigint":return[...Q,"integer"];case"object":if(Y._def.value===null)return[...Q,"null"];case"symbol":case"undefined":case"function":default:return Q}},[]);if(X.length===J.length){let Q=X.filter((Y,G,z)=>z.indexOf(Y)===G);return{type:Q.length>1?Q:Q[0],enum:J.reduce((Y,G)=>{return Y.includes(G._def.value)?Y:[...Y,G._def.value]},[])}}}else if(J.every((X)=>X._def.typeName==="ZodEnum"))return{type:"string",enum:J.reduce((X,Q)=>[...X,...Q._def.values.filter((Y)=>!X.includes(Y))],[])};return p5(f,v)}var p5=(f,v)=>{let J=(f.options instanceof Map?Array.from(f.options.values()):f.options).map((X,Q)=>n(X._def,{...v,currentPath:[...v.currentPath,"anyOf",`${Q}`]})).filter((X)=>!!X&&(!v.strictUnions||typeof X==="object"&&Object.keys(X).length>0));return J.length?{anyOf:J}:void 0};function c5(f,v){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(f.innerType._def.typeName)&&(!f.innerType._def.checks||!f.innerType._def.checks.length)){if(v.target==="openApi3")return{type:Kf[f.innerType._def.typeName],nullable:!0};return{type:[Kf[f.innerType._def.typeName],"null"]}}if(v.target==="openApi3"){let X=n(f.innerType._def,{...v,currentPath:[...v.currentPath]});if(X&&"$ref"in X)return{allOf:[X],nullable:!0};return X&&{...X,nullable:!0}}let J=n(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","0"]});return J&&{anyOf:[J,{type:"null"}]}}function n5(f,v){let J={type:"number"};if(!f.checks)return J;for(let X of f.checks)switch(X.kind){case"int":J.type="integer",R8(J,"type",X.message,v);break;case"min":if(v.target==="jsonSchema7")if(X.inclusive)Qv(J,"minimum",X.value,X.message,v);else Qv(J,"exclusiveMinimum",X.value,X.message,v);else{if(!X.inclusive)J.exclusiveMinimum=!0;Qv(J,"minimum",X.value,X.message,v)}break;case"max":if(v.target==="jsonSchema7")if(X.inclusive)Qv(J,"maximum",X.value,X.message,v);else Qv(J,"exclusiveMaximum",X.value,X.message,v);else{if(!X.inclusive)J.exclusiveMaximum=!0;Qv(J,"maximum",X.value,X.message,v)}break;case"multipleOf":Qv(J,"multipleOf",X.value,X.message,v);break}return J}function d5(f,v){let J=v.target==="openAi",X={type:"object",properties:{}},Q=[],Y=f.shape();for(let z in Y){let W=Y[z];if(W===void 0||W._def===void 0)continue;let $=JG(W);if($&&J){if(W instanceof sv)W=W._def.innerType;if(!W.isNullable())W=W.nullable();$=!1}let H=n(W._def,{...v,currentPath:[...v.currentPath,"properties",z],propertyPath:[...v.currentPath,"properties",z]});if(H===void 0)continue;if(X.properties[z]=H,!$)Q.push(z)}if(Q.length)X.required=Q;let G=QG(f,v);if(G!==void 0)X.additionalProperties=G;return X}function QG(f,v){if(f.catchall._def.typeName!=="ZodNever")return n(f.catchall._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]});switch(f.unknownKeys){case"passthrough":return v.allowedAdditionalProperties;case"strict":return v.rejectedAdditionalProperties;case"strip":return v.removeAdditionalStrategy==="strict"?v.allowedAdditionalProperties:v.rejectedAdditionalProperties}}function JG(f){try{return f.isOptional()}catch{return!0}}var i5=(f,v)=>{if(v.currentPath.toString()===v.propertyPath?.toString())return n(f.innerType._def,v);let J=n(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","1"]});return J?{anyOf:[{not:{}},J]}:{}};var s5=(f,v)=>{if(v.pipeStrategy==="input")return n(f.in._def,v);else if(v.pipeStrategy==="output")return n(f.out._def,v);let J=n(f.in._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),X=n(f.out._def,{...v,currentPath:[...v.currentPath,"allOf",J?"1":"0"]});return{allOf:[J,X].filter((Q)=>Q!==void 0)}};function o5(f,v){return n(f.type._def,v)}function t5(f,v){let X={type:"array",uniqueItems:!0,items:n(f.valueType._def,{...v,currentPath:[...v.currentPath,"items"]})};if(f.minSize)Qv(X,"minItems",f.minSize.value,f.minSize.message,v);if(f.maxSize)Qv(X,"maxItems",f.maxSize.value,f.maxSize.message,v);return X}function e5(f,v){if(f.rest)return{type:"array",minItems:f.items.length,items:f.items.map((J,X)=>n(J._def,{...v,currentPath:[...v.currentPath,"items",`${X}`]})).reduce((J,X)=>X===void 0?J:[...J,X],[]),additionalItems:n(f.rest._def,{...v,currentPath:[...v.currentPath,"additionalItems"]})};else return{type:"array",minItems:f.items.length,maxItems:f.items.length,items:f.items.map((J,X)=>n(J._def,{...v,currentPath:[...v.currentPath,"items",`${X}`]})).reduce((J,X)=>X===void 0?J:[...J,X],[])}}function vX(){return{not:{}}}function fX(){return{}}var QX=(f,v)=>{return n(f.innerType._def,v)};var JX=(f,v,J)=>{switch(v){case y.ZodString:return qQ(f,J);case y.ZodNumber:return n5(f,J);case y.ZodObject:return d5(f,J);case y.ZodBigInt:return y5(f,J);case y.ZodBoolean:return I5();case y.ZodDate:return S8(f,J);case y.ZodUndefined:return vX();case y.ZodNull:return r5(J);case y.ZodArray:return S5(f,J);case y.ZodUnion:case y.ZodDiscriminatedUnion:return a5(f,J);case y.ZodIntersection:return x5(f,J);case y.ZodTuple:return e5(f,J);case y.ZodRecord:return PQ(f,J);case y.ZodLiteral:return b5(f,J);case y.ZodEnum:return T5(f);case y.ZodNativeEnum:return m5(f);case y.ZodNullable:return c5(f,J);case y.ZodOptional:return i5(f,J);case y.ZodMap:return l5(f,J);case y.ZodSet:return t5(f,J);case y.ZodLazy:return()=>f.getter()._def;case y.ZodPromise:return o5(f,J);case y.ZodNaN:case y.ZodNever:return u5();case y.ZodEffects:return C5(f,J);case y.ZodAny:return R5();case y.ZodUnknown:return fX();case y.ZodDefault:return Z5(f,J);case y.ZodBranded:return HQ(f,J);case y.ZodReadonly:return QX(f,J);case y.ZodCatch:return g5(f,J);case y.ZodPipeline:return s5(f,J);case y.ZodFunction:case y.ZodVoid:case y.ZodSymbol:return;default:return((X)=>{return})(v)}};function n(f,v,J=!1){let X=v.seen.get(f);if(v.override){let z=v.override?.(f,v,X,J);if(z!==h5)return z}if(X&&!J){let z=XG(X,v);if(z!==void 0)return z}let Q={def:f,path:v.currentPath,jsonSchema:void 0};v.seen.set(f,Q);let Y=JX(f,f.typeName,v),G=typeof Y==="function"?n(Y(),v):Y;if(G)GG(f,v,G);if(v.postProcess){let z=v.postProcess(G,f,v);return Q.jsonSchema=G,z}return Q.jsonSchema=G,G}var XG=(f,v)=>{switch(v.$refStrategy){case"root":return{$ref:f.path.join("/")};case"relative":return{$ref:YG(v.currentPath,f.path)};case"none":case"seen":{if(f.path.length<v.currentPath.length&&f.path.every((J,X)=>v.currentPath[X]===J))return console.warn(`Recursive reference detected at ${v.currentPath.join("/")}! Defaulting to any`),{};return v.$refStrategy==="seen"?{}:void 0}}},YG=(f,v)=>{let J=0;for(;J<f.length&&J<v.length;J++)if(f[J]!==v[J])break;return[(f.length-J).toString(),...v.slice(J)].join("/")},GG=(f,v,J)=>{if(f.description){if(J.description=f.description,v.markdownDescription)J.markdownDescription=f.description}return J};var VQ=(f,v)=>{let J=_5(v),X=typeof v==="object"&&v.definitions?Object.entries(v.definitions).reduce((W,[$,H])=>({...W,[$]:n(H._def,{...J,currentPath:[...J.basePath,J.definitionPath,$]},!0)??{}}),{}):void 0,Q=typeof v==="string"?v:v?.nameStrategy==="title"?void 0:v?.name,Y=n(f._def,Q===void 0?J:{...J,currentPath:[...J.basePath,J.definitionPath,Q]},!1)??{},G=typeof v==="object"&&v.name!==void 0&&v.nameStrategy==="title"?v.name:void 0;if(G!==void 0)Y.title=G;let z=Q===void 0?X?{...Y,[J.definitionPath]:X}:Y:{$ref:[...J.$refStrategy==="relative"?[]:J.basePath,J.definitionPath,Q].join("/"),[J.definitionPath]:{...X,[Q]:Y}};if(J.target==="jsonSchema7")z.$schema="http://json-schema.org/draft-07/schema#";else if(J.target==="jsonSchema2019-09"||J.target==="openAi")z.$schema="https://json-schema.org/draft/2019-09/schema#";if(J.target==="openAi"&&(("anyOf"in z)||("oneOf"in z)||("allOf"in z)||("type"in z)&&Array.isArray(z.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return z};var g8;(function(f){f.Completable="McpCompletable"})(g8||(g8={}));class jf extends t{_parse(f){let{ctx:v}=this._processInputParams(f),J=v.data;return this._def.type._parse({data:J,path:v.path,parent:v})}unwrap(){return this._def.type}}jf.create=(f,v)=>{return new jf({type:f,typeName:g8.Completable,complete:v.complete,...zG(v)})};function zG(f){if(!f)return{};let{errorMap:v,invalid_type_error:J,required_error:X,description:Q}=f;if(v&&(J||X))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:Q};return{errorMap:(G,z)=>{var W,$;let{message:H}=f;if(G.code==="invalid_enum_value")return{message:H!==null&&H!==void 0?H:z.defaultError};if(typeof z.data==="undefined")return{message:(W=H!==null&&H!==void 0?H:X)!==null&&W!==void 0?W:z.defaultError};if(G.code!=="invalid_type")return{message:z.defaultError};return{message:($=H!==null&&H!==void 0?H:J)!==null&&$!==void 0?$:z.defaultError}},description:Q}}class Z8{constructor(f,v){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new _8(f,v)}async connect(f){return await this.server.connect(f)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(af.shape.method.value),this.server.assertCanSetRequestHandler(cf.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(af,()=>({tools:Object.entries(this._registeredTools).filter(([,f])=>f.enabled).map(([f,v])=>{let J={name:f,title:v.title,description:v.description,inputSchema:v.inputSchema?VQ(v.inputSchema,{strictUnions:!0}):WG,annotations:v.annotations};if(v.outputSchema)J.outputSchema=VQ(v.outputSchema,{strictUnions:!0});return J})})),this.server.setRequestHandler(cf,async(f,v)=>{let J=this._registeredTools[f.params.name];if(!J)throw new Vv(Pv.InvalidParams,`Tool ${f.params.name} not found`);if(!J.enabled)throw new Vv(Pv.InvalidParams,`Tool ${f.params.name} disabled`);let X;if(J.inputSchema){let Q=await J.inputSchema.safeParseAsync(f.params.arguments);if(!Q.success)throw new Vv(Pv.InvalidParams,`Invalid arguments for tool ${f.params.name}: ${Q.error.message}`);let Y=Q.data,G=J.callback;try{X=await Promise.resolve(G(Y,v))}catch(z){X={content:[{type:"text",text:z instanceof Error?z.message:String(z)}],isError:!0}}}else{let Q=J.callback;try{X=await Promise.resolve(Q(v))}catch(Y){X={content:[{type:"text",text:Y instanceof Error?Y.message:String(Y)}],isError:!0}}}if(J.outputSchema&&!X.isError){if(!X.structuredContent)throw new Vv(Pv.InvalidParams,`Tool ${f.params.name} has an output schema but no structured content was provided`);let Q=await J.outputSchema.safeParseAsync(X.structuredContent);if(!Q.success)throw new Vv(Pv.InvalidParams,`Invalid structured content for tool ${f.params.name}: ${Q.error.message}`)}return X}),this._toolHandlersInitialized=!0}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(nf.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(nf,async(f)=>{switch(f.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(f,f.params.ref);case"ref/resource":return this.handleResourceCompletion(f,f.params.ref);default:throw new Vv(Pv.InvalidParams,`Invalid completion reference: ${f.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(f,v){let J=this._registeredPrompts[v.name];if(!J)throw new Vv(Pv.InvalidParams,`Prompt ${v.name} not found`);if(!J.enabled)throw new Vv(Pv.InvalidParams,`Prompt ${v.name} disabled`);if(!J.argsSchema)return NQ;let X=J.argsSchema.shape[f.params.argument.name];if(!(X instanceof jf))return NQ;let Y=await X._def.complete(f.params.argument.value,f.params.context);return YX(Y)}async handleResourceCompletion(f,v){let J=Object.values(this._registeredResourceTemplates).find((Y)=>Y.resourceTemplate.uriTemplate.toString()===v.uri);if(!J){if(this._registeredResources[v.uri])return NQ;throw new Vv(Pv.InvalidParams,`Resource template ${f.params.ref.uri} not found`)}let X=J.resourceTemplate.completeCallback(f.params.argument.name);if(!X)return NQ;let Q=await X(f.params.argument.value,f.params.context);return YX(Q)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(lf.shape.method.value),this.server.assertCanSetRequestHandler(mf.shape.method.value),this.server.assertCanSetRequestHandler(uf.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(lf,async(f,v)=>{let J=Object.entries(this._registeredResources).filter(([Q,Y])=>Y.enabled).map(([Q,Y])=>({uri:Q,name:Y.name,...Y.metadata})),X=[];for(let Q of Object.values(this._registeredResourceTemplates)){if(!Q.resourceTemplate.listCallback)continue;let Y=await Q.resourceTemplate.listCallback(v);for(let G of Y.resources)X.push({...Q.metadata,...G})}return{resources:[...J,...X]}}),this.server.setRequestHandler(mf,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([v,J])=>({name:v,uriTemplate:J.resourceTemplate.uriTemplate.toString(),...J.metadata}))}}),this.server.setRequestHandler(uf,async(f,v)=>{let J=new URL(f.params.uri),X=this._registeredResources[J.toString()];if(X){if(!X.enabled)throw new Vv(Pv.InvalidParams,`Resource ${J} disabled`);return X.readCallback(J,v)}for(let Q of Object.values(this._registeredResourceTemplates)){let Y=Q.resourceTemplate.uriTemplate.match(J.toString());if(Y)return Q.readCallback(J,Y,v)}throw new Vv(Pv.InvalidParams,`Resource ${J} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(rf.shape.method.value),this.server.assertCanSetRequestHandler(pf.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(rf,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,f])=>f.enabled).map(([f,v])=>{return{name:f,title:v.title,description:v.description,arguments:v.argsSchema?$G(v.argsSchema):void 0}})})),this.server.setRequestHandler(pf,async(f,v)=>{let J=this._registeredPrompts[f.params.name];if(!J)throw new Vv(Pv.InvalidParams,`Prompt ${f.params.name} not found`);if(!J.enabled)throw new Vv(Pv.InvalidParams,`Prompt ${f.params.name} disabled`);if(J.argsSchema){let X=await J.argsSchema.safeParseAsync(f.params.arguments);if(!X.success)throw new Vv(Pv.InvalidParams,`Invalid arguments for prompt ${f.params.name}: ${X.error.message}`);let Q=X.data,Y=J.callback;return await Promise.resolve(Y(Q,v))}else{let X=J.callback;return await Promise.resolve(X(v))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(f,v,...J){let X;if(typeof J[0]==="object")X=J.shift();let Q=J[0];if(typeof v==="string"){if(this._registeredResources[v])throw new Error(`Resource ${v} is already registered`);let Y=this._createRegisteredResource(f,void 0,v,X,Q);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Y}else{if(this._registeredResourceTemplates[f])throw new Error(`Resource template ${f} is already registered`);let Y=this._createRegisteredResourceTemplate(f,void 0,v,X,Q);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Y}}registerResource(f,v,J,X){if(typeof v==="string"){if(this._registeredResources[v])throw new Error(`Resource ${v} is already registered`);let Q=this._createRegisteredResource(f,J.title,v,J,X);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}else{if(this._registeredResourceTemplates[f])throw new Error(`Resource template ${f} is already registered`);let Q=this._createRegisteredResourceTemplate(f,J.title,v,J,X);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}}_createRegisteredResource(f,v,J,X,Q){let Y={name:f,title:v,metadata:X,readCallback:Q,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({uri:null}),update:(G)=>{if(typeof G.uri!=="undefined"&&G.uri!==J){if(delete this._registeredResources[J],G.uri)this._registeredResources[G.uri]=Y}if(typeof G.name!=="undefined")Y.name=G.name;if(typeof G.title!=="undefined")Y.title=G.title;if(typeof G.metadata!=="undefined")Y.metadata=G.metadata;if(typeof G.callback!=="undefined")Y.readCallback=G.callback;if(typeof G.enabled!=="undefined")Y.enabled=G.enabled;this.sendResourceListChanged()}};return this._registeredResources[J]=Y,Y}_createRegisteredResourceTemplate(f,v,J,X,Q){let Y={resourceTemplate:J,title:v,metadata:X,readCallback:Q,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({name:null}),update:(G)=>{if(typeof G.name!=="undefined"&&G.name!==f){if(delete this._registeredResourceTemplates[f],G.name)this._registeredResourceTemplates[G.name]=Y}if(typeof G.title!=="undefined")Y.title=G.title;if(typeof G.template!=="undefined")Y.resourceTemplate=G.template;if(typeof G.metadata!=="undefined")Y.metadata=G.metadata;if(typeof G.callback!=="undefined")Y.readCallback=G.callback;if(typeof G.enabled!=="undefined")Y.enabled=G.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[f]=Y,Y}_createRegisteredPrompt(f,v,J,X,Q){let Y={title:v,description:J,argsSchema:X===void 0?void 0:B.object(X),callback:Q,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({name:null}),update:(G)=>{if(typeof G.name!=="undefined"&&G.name!==f){if(delete this._registeredPrompts[f],G.name)this._registeredPrompts[G.name]=Y}if(typeof G.title!=="undefined")Y.title=G.title;if(typeof G.description!=="undefined")Y.description=G.description;if(typeof G.argsSchema!=="undefined")Y.argsSchema=B.object(G.argsSchema);if(typeof G.callback!=="undefined")Y.callback=G.callback;if(typeof G.enabled!=="undefined")Y.enabled=G.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[f]=Y,Y}_createRegisteredTool(f,v,J,X,Q,Y,G){let z={title:v,description:J,inputSchema:X===void 0?void 0:B.object(X),outputSchema:Q===void 0?void 0:B.object(Q),annotations:Y,callback:G,enabled:!0,disable:()=>z.update({enabled:!1}),enable:()=>z.update({enabled:!0}),remove:()=>z.update({name:null}),update:(W)=>{if(typeof W.name!=="undefined"&&W.name!==f){if(delete this._registeredTools[f],W.name)this._registeredTools[W.name]=z}if(typeof W.title!=="undefined")z.title=W.title;if(typeof W.description!=="undefined")z.description=W.description;if(typeof W.paramsSchema!=="undefined")z.inputSchema=B.object(W.paramsSchema);if(typeof W.callback!=="undefined")z.callback=W.callback;if(typeof W.annotations!=="undefined")z.annotations=W.annotations;if(typeof W.enabled!=="undefined")z.enabled=W.enabled;this.sendToolListChanged()}};return this._registeredTools[f]=z,this.setToolRequestHandlers(),this.sendToolListChanged(),z}tool(f,...v){if(this._registeredTools[f])throw new Error(`Tool ${f} is already registered`);let J,X,Q,Y;if(typeof v[0]==="string")J=v.shift();if(v.length>1){let z=v[0];if(XX(z)){if(X=v.shift(),v.length>1&&typeof v[0]==="object"&&v[0]!==null&&!XX(v[0]))Y=v.shift()}else if(typeof z==="object"&&z!==null)Y=v.shift()}let G=v[0];return this._createRegisteredTool(f,void 0,J,X,Q,Y,G)}registerTool(f,v,J){if(this._registeredTools[f])throw new Error(`Tool ${f} is already registered`);let{title:X,description:Q,inputSchema:Y,outputSchema:G,annotations:z}=v;return this._createRegisteredTool(f,X,Q,Y,G,z,J)}prompt(f,...v){if(this._registeredPrompts[f])throw new Error(`Prompt ${f} is already registered`);let J;if(typeof v[0]==="string")J=v.shift();let X;if(v.length>1)X=v.shift();let Q=v[0],Y=this._createRegisteredPrompt(f,void 0,J,X,Q);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),Y}registerPrompt(f,v,J){if(this._registeredPrompts[f])throw new Error(`Prompt ${f} is already registered`);let{title:X,description:Q,argsSchema:Y}=v,G=this._createRegisteredPrompt(f,X,Q,Y,J);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),G}isConnected(){return this.server.transport!==void 0}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var WG={type:"object",properties:{}};function XX(f){if(typeof f!=="object"||f===null)return!1;return Object.keys(f).length===0||Object.values(f).some(BG)}function BG(f){return f!==null&&typeof f==="object"&&"parse"in f&&typeof f.parse==="function"&&"safeParse"in f&&typeof f.safeParse==="function"}function $G(f){return Object.entries(f.shape).map(([v,J])=>({name:v,description:J.description,required:!J.isOptional()}))}function YX(f){return{completion:{values:f.slice(0,100),total:f.length,hasMore:f.length>100}}}var NQ={completion:{values:[],hasMore:!1}};var g7=Kv(require("http"));var d=Kv(require("vscode")),c1=Kv(require("path"));var k0=Kv(require("vscode"));var MQ=Kv(require("vscode"));var GX=require("node:child_process");function zX(f){let v=f;if(f.startsWith("file://"))v=f.substring(7);if(!v.startsWith("/")||/^\/[a-zA-Z]:/.test(v))return f;try{return GX.execFileSync("wsl.exe",["-e","wslpath","-w",v],{encoding:"utf8",stdio:["pipe","pipe","ignore"]}).trim()}catch{return f}}function WX(f){if(process.platform==="win32"){let v=zX(f);return v.startsWith("file://")?MQ.Uri.parse(v):MQ.Uri.file(v)}else return MQ.Uri.parse(f)}function KG(f){return f.map((v)=>({message:v.message,severity:k0.DiagnosticSeverity[v.severity],range:{start:{line:v.range.start.line,character:v.range.start.character},end:{line:v.range.end.line,character:v.range.end.character}},source:v.source,code:v.code?.toString()}))}function BX(f){return(f?(()=>{let X=WX(f);return[[X,k0.languages.getDiagnostics(X)]]})():k0.languages.getDiagnostics()).map(([X,Q])=>({uri:X.toString(!0),diagnostics:KG(Q)}))}class j0{static instance;listener;clients;clientCounter;output;constructor(f){this.clients=new Map,this.clientCounter=0,this.output=f}static getInstance(f){if(!j0.instance)j0.instance=new j0(f);return j0.instance}registerClient(f){let v=`client_${this.clientCounter++}`;return this.clients.set(v,f),this.startStreaming(),v}unregisterClient(f){if(this.clients.delete(f)){if(this.output.info(`[DiagnosticStreamManager] Unregistered client ${f}. Total clients: ${this.clients.size}`),this.clients.size===0)this.stopStreaming()}}startStreaming(){if(!this.listener)this.listener=k0.languages.onDidChangeDiagnostics((f)=>{this.notifyDiagnosticsChanged(f.uris)}),this.output.info("[DiagnosticStreamManager] Started streaming diagnostics")}stopStreaming(){if(this.listener)this.listener.dispose(),this.listener=void 0,this.output.info("[DiagnosticStreamManager] Stopped streaming diagnostics")}notifyDiagnosticsChanged(f){if(this.clients.size===0)return;let v=f.map((J)=>J.toString());this.output.info(`[DiagnosticStreamManager] Notifying ${this.clients.size} clients about diagnostics change for ${f.length} files`),this.clients.forEach((J,X)=>{try{J(v)}catch(Q){this.output.error(`[DiagnosticStreamManager] Error notifying client ${X}: ${Q}`)}})}dispose(){this.clients.clear(),this.stopStreaming()}}async function $X(f={}){try{let v=BX(f.uri);return{content:[{type:"text",text:JSON.stringify(v,null,2)}]}}catch(v){throw console.error("Error getting diagnostics through MCP:",v),v}}async function KX({filePath:f,preview:v,startText:J,endText:X,selectToEndOfLine:Q,makeFrontmost:Y=!0}){try{if(!f)throw new Error("File path is required");let G;if(!c1.isAbsolute(f)&&d.workspace.workspaceFolders&&d.workspace.workspaceFolders.length>0){let z=d.workspace.workspaceFolders[0].uri.fsPath,W=c1.join(z,f);G=d.Uri.file(W),console.log(`Converted relative path '${f}' to absolute: '${W}'`)}else G=d.Uri.file(f);try{await d.workspace.fs.stat(G);let z=await d.workspace.openTextDocument(G),W=d.window.visibleTextEditors.some((j)=>j.document.uri.toString()===G.toString()),$;if(Y||!W)$=await d.window.showTextDocument(z,{preview:v,preserveFocus:!Y});else $=d.window.visibleTextEditors.find((j)=>j.document.uri.toString()===G.toString());if(J&&$){let j=z.getText(),N={success:!0,filePath:G.fsPath,message:`Opened file: ${G.fsPath}`},K=j.indexOf(J);if(K!==-1){let q=z.positionAt(K),M;if(X){let L=j.substring(K+J.length).indexOf(X);if(L!==-1){let F=K+J.length+L+X.length;if(M=z.positionAt(F),Q)M=new d.Position(M.line,Number.MAX_SAFE_INTEGER);$.selection=new d.Selection(q,M),$.revealRange(new d.Range(q,M),d.TextEditorRevealType.InCenter),N.message=`Opened file and selected text from "${J}" to "${X}"`}else $.selection=new d.Selection(q,q),$.revealRange(new d.Range(q,q),d.TextEditorRevealType.InCenter),N.message=`Opened file and positioned at "${J}" (end text "${X}" not found)`}else M=z.positionAt(K+J.length),$.selection=new d.Selection(q,M),$.revealRange(new d.Range(q,M),d.TextEditorRevealType.InCenter),N.message=`Opened file and selected text "${J}"`}else N.message=`Opened file, but text "${J}" not found`;return{content:[{type:"text",text:N.message}]}}let H={success:!0,filePath:G.fsPath,fileUrl:z.uri.toString(),message:`Opened file: ${G.fsPath}`};if(!Y)H.languageId=z.languageId,H.lineCount=z.lineCount,H.isDirty=z.isDirty,H.isUntitled=z.isUntitled,H.isClosed=z.isClosed;return{content:[{type:"text",text:Y?H.message:JSON.stringify(H,null,2)}]}}catch(z){throw new Error(`File not found: ${G.fsPath}`)}}catch(G){throw console.error("Error opening file through MCP:",G),G}}async function jX(){try{let f=d.window.activeTextEditor,v=[];for(let X of d.window.tabGroups.all)for(let Q of X.tabs)if(Q.input instanceof d.TabInputText){let Y=Q.input.uri,G=d.workspace.textDocuments.find((W)=>W.uri.toString()===Y.toString()),z={uri:Y.toString(),isActive:Q.isActive,isPinned:Q.isPinned,isPreview:Q.isPreview,isDirty:Q.isDirty,label:Q.label,groupIndex:X.viewColumn?X.viewColumn-1:0,viewColumn:X.viewColumn,isGroupActive:X.isActive};if(G){if(z.fileName=G.fileName,z.languageId=G.languageId,z.lineCount=G.lineCount,z.isUntitled=G.isUntitled,f&&f.document.uri.toString()===Y.toString())z.selection={start:{line:f.selection.start.line,character:f.selection.start.character},end:{line:f.selection.end.line,character:f.selection.end.character},isReversed:f.selection.isReversed}}v.push(z)}return{content:[{type:"text",text:JSON.stringify({tabs:v},null,2)}]}}catch(f){throw console.error("Error getting open editors through MCP:",f),f}}async function HX(){try{let f=d.window.activeTextEditor;if(!f)return{content:[{type:"text",text:JSON.stringify({success:!1,message:"No active editor found"},null,2)}]};let{selection:v,document:J}=f,X=J.getText(v),Q=J.uri.fsPath;return{content:[{type:"text",text:JSON.stringify({success:!0,text:X,filePath:Q,fileUrl:J.uri.toString(),selection:{start:{line:v.start.line,character:v.start.character},end:{line:v.end.line,character:v.end.character},isEmpty:v.isEmpty}},null,2)}]}}catch(f){throw console.error("Error getting current selection through MCP:",f),f}}async function qX(){try{let v=(d.workspace.workspaceFolders||[]).map((J)=>({name:J.name,uri:J.uri.toString(),path:J.uri.fsPath,index:J.index}));return{content:[{type:"text",text:JSON.stringify({success:!0,folders:v,rootPath:d.workspace.rootPath||null,workspaceFile:d.workspace.workspaceFile?.toString()||null},null,2)}]}}catch(f){throw console.error("Error getting workspace folders through MCP:",f),f}}async function PX({filePath:f}){try{if(!f)throw new Error("File path is required");let v;if(!c1.isAbsolute(f)&&d.workspace.workspaceFolders&&d.workspace.workspaceFolders.length>0){let X=d.workspace.workspaceFolders[0].uri.fsPath,Q=c1.join(X,f);v=d.Uri.file(Q),console.log(`Converted relative path '${f}' to absolute: '${Q}'`)}else v=d.Uri.file(f);let J=d.workspace.textDocuments.find((X)=>X.uri.toString()===v.toString());if(!J)return{content:[{type:"text",text:JSON.stringify({success:!1,message:`Document not open: ${v.fsPath}`},null,2)}]};return{content:[{type:"text",text:JSON.stringify({success:!0,filePath:v.fsPath,isDirty:J.isDirty,isUntitled:J.isUntitled},null,2)}]}}catch(v){throw console.error("Error checking document dirty state through MCP:",v),v}}async function VX({filePath:f}){try{if(!f)throw new Error("File path is required");let v;if(!c1.isAbsolute(f)&&d.workspace.workspaceFolders&&d.workspace.workspaceFolders.length>0){let Q=d.workspace.workspaceFolders[0].uri.fsPath,Y=c1.join(Q,f);v=d.Uri.file(Y),console.log(`Converted relative path '${f}' to absolute: '${Y}'`)}else v=d.Uri.file(f);let J=d.workspace.textDocuments.find((Q)=>Q.uri.toString()===v.toString());if(!J)return{content:[{type:"text",text:JSON.stringify({success:!1,message:`Document not open: ${v.fsPath}`},null,2)}]};let X=await J.save();return{content:[{type:"text",text:JSON.stringify({success:!0,filePath:v.fsPath,saved:X,message:X?"Document saved successfully":"Document was not dirty or save failed"},null,2)}]}}catch(v){throw console.error("Error saving document through MCP:",v),v}}var Mv=Kv(require("vscode")),C8;async function jG(){if(!C8){let f=Mv.extensions.getExtension("ms-toolsai.jupyter");if(!f)throw new Error("Jupyter extension not installed");C8=Promise.resolve(f.activate())}return C8}function l0(f,v){return f.error(v),{content:[{type:"text",text:v}]}}async function NX(f,v){let J=Mv.window.activeNotebookEditor;if(!J)return l0(f,"No active notebook editor found.");let X;try{X=await jG()}catch(G){return l0(f,"Unable to request Jupyter extension API. It is either not installed or not activated.")}let Q=await X.kernels.getKernel(J.notebook.uri);if(!Q)return l0(f,"No kernel found for the active notebook. Please connect to a kernel.");if(Q.language!=="python")return l0(f,`Kernel language is ${Q?.language}, not python.`);let Y={content:[]};try{f.info(`Executing ${v}`);let G=new TextDecoder,z=await qG(v,J.notebook),W=J.notebook.getCells().find((j)=>j.metadata.id===z);if(!W)return l0(f,"No cell found in the notebook.");let $=J.notebook.getCells().indexOf(W);if(J.revealRange(new Mv.NotebookRange($,$+1),Mv.NotebookEditorRevealType.InCenter),!await HG(f))return l0(f,"Code execution cancelled by user. Ask the user how they would like to proceed.");await Mv.commands.executeCommand("notebook.cell.execute",{ranges:[{start:$,end:$+1}],document:J.notebook.uri});for(let j of W.outputs)for(let N of j.items)if(N.mime===PG){let K=JSON.parse(G.decode(N.data));f.appendLine(`Error executing code ${K.name}: ${K.message},/n ${K.stack}`),Y.content.push({type:"text",text:`Error: ${K.name}: ${K.message},/n ${K.stack}`})}else if(N.mime===VG){let K=Buffer.from(N.data).toString("base64");Y.content.push({type:"image",data:K,mimeType:N.mime})}else Y.content.push({type:"text",text:G.decode(N.data)});f.info("Code execution completed")}catch(G){f.error(`Code execution failed with an error '${G}'`)}return Y}async function HG(f){return(await Mv.window.showQuickPick([{label:"Execute",description:"Run the code in the notebook"},{label:"Cancel",description:"Do not execute the code"}],{title:"Claude Code Execution",placeHolder:"Choose whether to execute the code"}))?.label==="Execute"}async function qG(f,v){let J=new Mv.NotebookCellData(Mv.NotebookCellKind.Code,f,"python"),X=Math.random().toString(36).substring(2,15);J.metadata={id:X};let Q=v.getCells().length,Y=Mv.NotebookEdit.insertCells(Q,[J]),G=new Mv.WorkspaceEdit;return G.set(v.uri,[Y]),await Mv.workspace.applyEdit(G),X}var PG=Mv.NotebookCellOutputItem.error(new Error("")).mime,VG="image/png";var DQ=Kv(require("vscode")),O1=Kv(require("fs")),OQ=Kv(require("path")),MX=Kv(require("os")),DX=Kv(require("http"));function NG(){return Math.floor(Math.random()*55536)+1e4}function OX(){let f=OQ.join(MX.homedir(),".claude","ide");if(!O1.existsSync(f))O1.mkdirSync(f,{recursive:!0});return f}function T8(f,v){let J=OX(),X=OQ.join(J,`${f}.lock`),Q=O1.existsSync(X),Y=DQ.workspace.workspaceFolders?.map((z)=>z.uri.fsPath)||[],G={pid:process.ppid,workspaceFolders:Y,ideName:DQ.env.appName,transport:"ws",runningInWindows:process.platform==="win32",authToken:v};if(O1.writeFileSync(X,JSON.stringify(G)),Q)console.log(`Updated lock file with new workspace folders: ${X}`);return X}function LX(f){let v=OX(),J=OQ.join(v,`${f}.lock`);if(O1.existsSync(J))try{O1.unlinkSync(J)}catch(X){console.error(`Failed to delete lock file ${J}:`,X)}}function MG(f){return new Promise((v)=>{let J=DX.createServer();J.once("error",()=>{v(!1)}),J.once("listening",()=>{J.close(),v(!0)}),J.listen(f)})}async function AX(){for(let f=0;f<50;f++){let v=NG();if(await MG(v))return v}throw new Error("Failed to find an available port after multiple attempts")}var Fv=Kv(require("vscode")),UX=Kv(require("fs"));var n1;async function FX(f,v,J,X,Q,Y,G,z,W){f.info("diff from",X,"to",Q,"as",G);let $=Fv.Uri.file(X);try{if((await Fv.workspace.openTextDocument($)).isDirty){let x=UX.readFileSync(X,"utf8");$=v.createFile(X,x).uri}}catch(I){f.info("leftTempFileProvider.createFile",X),$=v.createFile(X,"").uri}let j=J.createFile(Q,Y).uri,N=await Fv.workspace.openTextDocument(j),K=(I)=>{return I.input instanceof Fv.TabInputTextDiff&&I.input.modified.toString()===j.toString()};if(await x8(f)>0)await new Promise((I)=>setTimeout(I,200));let M={preview:!1},V=Y,L=Y,F=void 0;Fv.workspace.onDidChangeTextDocument((I)=>{if(I.document.uri.toString()===j.toString()){if(V=L,L=I.document.getText(),I.contentChanges.length>3&&I.reason!==Fv.TextDocumentChangeReason.Undo&&I.reason!==Fv.TextDocumentChangeReason.Redo)F={time:Date.now(),contents:V}}});let w=new Promise((I)=>{W.push(Fv.workspace.onWillSaveTextDocument((x)=>{if(x.document.uri.toString()===j.toString()){let _=x.document.getText();if(F&&Date.now()-F.time<500)_=F.contents;I(_)}}))}),h=!0;if(n1)n1.dispose(),n1=void 0;try{n1=Fv.commands.registerCommand("type",(I)=>{if(h&&Fv.window.activeTextEditor?.document.uri.toString()===j.toString())return;return Fv.commands.executeCommand("default:type",I)}),setTimeout(()=>{if(h=!1,n1)n1.dispose(),n1=void 0},1000),W.push(n1)}catch(I){f.warn("Could not register type command interceptor:",I)}let E=LQ(),R=await Fv.commands.executeCommand("vscode.diff",$,j,G,M);f.info("diff result",R,G,$,j,M);try{await wX(()=>{return LQ().some((I)=>I.label===G)},1000)}catch(I){let x=LQ().filter((_)=>!E.some((Z)=>Z.label===_.label)).map((_)=>{return{label:_.label,isDiff:_.isDiff}});throw f.error(`Failed to open diff tab, possibly new tabs: ${JSON.stringify(x)}`),I}_1();let b=new Promise((I)=>{W.push(z((x)=>{if(x.activeTab&&K(x.activeTab))I(x)}))}).then((I)=>{if(I.accepted)return f.info("diff_accepted",G),{content:[{type:"text",text:"FILE_SAVED"},{type:"text",text:N.getText()}]};else return{content:[{type:"text",text:"DIFF_REJECTED"},{type:"text",text:G}]}}),l=wX(()=>{return!LQ().some((I)=>I.label===G)}).then(()=>{return f.info("tab_closed",G),{content:[{type:"text",text:"DIFF_REJECTED"},{type:"text",text:G}]}}),g=w.then(async(I)=>{return f.info("file_saved",G),{content:[{type:"text",text:"FILE_SAVED"},{type:"text",text:I}]}}),m=[l,b];if(Fv.workspace.getConfiguration("files").get("autoSave")==="off")m.push(g);return await Promise.race(m)}function LQ(){return Fv.window.tabGroups.all.flatMap((f)=>f.tabs.map((v)=>({tab:v,label:v.label,isDiff:v.input instanceof Fv.TabInputTextDiff,viewColumn:f.viewColumn,isActive:v.isActive})))}function wX(f,v){return new Promise((J,X)=>{let Q,Y=setInterval(()=>{if(f()){if(clearInterval(Y),Q)clearTimeout(Q);J()}},100);if(v)Q=setTimeout(()=>{clearInterval(Y),X(new Error(`Timeout waiting after ${v}ms`))},v)})}async function b8(f,v,J){f.environmentVariableCollection.replace(v,J),console.log(`Set ${v}=${J} in terminal environment (in-memory)`)}async function k8(f,v){if(f.environmentVariableCollection.get(v))f.environmentVariableCollection.delete(v),console.log(`Cleared ${v} from terminal environment (in-memory)`)}var Tz=Kv(O7()),xz=Kv(a8()),bz=Kv(n8()),_7=Kv(gQ()),v9=Kv(E7());var c0=_7.default;class f9{ws;started=!1;opened;constructor(f){this.ws=f;this.opened=new Promise((v,J)=>{if(this.ws.readyState===c0.OPEN)v();else this.ws.on("open",()=>{v()}),this.ws.on("error",(X)=>{J(X)})}),this.ws.on("message",this.onMessageHandler),this.ws.on("error",this.onErrorHandler),this.ws.on("close",this.onCloseHandler)}onclose;onerror;onmessage;onMessageHandler=(f)=>{try{let v=JSON.parse(f.toString("utf-8")),J=HJ.parse(v);this.onmessage?.(J)}catch(v){this.onErrorHandler(v)}};onErrorHandler=(f)=>{this.onerror?.(f instanceof Error?f:new Error("Failed to process message"))};onCloseHandler=()=>{this.onclose?.(),this.ws.off("message",this.onMessageHandler),this.ws.off("error",this.onErrorHandler),this.ws.off("close",this.onCloseHandler)};async start(){if(this.started)throw new Error("Start can only be called once per transport.");if(await this.opened,this.ws.readyState!==c0.OPEN)throw new Error("WebSocket is not open. Cannot start transport.");this.started=!0}async close(){if(this.ws.readyState===c0.OPEN||this.ws.readyState===c0.CONNECTING)this.ws.close();this.onCloseHandler()}async send(f){if(this.ws.readyState!==c0.OPEN)throw new Error("WebSocket is not open. Cannot send message.");let v=JSON.stringify(f);try{await new Promise((J,X)=>{this.ws.send(v,(Q)=>{if(Q)X(Q);else J()})})}catch(J){throw this.onErrorHandler(J),J}}}var Q9=Kv(require("vscode"));var C1=null;function J9(){return C1}function R7(f,v){let J=null,X=Q9.window.onDidChangeTextEditorSelection((Q)=>{let Y=Q.textEditor,G=Y.selection,z=Y.document,$={text:z.getText(G),filePath:z.uri.fsPath,fileUrl:z.uri.toString(),selection:{start:{line:G.start.line,character:G.start.character},end:{line:G.end.line,character:G.end.character},isEmpty:G.isEmpty}},H=!C1||C1.text!==$.text||C1.filePath!==$.filePath||C1.selection.start.line!==$.selection.start.line||C1.selection.start.character!==$.selection.start.character||C1.selection.end.line!==$.selection.end.line||C1.selection.end.character!==$.selection.end.character;C1=$;let j=v();if(H&&j&&f.server){if(J)clearTimeout(J);J=setTimeout(()=>{let N=v();if(N)X9($,N)},300)}});return{dispose:()=>{if(X.dispose(),J)clearTimeout(J)}}}function S7(f,v,J){f(()=>{let X=Q9.window.activeTextEditor;if(!X)return;let Q=X.selection,Y={filePath:X.document.uri.fsPath};if(!Q.isEmpty)Y.lineStart=Q.start.line,Y.lineEnd=Q.end.line;let G=J();if(G&&v.server)y7(Y,G)})}function kz(){let f=cv.env.appName,v;switch(f.toLowerCase()){case"visual studio code":v="Claude Code VSCode MCP";break;case"cursor":v="Claude Code Cursor MCP";break;case"windsurf":v="Claude Code Windsurf MCP";break;default:v=`Claude Code ${f} MCP`}return v}function lz(f,v,J,X){f.logged.event((Q)=>{let Y=X();if(Y&&v.server)x7(J,Q,Y);else Y9.push(Q)})}function Z7(f,v,J,X,Q,Y,G){let z=new Z8({name:kz(),version:f.extension.packageJSON.version||"0.0.1"});z.tool("openDiff","Open a git diff for the file",{old_file_path:B.string().describe("Path to the file to show diff for. If not provided, uses active editor."),new_file_path:B.string().describe("Path to the file to show diff for. If not provided, uses active editor."),new_file_contents:B.string().describe("Contents of the new file. If not provided then the current file contents of new_file_path will be used."),tab_name:B.string().describe("Path to the file to show diff for. If not provided, uses active editor.")},async({old_file_path:F,new_file_path:w,new_file_contents:h,tab_name:E})=>{let R=[];try{return await FX(X,v,J,F,w,h,E,Q,R)}catch(b){throw X.error(`Error opening diff: ${b}`),b}finally{for(let b of R)b.dispose()}}),z.tool("getDiagnostics","Get language diagnostics from VS Code",{uri:B.string().optional().describe("Optional file URI to get diagnostics for. If not provided, gets diagnostics for all files.")},$X),z.tool("close_tab",{tab_name:B.string()},async({tab_name:F})=>{return await mz(F,X),setTimeout(()=>{_1()},500),{content:[{type:"text",text:"TAB_CLOSED"}]}}),z.tool("closeAllDiffTabs","Close all diff tabs in the editor",{},async()=>{let F=await x8(X);return setTimeout(()=>{_1()},500),{content:[{type:"text",text:`CLOSED_${F}_DIFF_TABS`}]}}),z.tool("openFile","Open a file in the editor and optionally select a range of text",{filePath:B.string().describe("Path to the file to open"),preview:B.boolean().describe("Whether to open the file in preview mode").default(!1),startText:B.string().describe("Text pattern to find the start of the selection range. Selects from the beginning of this match."),endText:B.string().describe("Text pattern to find the end of the selection range. Selects up to the end of this match. If not provided, only the startText match will be selected."),selectToEndOfLine:B.boolean().describe("If true, selection will extend to the end of the line containing the endText match.").default(!1),makeFrontmost:B.boolean().describe("Whether to make the file the active editor tab. If false, the file will be opened in the background without changing focus.").default(!0)},{readOnlyHint:!0},KX),z.tool("getOpenEditors","Get information about currently open editors",{},jX),z.tool("getWorkspaceFolders","Get all workspace folders currently open in the IDE",{},qX),z.tool("getCurrentSelection","Get the current text selection in the active editor",{},HX),z.tool("checkDocumentDirty","Check if a document has unsaved changes (is dirty)",{filePath:B.string().describe("Path to the file to check")},PX),z.tool("saveDocument","Save a document with unsaved changes",{filePath:B.string().describe("Path to the file to save")},VX),z.tool("getLatestSelection","Get the most recent text selection (even if not in the active editor)",{},async()=>{return{content:[{type:"text",text:JSON.stringify(J9()||{success:!1,message:"No selection available"},null,2)}]}}),z.tool("executeCode",`Execute python code in the Jupyter kernel for the current notebook file.
    
    All code will be executed in the current Jupyter kernel.
    
    Avoid declaring variables or modifying the state of the kernel unless the user
    explicitly asks for it.
    
    Any code executed will persist across calls to this tool, unless the kernel
    has been restarted.`,{code:B.string().describe("The code to be executed on the kernel.")},({code:F})=>{return NX(X,F)});let W=g7.createServer(),$=new v9.default({server:W}),H=null,j=null,N=j0.getInstance(X),K=I7.randomUUID();$.on("connection",function(F,w){if(w.headers["x-claude-code-ide-authorization"]!==K){X.error("Unauthorized WebSocket connection attempt"),F.close(1008,"Unauthorized");return}if(X.info("New WS connection from:",w.url||"unknown"),H){if(X.info("Disconnecting previous WebSocket client"),j)N.unregisterClient(j),X.info(`Unregistered previous diagnostic client: ${j}`),j=null;try{H.close()}catch(R){X.error("Error closing previous transport:",R)}}let h=new f9(F);H=h;let E=null;z.connect(h).then(()=>{X.info("MCP server connected to transport"),E=N.registerClient((R)=>{h.send({jsonrpc:"2.0",method:"diagnostics_changed",params:{uris:R}}).catch((b)=>{X.error("Error sending diagnostics notification:",b.message)})}),j=E,X.info(`Registered diagnostic client: ${E}`),setTimeout(()=>{let R=J9();if(R)X9(R,h);let b=[...Y9];Y9.length=0;for(let l of b)x7(X,l,h)},500)}).catch((R)=>{console.error("Error connecting transport:",R),H=null;try{F.close()}catch(b){X.error("Error closing WebSocket:",b)}}),F.on("close",()=>{if(X.info("WS client disconnected"),H===h){if(H=null,E&&j===E)N.unregisterClient(E),X.info(`Unregistered diagnostic client: ${E}`),j=null}})});let q=()=>H;lz(G,z,X,q),S7(Y,z,q);let M=R7(z,q),V=null;W.on("listening",()=>{let F=W.address();if(F&&typeof F!=="string")V=F.port});let L=cv.workspace.onDidChangeWorkspaceFolders(()=>{if(V!==null)T8(V,K),X.info(`Updated lock file for port ${V} with new workspace folders`)});return{httpServer:W,authToken:K,dispose:async()=>{if(V!==null)LX(V),X.info(`Deleted lock file for port ${V}`),await k8(f,"CLAUDE_CODE_SSE_PORT"),await k8(f,"ENABLE_IDE_INTEGRATION");if(M.dispose(),L.dispose(),N.dispose(),W.close(),typeof z.close==="function")await z.close()}}}async function C7(f,v,J,X){try{let Q=await AX(),Y=null;return new Promise((G,z)=>{f.listen(Q,"127.0.0.1",async()=>{X.info(`MCP Server running on port ${Q} (localhost only)`),Y=T8(Q,v),console.log(`Created lock file at ${Y}`);try{await b8(J,"CLAUDE_CODE_SSE_PORT",String(Q)),await b8(J,"ENABLE_IDE_INTEGRATION","true"),G(Q)}catch(W){console.error("Failed to set environment variables:",W),z(W)}}).on("error",(W)=>{console.error("Failed to start MCP server:",W),cv.window.showErrorMessage(`Failed to start MCP server: ${W}`),z(W)})})}catch(Q){throw console.error("Failed to start MCP server:",Q),cv.window.showErrorMessage(`Failed to start MCP server: ${Q}`),Q}}async function T7(f,v){let J=f.input;if(J instanceof cv.TabInputTextDiff)try{await(await cv.workspace.openTextDocument(J.modified)).save()}catch(X){v.error("Error saving modified file:",X)}await cv.window.tabGroups.close(f)}async function mz(f,v){for(let J of cv.window.tabGroups.all)for(let X of J.tabs)if(X.label===f)return await T7(X,v),!0;return!1}async function x8(f){let v=0;f.info("Closing all diff tabs in the editor...");for(let J of cv.window.tabGroups.all)for(let X of J.tabs)if(X.input instanceof cv.TabInputTextDiff&&X.label.includes("[Claude Code]"))await T7(X,f),v++;return f.info(`Closed ${v} diff tabs.`),v}function x7(f,v,J){f.info("Logging event:",v.eventName,v.eventData);let X={eventName:v.eventName,eventData:v.eventData??{}};J.send({jsonrpc:"2.0",method:"log_event",params:X}).catch((Q)=>{f.error("Error sending log event:",Q)})}var Y9=[];async function X9(f,v){try{v.send({jsonrpc:"2.0",method:"selection_changed",params:f}).catch((J)=>{console.error("Error sending selection change notification:",J)})}catch(J){console.error("Error sending selection change notification:",J)}}async function y7(f,v){try{v.send({jsonrpc:"2.0",method:"at_mentioned",params:f}).catch((J)=>{console.error("Error sending at-mentioned notification:",J)})}catch(J){console.error("Error sending at-mentioned notification:",J)}}var Iv=Kv(require("vscode"));function b7(f){if(!f.includes("\\"))return f;if(f.startsWith("\\\\"))return"/"+f.substring(2).replace(/\\/g,"/");if(/^[a-zA-Z]:/.test(f))f=f.replace(/^([a-zA-Z]):/,(v,J)=>"/"+J.toLowerCase()+":");return f.replace(/\\/g,"/")}class k7{uri;contents;type=Iv.FileType.File;ctime;modifiedTime;constructor(f,v){this.uri=f;this.contents=v;this.ctime=this.modifiedTime=Date.now()}get mtime(){return this.modifiedTime}get size(){return this.data.length}get data(){return this.contents}write(f){this.modifiedTime=Date.now(),this.contents=f,this.emitter.fire()}emitter=new Iv.EventEmitter;onDidSave=this.emitter.event}class CQ{scheme;documents=new Map;constructor(f){this.scheme=f}createFile(f,v){let J=f;if(process.platform==="win32")J=b7(f);let X=Iv.Uri.from({scheme:this.scheme,path:J}),Q=this.documents.get(X.path);if(Q)return this.writeFile(X,new TextEncoder().encode(v)),Q;return Q=new k7(X,new TextEncoder().encode(v)),this.documents.set(X.path,Q),Q}emitter=new Iv.EventEmitter;onDidChangeFile=this.emitter.event;watch(f){return new Iv.Disposable(()=>{})}stat(f){return this.find(f)}find(f){let v=f.path;if(process.platform==="win32")v=b7(f.path);let J=this.documents.get(v);if(!J)throw Iv.FileSystemError.FileNotFound(f);return J}readDirectory(f){throw Iv.FileSystemError.FileNotFound(f)}readFile(f){let v=this.find(f).data;if(v)return v;throw Iv.FileSystemError.FileNotFound(f)}writeFile(f,v){this.find(f).write(v),this.emitter.fire([{type:Iv.FileChangeType.Changed,uri:f}])}createDirectory(f){throw Iv.FileSystemError.Unavailable()}delete(f){throw Iv.FileSystemError.Unavailable()}rename(f,v,J){throw Iv.FileSystemError.Unavailable()}}var l7=Kv(require("vscode"));class G9{logged=new l7.EventEmitter;logEvent(f,v){this.logged.fire({eventName:f,eventData:v})}}function uz(f){let v=A1.window.createOutputChannel("Claude Code",{log:!0});f.subscriptions.push(v);let J=new G9;v.info("Claude code extension is now active?");let X=new CQ("_claude_fs_left");f.subscriptions.push(A1.workspace.registerFileSystemProvider(X.scheme,X));let Q=new CQ("_claude_fs_right");f.subscriptions.push(A1.workspace.registerFileSystemProvider(Q.scheme,Q)),f.subscriptions.push(pz(Q.scheme));let Y=p9(f.subscriptions),G=a9(f.subscriptions);m9(v,f,J),r9(v,f,J);try{let{httpServer:z,authToken:W,dispose:$}=Z7(f,X,Q,v,Y,G,J);C7(z,W,f,v).catch((H)=>{v.error("Failed to start MCP server:",H),A1.window.showErrorMessage(`Failed to start MCP server: ${H}`)}),f.subscriptions.push({dispose:async()=>{await $()}})}catch(z){v.error("Error during extension activation:",z),A1.window.showErrorMessage(`Failed to activate Claude Code extension: ${z}`)}}function rz(){console.log("Claude code extension is now deactivated")}function pz(f){return A1.window.onDidChangeVisibleTextEditors((v)=>{let J=v.some((X)=>X?.document.uri.scheme===f);A1.commands.executeCommand("setContext","claude-code.viewingProposedDiff",J)})}

//# debugId=07EAE20C72289B1764756E2164756E21
